<?xml version="1.0" ?>
<PsychoPy2experiment encoding="utf-8" version="2025.1.1">
  <Settings>
    <Param val="ptb" valType="str" updates="None" name="Audio lib"/>
    <Param val="" valType="str" updates="None" name="Completed URL"/>
    <Param val="auto" valType="str" updates="None" name="Data file delimiter"/>
    <Param val="u'data/%s_%s_%s' % (expInfo['participant'], expName, expInfo['date'])" valType="code" updates="None" name="Data filename"/>
    <Param val="True" valType="bool" updates="None" name="Enable Escape"/>
    <Param val="Thank you for your patience." valType="str" updates="None" name="End Message"/>
    <Param val="{'participant': 'f&quot;{randint(0, 999999):06.0f}&quot;', 'session': '1', 'day': '1', 'Global clock format': 'None'}" valType="code" updates="None" name="Experiment info"/>
    <Param val="True" valType="bool" updates="None" name="Force stereo"/>
    <Param val="False" valType="bool" updates="None" name="Full-screen window"/>
    <Param val="" valType="str" updates="None" name="HTML path"/>
    <Param val="" valType="str" updates="None" name="Incomplete URL"/>
    <Param val="testMonitor" valType="str" updates="None" name="Monitor"/>
    <Param val="[]" valType="list" updates="None" name="Resources"/>
    <Param val="False" valType="bool" updates="None" name="Save csv file"/>
    <Param val="False" valType="bool" updates="None" name="Save excel file"/>
    <Param val="False" valType="bool" updates="None" name="Save hdf5 file"/>
    <Param val="True" valType="bool" updates="None" name="Save log file"/>
    <Param val="True" valType="bool" updates="None" name="Save psydat file"/>
    <Param val="True" valType="bool" updates="None" name="Save wide csv file"/>
    <Param val="1" valType="num" updates="None" name="Screen"/>
    <Param val="True" valType="bool" updates="None" name="Show info dlg"/>
    <Param val="False" valType="bool" updates="None" name="Show mouse"/>
    <Param val="height" valType="str" updates="None" name="Units"/>
    <Param val="" valType="str" updates="None" name="Use version"/>
    <Param val="[1280, 720]" valType="list" updates="None" name="Window size (pixels)"/>
    <Param val="none" valType="str" updates="None" name="backgroundFit"/>
    <Param val="" valType="str" updates="None" name="backgroundImg"/>
    <Param val="avg" valType="str" updates="None" name="blendMode"/>
    <Param val="float" valType="str" updates="None" name="clockFormat"/>
    <Param val="{'thisRow.t': 'priority.CRITICAL', 'expName': 'priority.LOW'}" valType="dict" updates="None" name="colPriority"/>
    <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
    <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
    <Param val="warning" valType="code" updates="None" name="consoleLoggingLevel"/>
    <Param val="default" valType="str" updates="None" name="ecSampleRate"/>
    <Param val="100.1.1.1" valType="str" updates="None" name="elAddress"/>
    <Param val="FILTER_LEVEL_2" valType="str" updates="None" name="elDataFiltering"/>
    <Param val="FILTER_LEVEL_OFF" valType="str" updates="None" name="elLiveFiltering"/>
    <Param val="EYELINK 1000 DESKTOP" valType="str" updates="None" name="elModel"/>
    <Param val="ELLIPSE_FIT" valType="str" updates="None" name="elPupilAlgorithm"/>
    <Param val="PUPIL_AREA" valType="str" updates="None" name="elPupilMeasure"/>
    <Param val="1000" valType="num" updates="None" name="elSampleRate"/>
    <Param val="False" valType="bool" updates="None" name="elSimMode"/>
    <Param val="RIGHT_EYE" valType="str" updates="None" name="elTrackEyes"/>
    <Param val="PUPIL_CR_TRACKING" valType="str" updates="None" name="elTrackingMode"/>
    <Param val="DecisionLab" valType="str" updates="None" name="expName"/>
    <Param val="" valType="str" updates="None" name="expVersion"/>
    <Param val="on Sync" valType="str" updates="None" name="exportHTML"/>
    <Param val="None" valType="str" updates="None" name="eyetracker"/>
    <Param val="" valType="code" updates="None" name="frameRate"/>
    <Param val="Attempting to measure frame rate of screen, please wait..." valType="str" updates="None" name="frameRateMsg"/>
    <Param val="127.0.0.1" valType="str" updates="None" name="gpAddress"/>
    <Param val="4242" valType="num" updates="None" name="gpPort"/>
    <Param val="PsychToolbox" valType="str" updates="None" name="keyboardBackend"/>
    <Param val="info" valType="code" updates="None" name="logging level"/>
    <Param val="True" valType="bool" updates="None" name="measureFrameRate"/>
    <Param val="('MIDDLE_BUTTON',)" valType="list" updates="None" name="mgBlink"/>
    <Param val="CONTINUOUS" valType="str" updates="None" name="mgMove"/>
    <Param val="0.5" valType="num" updates="None" name="mgSaccade"/>
    <Param val="neon.local" valType="str" updates="None" name="plCompanionAddress"/>
    <Param val="8080" valType="num" updates="None" name="plCompanionPort"/>
    <Param val="0.6" valType="num" updates="None" name="plConfidenceThreshold"/>
    <Param val="" valType="str" updates="None" name="plPupilCaptureRecordingLocation"/>
    <Param val="127.0.0.1" valType="str" updates="None" name="plPupilRemoteAddress"/>
    <Param val="50020" valType="num" updates="None" name="plPupilRemotePort"/>
    <Param val="1000" valType="num" updates="None" name="plPupilRemoteTimeoutMs"/>
    <Param val="False" valType="bool" updates="None" name="plPupillometryOnly"/>
    <Param val="psychopy_iohub_surface" valType="str" updates="None" name="plSurfaceName"/>
    <Param val="1" valType="code" updates="None" name="runMode"/>
    <Param val="False" valType="bool" updates="None" name="rush"/>
    <Param val="time" valType="str" updates="None" name="sortColumns"/>
    <Param val="" valType="str" updates="None" name="tbLicenseFile"/>
    <Param val="" valType="str" updates="None" name="tbModel"/>
    <Param val="60" valType="num" updates="None" name="tbSampleRate"/>
    <Param val="" valType="str" updates="None" name="tbSerialNo"/>
    <Param val="pyglet" valType="str" updates="None" name="winBackend"/>
  </Settings>
  <Routines>
    <Routine name="routine_5s_Initial_Picture">
      <RoutineSettingsComponent name="routine_5s_Initial_Picture" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="routine_5s_Initial_Picture" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="image" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="C:/Users/charl/OneDrive/Documents/070620-014-The-Tetons.jpg" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="5" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
    </Routine>
    <Routine name="Random">
      <RoutineSettingsComponent name="Random" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="Random" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <PolygonComponent name="polygon_2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="white" valType="color" updates="constant" name="fillColor"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="white" valType="color" updates="constant" name="lineColor"/>
        <Param val="1" valType="num" updates="constant" name="lineWidth"/>
        <Param val="4" valType="int" updates="constant" name="nVertices"/>
        <Param val="polygon_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, .2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="rectangle" valType="str" updates="None" name="shape"/>
        <Param val="(1, .5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="5" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="list" updates="constant" name="vertices"/>
      </PolygonComponent>
    </Routine>
    <Routine name="pointQuestion">
      <RoutineSettingsComponent name="pointQuestion" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="pointQuestion" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="image_2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="C:/Users/charl/OneDrive/Pictures/Screenshots/Screenshot 2025-10-15 171029.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
    </Routine>
    <Routine name="Welcome">
      <RoutineSettingsComponent name="Welcome" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="Welcome" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, .2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Welcome to the Prediction Game!&amp;#10;&amp;#10;Your goal in this game is to learn the number of points associated with different fruits.&amp;#10;&amp;#10;In the next couple of slides, instructions for the task will be provided, followed by the task itself.&amp;#10;&amp;#10;At the end of the task, you will be presented with several additional questions.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <ImageComponent name="apple" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/apple.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="apple" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-.4, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="banana" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/banana.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="banana" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-.24, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="grape" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/grapes.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="grape" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-.08, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="kiwi" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/kiwi.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="kiwi" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(.08, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="pear" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/pear.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="pear" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(.24, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="strawberry" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/strawberry.png" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="strawberry" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(.4, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.15, 0.15)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <KeyboardComponent name="key_resp_17" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_17" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="TaskStructure">
      <RoutineSettingsComponent name="TaskStructure" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="TaskStructure" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, .2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Task Structure&amp;#10;&amp;#10;In this task, you'll see different fruits as you play.&amp;#10;&amp;#10;Each fruit can either give you points or take points away.&amp;#10;&amp;#10;You'll earn points when the number is positive (+), and lose points when it's negative (-)." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_19" plugin="None">
        <Param val="-1.0000, 0.0039, -1.0000" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.15" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_19" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-.2, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+50" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_21" plugin="None">
        <Param val="0.5294, -1.0000, -1.0000" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.15" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_21" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(.2, -.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="-50" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_16" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_16" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <TextComponent name="text_28" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_28" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.4)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="yourGoal">
      <RoutineSettingsComponent name="yourGoal" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="yourGoal" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.035" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, .3)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Your Goal&amp;#10;&amp;#10;Right after a fruit is shown, you will be asked to predict how many points it will provide this time.&amp;#10;&amp;#10;Do your best to be as accurate as you can.&amp;#10;&amp;#10;Immediately after your prediction, you will be shown how many points it actually provided this time.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <SliderComponent name="slider_2" plugin="None">
        <Param val="White" valType="color" updates="constant" name="borderColor"/>
        <Param val="LightGray" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="Red" valType="color" updates="constant" name="fillColor"/>
        <Param val="False" valType="bool" updates="constant" name="flip"/>
        <Param val="Noto Sans" valType="str" updates="constant" name="font"/>
        <Param val="False" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="5" valType="num" updates="constant" name="granularity"/>
        <Param val="0" valType="code" updates="None" name="initVal"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="labels"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="slider_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="constant" name="readOnly"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 0.075)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeHistory"/>
        <Param val="True" valType="bool" updates="constant" name="storeRating"/>
        <Param val="True" valType="bool" updates="constant" name="storeRatingTime"/>
        <Param val="()" valType="list" updates="constant" name="styleTweaks"/>
        <Param val="slider" valType="str" updates="constant" name="styles"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="ticks"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </SliderComponent>
      <TextComponent name="text_22" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.055" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_22" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.08)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="&quot;How many points do you expect to receive from this fruit?&quot;" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_18" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_18" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="startTask">
      <RoutineSettingsComponent name="startTask" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="startTask" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_4" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_4" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="10" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="import random&amp;#10;import sys&amp;#10;import csv&amp;#10;&amp;#10;# Path joining function (avoid os import for PsychoPy compatibility)&amp;#10;def _join_path(*parts):&amp;#10;    &quot;&quot;&quot;Join path parts using '/' separator (works on both Windows and Unix)&quot;&quot;&quot;&amp;#10;    return '/'.join(str(p).strip('/') for p in parts if p)&amp;#10;&amp;#10;# Add current directory to path to import data_logging&amp;#10;# PsychoPy runs from the experiment directory, so data_logging.py should be in the same directory&amp;#10;# NO os import - completely avoid it for PsychoPy compatibility (doesn't work online/Pavlovia)&amp;#10;try:&amp;#10;    # Try to import data_logging from the experiment directory&amp;#10;    # This should work if data_logging.py is in the same directory as the .psyexp file&amp;#10;    from data_logging import initialize_logger&amp;#10;except ImportError:&amp;#10;    print(&quot;WARNING: Could not import data_logging module. Data logging will be disabled.&quot;)&amp;#10;    print(&quot;Make sure data_logging.py is in the same directory as your .psyexp file.&quot;)&amp;#10;    # Create a dummy logger&amp;#10;    class DummyLogger:&amp;#10;        def __init__(self, *args, **kwargs): pass&amp;#10;        def start_trial(self, *args): pass&amp;#10;        def log_keypress(self, *args): pass&amp;#10;        def log_learning_trial(self, *args, **kwargs): pass&amp;#10;        def log_decision_trial(self, *args, **kwargs): pass&amp;#10;        def save_learning_data(self, *args, **kwargs): pass&amp;#10;        def save_decision_data(self, *args, **kwargs): pass&amp;#10;    def initialize_logger(*args, **kwargs):&amp;#10;        return DummyLogger()&amp;#10;&amp;#10;# Initialize data logger&amp;#10;# Get session_number and day from PsychoPy's expInfo dialog&amp;#10;# PsychoPy Builder requires 'participant' field - we'll use that as session_number&amp;#10;# Also need 'day' field (1 or 2)&amp;#10;&amp;#10;# Try to get from expInfo (set in PsychoPy Builder dialog)&amp;#10;try:&amp;#10;    # PsychoPy stores dialog info in thisExp.info or expInfo&amp;#10;    exp_info_dict = None&amp;#10;    if 'thisExp' in locals() and hasattr(thisExp, 'info'):&amp;#10;        exp_info_dict = thisExp.info&amp;#10;    elif 'expInfo' in locals():&amp;#10;        exp_info_dict = expInfo&amp;#10;    &amp;#10;    if exp_info_dict:&amp;#10;        # Get session_number from 'session' field (user's actual field name)&amp;#10;        # Fallback to 'session_number' or 'participant' if 'session' not found&amp;#10;        if 'session' in exp_info_dict:&amp;#10;            session_str = str(exp_info_dict['session']).strip()&amp;#10;            # Remove any 'sub-' prefix if present&amp;#10;            if session_str.startswith('sub-'):&amp;#10;                session_str = session_str[4:]&amp;#10;            # Try to convert to integer&amp;#10;            try:&amp;#10;                SESSION_NUMBER = int(session_str)&amp;#10;            except ValueError:&amp;#10;                # If not a number, use hash of string to get consistent number&amp;#10;                SESSION_NUMBER = abs(hash(session_str)) % 10000&amp;#10;                print(f&quot;WARNING: session '{exp_info_dict['session']}' is not a number, using hash: {SESSION_NUMBER}&quot;)&amp;#10;        elif 'session_number' in exp_info_dict:&amp;#10;            SESSION_NUMBER = int(exp_info_dict['session_number'])&amp;#10;        elif 'participant' in exp_info_dict:&amp;#10;            # Use participant field as fallback (but user said to ignore it)&amp;#10;            participant_str = str(exp_info_dict['participant']).strip()&amp;#10;            if participant_str.lower() != 'ignore':&amp;#10;                # Only use if not set to 'ignore'&amp;#10;                if participant_str.startswith('sub-'):&amp;#10;                    participant_str = participant_str[4:]&amp;#10;                try:&amp;#10;                    SESSION_NUMBER = int(participant_str)&amp;#10;                except ValueError:&amp;#10;                    SESSION_NUMBER = abs(hash(participant_str)) % 10000&amp;#10;                    print(f&quot;WARNING: participant '{exp_info_dict['participant']}' is not a number, using hash: {SESSION_NUMBER}&quot;)&amp;#10;            else:&amp;#10;                SESSION_NUMBER = 1&amp;#10;                print(f&quot;WARNING: 'session' field not found and 'participant' is set to 'ignore', using default: {SESSION_NUMBER}&quot;)&amp;#10;        else:&amp;#10;            SESSION_NUMBER = 1&amp;#10;            print(f&quot;WARNING: 'session' field not found in dialog, using default: {SESSION_NUMBER}&quot;)&amp;#10;        &amp;#10;        # Get day&amp;#10;        if 'day' in exp_info_dict:&amp;#10;            DAY = int(exp_info_dict['day'])&amp;#10;        else:&amp;#10;            DAY = 1&amp;#10;            print(f&quot;WARNING: 'day' not found in dialog, using default: {DAY}&quot;)&amp;#10;        &amp;#10;        print(f&quot;Got session_number={SESSION_NUMBER} (from 'session' field) and day={DAY} from PsychoPy dialog&quot;)&amp;#10;    else:&amp;#10;        # No dialog info available - use defaults&amp;#10;        SESSION_NUMBER = 1&amp;#10;        DAY = 1&amp;#10;        print(f&quot;WARNING: Could not get session_number/day from dialog, using defaults: session_number={SESSION_NUMBER}, day={DAY}&quot;)&amp;#10;        print(f&quot;  Make sure to set 'participant' (or 'session_number') and 'day' fields in PsychoPy Builder &gt; Experiment Settings &gt; Basic &gt; Experiment info&quot;)&amp;#10;except Exception as e:&amp;#10;    # Fallback to defaults if anything goes wrong&amp;#10;    SESSION_NUMBER = 1&amp;#10;    DAY = 1&amp;#10;    print(f&quot;WARNING: Error getting session_number/day from dialog: {e}&quot;)&amp;#10;    print(f&quot;  Using defaults: session_number={SESSION_NUMBER}, day={DAY}&quot;)&amp;#10;    print(f&quot;  Make sure to set 'participant' (or 'session_number') and 'day' fields in PsychoPy Builder &gt; Experiment Settings &gt; Basic &gt; Experiment info&quot;)&amp;#10;&amp;#10;# Initialize data logger with session_number and day&amp;#10;data_logger = initialize_logger(session_number=SESSION_NUMBER, day=DAY, experiment_dir=&quot;data&quot;)&amp;#10;globals()['data_logger'] = data_logger&amp;#10;print(f&quot;Data logger initialized: session_number={SESSION_NUMBER}, day={DAY}&quot;)&amp;#10;&amp;#10;# Load timing configuration from text file&amp;#10;# Use simple defaults, config loading happens in individual routines to avoid os conflicts&amp;#10;TRIAL_TIMEOUT_SECONDS = 8.0&amp;#10;CROSSHAIR_RANDOM_VALUES = [2, 3, 4]&amp;#10;TIMEOUT_SCREEN_DURATION = 1.5  # Timeout screen duration (same across all blocks)&amp;#10;ACTUAL_POINTS_DURATION = 2.0&amp;#10;DECISION_TIMEOUT_DURATION = 4.0  # Maximum time for decision making (configurable)&amp;#10;&amp;#10;# Store decision timeout in globals for use in decision making routines&amp;#10;globals()['DECISION_TIMEOUT_DURATION'] = DECISION_TIMEOUT_DURATION&amp;#10;globals()['TIMEOUT_SCREEN_DURATION'] = TIMEOUT_SCREEN_DURATION&amp;#10;&amp;#10;# Try to load from config file (will be loaded in routines that need it)&amp;#10;print(f&quot;Using timing config: timeout={TRIAL_TIMEOUT_SECONDS}s, actualPoints={ACTUAL_POINTS_DURATION}s, decisionTimeout={DECISION_TIMEOUT_DURATION}s&quot;)&amp;#10;&amp;#10;image_dir = &quot;images/&quot;&amp;#10;all_fruits = [&quot;apple.png&quot;, &quot;banana.png&quot;, &quot;strawberry.png&quot;, &quot;kiwi.png&quot;, &quot;pear.png&quot;, &quot;grapes.png&quot;]&amp;#10;&amp;#10;# Create fruit name mapping (remove .png extension)&amp;#10;fruit_names = [f.replace('.png', '') for f in all_fruits]&amp;#10;&amp;#10;# Create numerical ID mapping (1-6 for each fruit)&amp;#10;# This will be used for decision making phase&amp;#10;fruit_to_num = {}&amp;#10;num_to_fruit = {}&amp;#10;for i, fruit in enumerate(fruit_names, 1):&amp;#10;    fruit_to_num[fruit] = i&amp;#10;    num_to_fruit[i] = fruit&amp;#10;&amp;#10;# Store globally for use in decision making&amp;#10;globals()['fruit_to_num'] = fruit_to_num&amp;#10;globals()['num_to_fruit'] = num_to_fruit&amp;#10;&amp;#10;# Day 2 counterbalancing: Load Day 1 data if day == 2&amp;#10;if DAY == 2:&amp;#10;    print(f&quot;\n{'='*60}&quot;)&amp;#10;    print(f&quot;DAY 2: Loading Day 1 data for counterbalancing&quot;)&amp;#10;    print(f&quot;{'='*60}&quot;)&amp;#10;    &amp;#10;    # Load Day 1 CSV files to get fruit assignments and block order&amp;#10;    # File pattern: sub-{session:03d}_day-1_block-{1,2}_learning_{1,2}_{block_name}.csv&amp;#10;    session_str = f&quot;{SESSION_NUMBER:03d}&quot;&amp;#10;    day1_gain_fruits = []&amp;#10;    day1_loss_fruits = []&amp;#10;    day1_gain_baselines = {}&amp;#10;    day1_loss_baselines = {}&amp;#10;    day1_first_block = None&amp;#10;    &amp;#10;    # Try to load both block files from Day 1&amp;#10;    # Search in multiple locations since Day 1 and Day 2 might be in different folders&amp;#10;    # Priority order:&amp;#10;    # 1. Current experiment folder: data/sub-1/ (relative to Day 2 experiment)&amp;#10;    # 2. Parent folder: ../data/sub-1/ (if Day 1 and Day 2 are siblings)&amp;#10;    # 3. Common Downloads location: ../../data/sub-1/ (if both in Downloads)&amp;#10;    # 4. Absolute path from expInfo if provided (day1_data_path field)&amp;#10;    &amp;#10;    # Get optional Day 1 data path from expInfo (if user specified it)&amp;#10;    day1_data_path = None&amp;#10;    try:&amp;#10;        exp_info_dict = None&amp;#10;        if 'thisExp' in locals() and hasattr(thisExp, 'info'):&amp;#10;            exp_info_dict = thisExp.info&amp;#10;        elif 'expInfo' in locals():&amp;#10;            exp_info_dict = expInfo&amp;#10;        if exp_info_dict and 'day1_data_path' in exp_info_dict:&amp;#10;            day1_data_path = str(exp_info_dict['day1_data_path']).strip()&amp;#10;            if day1_data_path:&amp;#10;                print(f&quot;Using custom Day 1 data path from dialog: {day1_data_path}&quot;)&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # List of paths to search (in priority order)&amp;#10;    search_paths = []&amp;#10;    if day1_data_path:&amp;#10;        # User-specified path takes highest priority&amp;#10;        search_paths.append(day1_data_path)&amp;#10;    # Add relative paths&amp;#10;    search_paths.extend([&amp;#10;        _join_path(&quot;data&quot;, &quot;sub-1&quot;),  # Current folder&amp;#10;        _join_path(&quot;..&quot;, &quot;data&quot;, &quot;sub-1&quot;),  # Parent folder (sibling experiments)&amp;#10;        _join_path(&quot;../..&quot;, &quot;data&quot;, &quot;sub-1&quot;),  # Two levels up (common Downloads folder)&amp;#10;        _join_path(&quot;..&quot;, &quot;..&quot;, &quot;data&quot;, &quot;sub-1&quot;),  # Alternative two levels up&amp;#10;    ])&amp;#10;    &amp;#10;    print(f&quot;Searching for Day 1 data files in {len(search_paths)} locations:&quot;)&amp;#10;    for i, path in enumerate(search_paths, 1):&amp;#10;        print(f&quot;  {i}. {path}&quot;)&amp;#10;    &amp;#10;    # Try to load both block files from Day 1&amp;#10;    for block_num in [1, 2]:&amp;#10;        file_found = False&amp;#10;        for block_name in [&quot;rewards&quot;, &quot;gain&quot;, &quot;punishment&quot;, &quot;loss&quot;]:&amp;#10;            filename = f&quot;sub-{session_str}_day-1_block-{block_num}_learning_{block_num}_{block_name}.csv&quot;&amp;#10;            &amp;#10;            # Try each search path&amp;#10;            for search_path in search_paths:&amp;#10;                filepath = _join_path(search_path, filename)&amp;#10;                &amp;#10;                try:&amp;#10;                    # Try to read the CSV file&amp;#10;                    with open(filepath, 'r', encoding='utf-8') as f:&amp;#10;                        reader = csv.DictReader(f)&amp;#10;                        rows = list(reader)&amp;#10;                        &amp;#10;                        if rows:&amp;#10;                            # Determine block type from block_name or first row&amp;#10;                            first_row = rows[0]&amp;#10;                            block_type = first_row.get('block_name', block_name).lower()&amp;#10;                            &amp;#10;                            # Track which block came first&amp;#10;                            if block_num == 1:&amp;#10;                                if block_type in [&quot;rewards&quot;, &quot;gain&quot;]:&amp;#10;                                    day1_first_block = &quot;gain&quot;&amp;#10;                                elif block_type in [&quot;punishment&quot;, &quot;loss&quot;]:&amp;#10;                                    day1_first_block = &quot;loss&quot;&amp;#10;                            &amp;#10;                            # Extract fruits and baselines from this block&amp;#10;                            # Collect all unique fruits and their baselines (use first occurrence for baseline)&amp;#10;                            for row in rows:&amp;#10;                                fruit_name = row.get('stimulus_identity', '').strip()&amp;#10;                                if not fruit_name:&amp;#10;                                    continue&amp;#10;                                &amp;#10;                                # Add .png extension if not present&amp;#10;                                if not fruit_name.endswith('.png'):&amp;#10;                                    fruit_name = fruit_name + '.png'&amp;#10;                                &amp;#10;                                baseline = float(row.get('stimulus_average_points', 0))&amp;#10;                                &amp;#10;                                if block_type in [&quot;rewards&quot;, &quot;gain&quot;]:&amp;#10;                                    if fruit_name not in day1_gain_fruits:&amp;#10;                                        day1_gain_fruits.append(fruit_name)&amp;#10;                                        day1_gain_baselines[fruit_name] = baseline&amp;#10;                                elif block_type in [&quot;punishment&quot;, &quot;loss&quot;]:&amp;#10;                                    if fruit_name not in day1_loss_fruits:&amp;#10;                                        day1_loss_fruits.append(fruit_name)&amp;#10;                                        day1_loss_baselines[fruit_name] = baseline&amp;#10;                            &amp;#10;                            print(f&quot;✓ Loaded Day 1 Block {block_num} ({block_type}): {len(rows)} trials from {filepath}&quot;)&amp;#10;                            file_found = True&amp;#10;                            break  # Found the file, move to next block&amp;#10;                except (FileNotFoundError, IOError, OSError) as e:&amp;#10;                    # File doesn't exist at this path - try next path&amp;#10;                    continue&amp;#10;            &amp;#10;            if file_found:&amp;#10;                break  # Found the file for this block, move to next block&amp;#10;    &amp;#10;    # Verify we got complete data (need 3 gain fruits and 3 loss fruits)&amp;#10;    gain_count = len(day1_gain_fruits) if day1_gain_fruits else 0&amp;#10;    loss_count = len(day1_loss_fruits) if day1_loss_fruits else 0&amp;#10;    print(f&quot;DEBUG: Validation check - gain_fruits count: {gain_count}, loss_fruits count: {loss_count}&quot;)&amp;#10;    &amp;#10;    # Check if we have complete data (exactly 3 fruits in each category)&amp;#10;    has_complete_data = (gain_count == 3 and loss_count == 3)&amp;#10;    &amp;#10;    if not has_complete_data:&amp;#10;        print(f&quot;\n{'='*60}&quot;)&amp;#10;        print(f&quot;ERROR: Could not load complete Day 1 data for session {SESSION_NUMBER}&quot;)&amp;#10;        print(f&quot;{'='*60}&quot;)&amp;#10;        print(f&quot;  Found {len(day1_gain_fruits)} gain fruits: {day1_gain_fruits}&quot;)&amp;#10;        print(f&quot;  Found {len(day1_loss_fruits)} loss fruits: {day1_loss_fruits}&quot;)&amp;#10;        print(f&quot;  Expected 3 of each (need complete Day 1 data)&quot;)&amp;#10;        print(f&quot;  Expected files: sub-{session_str}_day-1_block-1_learning_*.csv and block-2_learning_*.csv&quot;)&amp;#10;        print(f&quot;  Searched in {len(search_paths)} locations:&quot;)&amp;#10;        for i, path in enumerate(search_paths, 1):&amp;#10;            print(f&quot;    {i}. {path}&quot;)&amp;#10;        print(f&quot;\n  Day 2 REQUIRES Day 1 data to run.&quot;)&amp;#10;        print(f&quot;  Please ensure:&quot;)&amp;#10;        print(f&quot;    1. Day 1 experiment completed successfully&quot;)&amp;#10;        print(f&quot;    2. Day 1 CSV files are in data/sub-1/ folder&quot;)&amp;#10;        print(f&quot;    3. Session number matches Day 1 (session={SESSION_NUMBER})&quot;)&amp;#10;        print(f&quot;{'='*60}\n&quot;)&amp;#10;        &amp;#10;        # Exit the experiment - Day 2 cannot run without Day 1 data&amp;#10;        print(&quot;EXITING EXPERIMENT: Day 2 requires Day 1 data.&quot;)&amp;#10;        if 'thisExp' in locals():&amp;#10;            thisExp.abort()  # Abort the experiment&amp;#10;        # Also try to close the window if possible&amp;#10;        try:&amp;#10;            if 'win' in locals():&amp;#10;                win.close()&amp;#10;        except:&amp;#10;            pass&amp;#10;        # Exit Python&amp;#10;        import sys&amp;#10;        sys.exit(1)&amp;#10;    else:&amp;#10;        print(f&quot;Day 1 data loaded successfully:&quot;)&amp;#10;        print(f&quot;  Gain fruits: {day1_gain_fruits} with baselines: {[day1_gain_baselines[f] for f in day1_gain_fruits]}&quot;)&amp;#10;        print(f&quot;  Loss fruits: {day1_loss_fruits} with baselines: {[day1_loss_baselines[f] for f in day1_loss_fruits]}&quot;)&amp;#10;        print(f&quot;  First block: {day1_first_block}&quot;)&amp;#10;        &amp;#10;        # Counterbalance Day 2 based on session ID (participant assignment):&amp;#10;        # Row 1 (session 1, 5, 9, 13, ...): Day 1 = gain/loss, Day 2 = gain/loss&amp;#10;        # Row 2 (session 2, 6, 10, 14, ...): Day 1 = gain/loss, Day 2 = loss/gain&amp;#10;        # Row 3 (session 3, 7, 11, 15, ...): Day 1 = loss/gain, Day 2 = gain/loss&amp;#10;        # Row 4 (session 4, 8, 12, 16, ...): Day 1 = loss/gain, Day 2 = loss/gain&amp;#10;        # Determine row: row = ((session_id - 1) % 4) + 1&amp;#10;        row = ((SESSION_NUMBER - 1) % 4) + 1&amp;#10;        print(f&quot;  Participant row assignment: Row {row} (session {SESSION_NUMBER})&quot;)&amp;#10;        &amp;#10;        # Day 2 first block determined directly by row:&amp;#10;        # Row 1 or 3: gain first&amp;#10;        # Row 2 or 4: loss first&amp;#10;        if row == 1 or row == 3:&amp;#10;            # Row 1 or 3: gain first&amp;#10;            day2_first_block = &quot;gain&quot;&amp;#10;            print(f&quot;  Row {row}: Day 2 first block = gain&quot;)&amp;#10;        else:  # row == 2 or row == 4&amp;#10;            # Row 2 or 4: loss first&amp;#10;            day2_first_block = &quot;loss&quot;&amp;#10;            print(f&quot;  Row {row}: Day 2 first block = loss&quot;)&amp;#10;        &amp;#10;        # Fruits stay in the same category (gains stay gains, losses stay losses)&amp;#10;        # Only shift values: 20→50, 50→80, 80→20 (and -20→-50, -50→-80, -80→-20)&amp;#10;        # This is a mapping, not a circular shift&amp;#10;        &amp;#10;        # Get Day 1 baselines in order&amp;#10;        day1_gain_vals = [day1_gain_baselines[f] for f in day1_gain_fruits]&amp;#10;        day1_loss_vals = [day1_loss_baselines[f] for f in day1_loss_fruits]&amp;#10;        &amp;#10;        # Value mapping function: shifts magnitude only (20→50, 50→80, 80→20)&amp;#10;        # Fruits stay in the same category (gains stay gains, losses stay losses)&amp;#10;        # Only the values shift within each category&amp;#10;        def shift_value(val):&amp;#10;            &quot;&quot;&quot;Shift value: 20→50, 50→80, 80→20 (preserves sign)&quot;&quot;&quot;&amp;#10;            abs_val = abs(val)&amp;#10;            if abs_val == 20:&amp;#10;                shifted = 50&amp;#10;            elif abs_val == 50:&amp;#10;                shifted = 80&amp;#10;            elif abs_val == 80:&amp;#10;                shifted = 20&amp;#10;            else:&amp;#10;                # Fallback: return original value if not in expected set&amp;#10;                print(f&quot;WARNING: Unexpected value {val} in Day 2 shift, returning original&quot;)&amp;#10;                return val&amp;#10;            &amp;#10;            # Preserve the sign (positive stays positive, negative stays negative)&amp;#10;            return shifted if val &gt; 0 else -shifted&amp;#10;        &amp;#10;        # Apply value shift to Day 1 values&amp;#10;        # Day 1 gains stay gains, just shift values: apple: 20→50, banana: 50→80, strawberry: 80→20&amp;#10;        day2_gain_vals = [shift_value(val) for val in day1_gain_vals]&amp;#10;        # Day 1 losses stay losses, just shift values: kiwi: -20→-50, pear: -50→-80, grapes: -80→-20&amp;#10;        day2_loss_vals = [shift_value(val) for val in day1_loss_vals]&amp;#10;        &amp;#10;        print(f&quot;DEBUG: Day 1 gain values {day1_gain_vals} → Day 2 gain values {day2_gain_vals}&quot;)&amp;#10;        print(f&quot;DEBUG: Day 1 loss values {day1_loss_vals} → Day 2 loss values {day2_loss_vals}&quot;)&amp;#10;        &amp;#10;        # Assign fruits: Day 1 gains stay gains, Day 1 losses stay losses (same fruits, shifted values)&amp;#10;        gain_fruits = day1_gain_fruits.copy()&amp;#10;        loss_fruits = day1_loss_fruits.copy()&amp;#10;        &amp;#10;        # Create baseline lists with shifted values (matching fruit order)&amp;#10;        gain_baselines = day2_gain_vals&amp;#10;        loss_baselines = day2_loss_vals&amp;#10;        &amp;#10;        print(f&quot;Day 2 assignments (same fruits, shifted values):&quot;)&amp;#10;        print(f&quot;  Gain fruits: {gain_fruits} with baselines: {gain_baselines}&quot;)&amp;#10;        print(f&quot;  Loss fruits: {loss_fruits} with baselines: {loss_baselines}&quot;)&amp;#10;        print(f&quot;{'='*60}\n&quot;)&amp;#10;        &amp;#10;        # Store day2_first_block for use in block order determination&amp;#10;        globals()['day2_first_block'] = day2_first_block&amp;#10;        print(f&quot;DEBUG: Stored day2_first_block = '{day2_first_block}' in globals&quot;)&amp;#10;else:&amp;#10;    # Day 1: Random assignment&amp;#10;    random.shuffle(all_fruits)&amp;#10;    gain_fruits = all_fruits[:3]&amp;#10;    loss_fruits = all_fruits[3:]&amp;#10;    &amp;#10;    # Randomly assign baseline values to each fruit&amp;#10;    gain_baselines = random.sample([20, 50, 80], 3)&amp;#10;    loss_baselines = random.sample([-20, -50, -80], 3)&amp;#10;    &amp;#10;    print(f&quot;Day 1: Random assignment&quot;)&amp;#10;    print(f&quot;Gain fruits: {gain_fruits} with baselines: {gain_baselines}&quot;)&amp;#10;    print(f&quot;Loss fruits: {loss_fruits} with baselines: {loss_baselines}&quot;)&amp;#10;&amp;#10;def make_values(base):&amp;#10;    # Create 10 unique values: [base]*4 + [base+5]*2 + [base-5]*2 + [base+10, base-10]&amp;#10;    values = [base]*4 + [base+5]*2 + [base-5]*2 + [base+10, base-10]&amp;#10;    # Shuffle them once&amp;#10;    random.shuffle(values)&amp;#10;    # Double the list to get 20 presentations per fruit&amp;#10;    return values * 2&amp;#10;&amp;#10;gain_block, loss_block = [], []&amp;#10;&amp;#10;for fruit, base in zip(gain_fruits, gain_baselines):&amp;#10;    values = make_values(base)  # This gives 20 values per fruit&amp;#10;    for val in values:&amp;#10;        gain_block.append({&quot;block&quot;:&quot;gain&quot;, &quot;fruit&quot;:image_dir+fruit, &quot;baseline&quot;:base, &quot;true_value&quot;:val})&amp;#10;&amp;#10;for fruit, base in zip(loss_fruits, loss_baselines):&amp;#10;    values = make_values(base)  # This gives 20 values per fruit&amp;#10;    for val in values:&amp;#10;        loss_block.append({&quot;block&quot;:&quot;loss&quot;, &quot;fruit&quot;:image_dir+fruit, &quot;baseline&quot;:base, &quot;true_value&quot;:val})&amp;#10;&amp;#10;# Shuffle each block to randomize trial order&amp;#10;random.shuffle(gain_block)&amp;#10;random.shuffle(loss_block)&amp;#10;&amp;#10;# Trial count is determined by loop nReps in PsychoPy Builder&amp;#10;# The loop nReps should be set to total number of trials (e.g., 60)&amp;#10;# We'll use the first nReps/2 trials from each block&amp;#10;# Full blocks have 60 trials each (3 fruits × 20 presentations)&amp;#10;# For 60 total trials: use first 30 from gain_block and first 30 from loss_block&amp;#10;&amp;#10;# Don't limit here - the loop nReps will control how many trials run&amp;#10;# We'll use all available trials, and the loop will stop when nReps is reached&amp;#10;print(f&quot;Full gain block: {len(gain_block)} trials available&quot;)&amp;#10;print(f&quot;Full loss block: {len(loss_block)} trials available&quot;)&amp;#10;print(f&quot;NOTE: Set loop nReps to total trials (e.g., 60 for 30 gain + 30 loss)&quot;)&amp;#10;print(f&quot;      The code will use first nReps/2 from each block&quot;)&amp;#10;&amp;#10;# Decide which block comes first&amp;#10;if DAY == 2:&amp;#10;    # Use the counterbalanced block order from Day 2 setup&amp;#10;    day2_first_block = globals().get('day2_first_block', None)&amp;#10;    print(f&quot;DEBUG: Retrieved day2_first_block from globals = '{day2_first_block}'&quot;)&amp;#10;    print(f&quot;DEBUG: SESSION_NUMBER = {SESSION_NUMBER}, DAY = {DAY}&quot;)&amp;#10;    &amp;#10;    if day2_first_block:&amp;#10;        first_block = day2_first_block&amp;#10;        second_block = &quot;loss&quot; if day2_first_block == &quot;gain&quot; else &quot;gain&quot;&amp;#10;        print(f&quot;Day 2 block order: {first_block} first, then {second_block} (counterbalanced by session ID)&quot;)&amp;#10;        print(f&quot;DEBUG: first_block = '{first_block}', second_block = '{second_block}'&quot;)&amp;#10;    else:&amp;#10;        # Fallback if day2_first_block wasn't set - this should not happen!&amp;#10;        print(f&quot;ERROR: day2_first_block is None! This should not happen for Day 2.&quot;)&amp;#10;        print(f&quot;ERROR: Falling back to random assignment (this is wrong!)&quot;)&amp;#10;        # Recalculate based on session ID as fallback&amp;#10;        row = ((SESSION_NUMBER - 1) % 4) + 1&amp;#10;        if row == 1 or row == 3:&amp;#10;            first_block = &quot;gain&quot;&amp;#10;            second_block = &quot;loss&quot;&amp;#10;        else:&amp;#10;            first_block = &quot;loss&quot;&amp;#10;            second_block = &quot;gain&quot;&amp;#10;        print(f&quot;ERROR FALLBACK: Row {row}, Day 2 block order: {first_block} first, then {second_block}&quot;)&amp;#10;else:&amp;#10;    # Day 1: Counterbalance block order based on session ID (participant assignment):&amp;#10;    # Row 1 (session 1, 5, 9, 13, ...): Day 1 = gain/loss&amp;#10;    # Row 2 (session 2, 6, 10, 14, ...): Day 1 = gain/loss&amp;#10;    # Row 3 (session 3, 7, 11, 15, ...): Day 1 = loss/gain&amp;#10;    # Row 4 (session 4, 8, 12, 16, ...): Day 1 = loss/gain&amp;#10;    # Determine row: row = ((session_id - 1) % 4) + 1&amp;#10;    row = ((SESSION_NUMBER - 1) % 4) + 1&amp;#10;    print(f&quot;  Participant row assignment: Row {row} (session {SESSION_NUMBER})&quot;)&amp;#10;    &amp;#10;    if row == 1 or row == 2:&amp;#10;        # Row 1 or 2: gain first&amp;#10;        first_block = &quot;gain&quot;&amp;#10;        second_block = &quot;loss&quot;&amp;#10;        print(f&quot;  Row {row}: Day 1 block order = gain/loss&quot;)&amp;#10;    else:  # row == 3 or row == 4&amp;#10;        # Row 3 or 4: loss first&amp;#10;        first_block = &quot;loss&quot;&amp;#10;        second_block = &quot;gain&quot;&amp;#10;        print(f&quot;  Row {row}: Day 1 block order = loss/gain&quot;)&amp;#10;    &amp;#10;    print(f&quot;Day 1 block order: {first_block} first, then {second_block} (counterbalanced by session ID)&quot;)&amp;#10;&amp;#10;# Note: Trial count per block will be determined by loop nReps / 2&amp;#10;# For now, we'll use all available trials and let the loop control it&amp;#10;# The combined block will be truncated by the loop's nReps&amp;#10;&amp;#10;print(f&quot;Block order: {first_block} first, then {second_block}&quot;)&amp;#10;print(f&quot;DEBUG: Creating combined block with first_block='{first_block}', second_block='{second_block}'&quot;)&amp;#10;print(f&quot;DEBUG: gain_block has {len(gain_block)} trials, loss_block has {len(loss_block)} trials&quot;)&amp;#10;if len(gain_block) &gt; 0:&amp;#10;    print(f&quot;DEBUG: First gain trial: {gain_block[0].get('fruit', 'unknown')}, block type: {gain_block[0].get('block', 'unknown')}&quot;)&amp;#10;if len(loss_block) &gt; 0:&amp;#10;    print(f&quot;DEBUG: First loss trial: {loss_block[0].get('fruit', 'unknown')}, block type: {loss_block[0].get('block', 'unknown')}&quot;)&amp;#10;&amp;#10;# Create combined block list in the correct order&amp;#10;# IMPORTANT: This ensures all trials from first block appear first, then all from second block&amp;#10;# We'll create the full combined block, but trialBeginRoutine will limit based on nReps&amp;#10;combined_learning_block = []&amp;#10;if first_block == &quot;gain&quot;:&amp;#10;    # First block: all gain trials, then all loss trials&amp;#10;    combined_learning_block = gain_block.copy() + loss_block.copy()&amp;#10;    print(f&quot;Combined block: {len(gain_block)} gains + {len(loss_block)} losses = {len(combined_learning_block)} total&quot;)&amp;#10;    print(f&quot;DEBUG: First {len(gain_block)} trials are GAIN, next {len(loss_block)} trials are LOSS&quot;)&amp;#10;    if len(combined_learning_block) &gt; 0:&amp;#10;        first_trial = combined_learning_block[0]&amp;#10;        print(f&quot;DEBUG: First trial - fruit: {first_trial.get('fruit', 'unknown')}, block type: {first_trial.get('block', 'unknown')}, expected: 'gain'&quot;)&amp;#10;        if first_trial.get('block', 'unknown') != 'gain':&amp;#10;            print(f&quot;ERROR: First trial block type is '{first_trial.get('block', 'unknown')}' but should be 'gain'!&quot;)&amp;#10;else:&amp;#10;    # First block: all loss trials, then all gain trials&amp;#10;    combined_learning_block = loss_block.copy() + gain_block.copy()&amp;#10;    print(f&quot;Combined block: {len(loss_block)} losses + {len(gain_block)} gains = {len(combined_learning_block)} total&quot;)&amp;#10;    print(f&quot;DEBUG: First {len(loss_block)} trials are LOSS, next {len(gain_block)} trials are GAIN&quot;)&amp;#10;    if len(combined_learning_block) &gt; 0:&amp;#10;        first_trial = combined_learning_block[0]&amp;#10;        print(f&quot;DEBUG: First trial - fruit: {first_trial.get('fruit', 'unknown')}, block type: {first_trial.get('block', 'unknown')}, expected: 'loss'&quot;)&amp;#10;        if first_trial.get('block', 'unknown') != 'loss':&amp;#10;            print(f&quot;ERROR: First trial block type is '{first_trial.get('block', 'unknown')}' but should be 'loss'!&quot;)&amp;#10;&amp;#10;# Explicitly store in globals to ensure it's accessible in other routines&amp;#10;globals()['combined_learning_block'] = combined_learning_block&amp;#10;globals()['first_block'] = first_block  # Store for debugging&amp;#10;globals()['second_block'] = second_block  # Store for debugging&amp;#10;&amp;#10;# Final verification&amp;#10;print(f&quot;DEBUG FINAL: Stored first_block='{first_block}', second_block='{second_block}' in globals&quot;)&amp;#10;print(f&quot;DEBUG FINAL: Combined block has {len(combined_learning_block)} trials&quot;)&amp;#10;if len(combined_learning_block) &gt; 0:&amp;#10;    actual_first = combined_learning_block[0].get('block', 'unknown')&amp;#10;    print(f&quot;DEBUG FINAL: Actual first trial block type = '{actual_first}', expected = '{first_block}'&quot;)&amp;#10;    if actual_first != first_block:&amp;#10;        print(f&quot;ERROR: MISMATCH! First trial is '{actual_first}' but should be '{first_block}'!&quot;)&amp;#10;globals()['gain_block'] = gain_block&amp;#10;globals()['loss_block'] = loss_block&amp;#10;&amp;#10;learning_block_index = -1&amp;#10;# Store in globals to ensure it persists&amp;#10;globals()['learning_block_index'] = learning_block_index&amp;#10;show_block_transition = False  # Flag to trigger transition screen between blocks&amp;#10;globals()['show_block_transition'] = show_block_transition&amp;#10;ready_for_block2_setup = False  # Flag to indicate block transition completed, ready for block 2 setup&amp;#10;globals()['ready_for_block2_setup'] = ready_for_block2_setup&amp;#10;ready_for_scanner_sync_block2 = False  # Flag to indicate taskStartSoonBlock2 completed, ready for scanner sync&amp;#10;globals()['ready_for_scanner_sync_block2'] = ready_for_scanner_sync_block2&amp;#10;block2_setup_complete = False  # Flag to indicate block 2 setup (taskStartSoon + scannerSync) has already been done&amp;#10;globals()['block2_setup_complete'] = block2_setup_complete&amp;#10;crosshair2Block2_actually_ran = False  # Flag to track if crosshair2Block2 actually ran (not skipped)&amp;#10;globals()['crosshair2Block2_actually_ran'] = crosshair2Block2_actually_ran&amp;#10;block1_scanner_sync_complete = False  # Flag to indicate Block 1 scanner sync has already been completed&amp;#10;globals()['block1_scanner_sync_complete'] = block1_scanner_sync_complete&amp;#10;print(f&quot;Combined learning block has {len(combined_learning_block)} trials&quot;)&amp;#10;&amp;#10;gain_index = -1&amp;#10;loss_index = -1&amp;#10;fruitFile = image_dir + &quot;blank.png&quot;&amp;#10;trueVal = 0&amp;#10;trueValStr = &quot;&quot;&amp;#10;blockType = &quot;&quot;&amp;#10;baselineR = 0&amp;#10;&amp;#10;&amp;#10;print(&quot;Gain trials:&quot;, len(gain_block), &quot;| Loss trials:&quot;, len(loss_block))&amp;#10;&amp;#10;# --- Initialize decision placeholders (prevents undefined variable error) ---&amp;#10;leftFile = &quot;images/blank.png&quot;&amp;#10;rightFile = &quot;images/blank.png&quot;&amp;#10;&amp;#10;# --- Decision pairs setup ---&amp;#10;# Create fruit values dictionary based on randomized assignments&amp;#10;fruit_values = {}&amp;#10;for fruit, baseline in zip(gain_fruits, gain_baselines):&amp;#10;    fruit_values[image_dir + fruit] = baseline&amp;#10;for fruit, baseline in zip(loss_fruits, loss_baselines):&amp;#10;    fruit_values[image_dir + fruit] = baseline&amp;#10;&amp;#10;# Create all unique pairs (15 pairs from 6 fruits: C(6,2) = 15)&amp;#10;all_fruit_paths = [image_dir + fruit for fruit in all_fruits]&amp;#10;decision_pairs = []&amp;#10;for i in range(len(all_fruit_paths)):&amp;#10;    for j in range(i + 1, len(all_fruit_paths)):&amp;#10;        decision_pairs.append((all_fruit_paths[i], all_fruit_paths[j]))&amp;#10;&amp;#10;print(f&quot;Created {len(decision_pairs)} unique pairs&quot;)&amp;#10;&amp;#10;# Build list of decision trials with counterbalancing (4 repetitions per pair = 60 total)&amp;#10;# Counterbalancing ensures 4 conditions per fruit pair:&amp;#10;# 1. First fruit1 on left, then fruit2 on right, final: fruit1 left, fruit2 right&amp;#10;# 2. First fruit2 on right, then fruit1 on left, final: fruit1 left, fruit2 right&amp;#10;# 3. First fruit1 on left, then fruit2 on right, final: fruit2 left, fruit1 right&amp;#10;# 4. First fruit2 on right, then fruit1 on left, final: fruit2 left, fruit1 right&amp;#10;# This counterbalances: which fruit appears first, which side first appears on, and final positions&amp;#10;# Result: 30 left-first, 30 right-first (2 left + 2 right per pair × 15 pairs = 30 each)&amp;#10;&amp;#10;decision_block = []&amp;#10;for fruit1, fruit2 in decision_pairs:&amp;#10;    left_val = fruit_values[fruit1]&amp;#10;    right_val = fruit_values[fruit2]&amp;#10;    correct_side = &quot;left&quot; if left_val &gt; right_val else &quot;right&quot;&amp;#10;    &amp;#10;    # Condition 1: First fruit1 on left, then fruit2 on right, final: fruit1 left, fruit2 right&amp;#10;    decision_block.append({&amp;#10;        &quot;leftFruit&quot;: fruit1,&amp;#10;        &quot;rightFruit&quot;: fruit2,&amp;#10;        &quot;firstFruit&quot;: fruit1,  # fruit1 appears first&amp;#10;        &quot;firstSide&quot;: &quot;left&quot;,   # on left side&amp;#10;        &quot;secondFruit&quot;: fruit2,  # fruit2 appears second&amp;#10;        &quot;secondSide&quot;: &quot;right&quot;,  # on right side&amp;#10;        &quot;leftVal&quot;: left_val,&amp;#10;        &quot;rightVal&quot;: right_val,&amp;#10;        &quot;correct&quot;: correct_side&amp;#10;    })&amp;#10;    &amp;#10;    # Condition 2: First fruit2 on right, then fruit1 on left, final: fruit1 left, fruit2 right&amp;#10;    decision_block.append({&amp;#10;        &quot;leftFruit&quot;: fruit1,&amp;#10;        &quot;rightFruit&quot;: fruit2,&amp;#10;        &quot;firstFruit&quot;: fruit2,  # fruit2 appears first&amp;#10;        &quot;firstSide&quot;: &quot;right&quot;,  # on right side&amp;#10;        &quot;secondFruit&quot;: fruit1,  # fruit1 appears second&amp;#10;        &quot;secondSide&quot;: &quot;left&quot;,   # on left side&amp;#10;        &quot;leftVal&quot;: left_val,&amp;#10;        &quot;rightVal&quot;: right_val,&amp;#10;        &quot;correct&quot;: correct_side&amp;#10;    })&amp;#10;    &amp;#10;    # Condition 3: First fruit1 on left, then fruit2 on right, final: fruit2 left, fruit1 right&amp;#10;    decision_block.append({&amp;#10;        &quot;leftFruit&quot;: fruit2,&amp;#10;        &quot;rightFruit&quot;: fruit1,&amp;#10;        &quot;firstFruit&quot;: fruit1,  # fruit1 appears first&amp;#10;        &quot;firstSide&quot;: &quot;left&quot;,   # on left side&amp;#10;        &quot;secondFruit&quot;: fruit2,  # fruit2 appears second&amp;#10;        &quot;secondSide&quot;: &quot;right&quot;,  # on right side&amp;#10;        &quot;leftVal&quot;: right_val,&amp;#10;        &quot;rightVal&quot;: left_val,&amp;#10;        &quot;correct&quot;: &quot;right&quot; if correct_side == &quot;left&quot; else &quot;left&quot;&amp;#10;    })&amp;#10;    &amp;#10;    # Condition 4: First fruit2 on right, then fruit1 on left, final: fruit2 left, fruit1 right&amp;#10;    decision_block.append({&amp;#10;        &quot;leftFruit&quot;: fruit2,&amp;#10;        &quot;rightFruit&quot;: fruit1,&amp;#10;        &quot;firstFruit&quot;: fruit2,  # fruit2 appears first&amp;#10;        &quot;firstSide&quot;: &quot;right&quot;,  # on right side&amp;#10;        &quot;secondFruit&quot;: fruit1,  # fruit1 appears second&amp;#10;        &quot;secondSide&quot;: &quot;left&quot;,   # on left side&amp;#10;        &quot;leftVal&quot;: right_val,&amp;#10;        &quot;rightVal&quot;: left_val,&amp;#10;        &quot;correct&quot;: &quot;right&quot; if correct_side == &quot;left&quot; else &quot;left&quot;&amp;#10;    })&amp;#10;&amp;#10;# Verify counterbalancing: should have 30 left-first and 30 right-first&amp;#10;left_first_count = sum(1 for trial in decision_block if trial[&quot;firstSide&quot;] == &quot;left&quot;)&amp;#10;right_first_count = sum(1 for trial in decision_block if trial[&quot;firstSide&quot;] == &quot;right&quot;)&amp;#10;print(f&quot;Counterbalancing check (before shuffle): {left_first_count} left-first, {right_first_count} right-first (should be 30 each)&quot;)&amp;#10;&amp;#10;# Shuffle all trials to randomize order&amp;#10;random.shuffle(decision_block)&amp;#10;&amp;#10;# Verify randomization: show first 10 trials to confirm pattern&amp;#10;print(&quot;Randomization check (first 10 trials after shuffle):&quot;)&amp;#10;for i in range(min(10, len(decision_block))):&amp;#10;    trial = decision_block[i]&amp;#10;    first_side = trial[&quot;firstSide&quot;]&amp;#10;    first_fruit = trial[&quot;firstFruit&quot;].replace(&quot;images/&quot;, &quot;&quot;).replace(&quot;.png&quot;, &quot;&quot;)&amp;#10;    second_fruit = trial[&quot;secondFruit&quot;].replace(&quot;images/&quot;, &quot;&quot;).replace(&quot;.png&quot;, &quot;&quot;)&amp;#10;    left_fruit = trial[&quot;leftFruit&quot;].replace(&quot;images/&quot;, &quot;&quot;).replace(&quot;.png&quot;, &quot;&quot;)&amp;#10;    right_fruit = trial[&quot;rightFruit&quot;].replace(&quot;images/&quot;, &quot;&quot;).replace(&quot;.png&quot;, &quot;&quot;)&amp;#10;    print(f&quot;  Trial {i+1}: First {first_fruit} on {first_side}, then {second_fruit} on {trial['secondSide']}, final: {left_fruit} left, {right_fruit} right&quot;)&amp;#10;&amp;#10;# Final verification after shuffle&amp;#10;left_first_count_after = sum(1 for trial in decision_block if trial[&quot;firstSide&quot;] == &quot;left&quot;)&amp;#10;right_first_count_after = sum(1 for trial in decision_block if trial[&quot;firstSide&quot;] == &quot;right&quot;)&amp;#10;print(f&quot;Counterbalancing check (after shuffle): {left_first_count_after} left-first, {right_first_count_after} right-first (should still be 30 each)&quot;)&amp;#10;&amp;#10;decision_index = 0&amp;#10;# Store in globals to ensure it persists across routines&amp;#10;globals()['decision_index'] = decision_index&amp;#10;globals()['decision_block'] = decision_block&amp;#10;print(f&quot;Decision trials: {len(decision_block)} (should be 60)&quot;)&amp;#10;&amp;#10;# --- Create practice block for Block 1 (3 practice trials) ---&amp;#10;# Practice trials use static images: dog, cat, rabbit (always in this order)&amp;#10;# These are shorter trials to familiarize participants with the task&amp;#10;# Practice trials should match the first block type (gain or loss)&amp;#10;practice_block = []&amp;#10;# Static practice images (always the same)&amp;#10;practice_fruit_names = [&quot;dog.png&quot;, &quot;cat.png&quot;, &quot;rabbit.png&quot;]&amp;#10;&amp;#10;# Determine practice values based on first_block type&amp;#10;# If first_block is &quot;gain&quot;, all values should be positive&amp;#10;# If first_block is &quot;loss&quot;, all values should be negative&amp;#10;if first_block == &quot;gain&quot;:&amp;#10;    # Positive values for reward block: 30, 50, 10&amp;#10;    practice_values = [30, 50, 10]  # All positive&amp;#10;    practice_baselines = [50, 50, 50]  # All positive baselines&amp;#10;    practice_block_type = &quot;gain&quot;&amp;#10;else:&amp;#10;    # Negative values for punishment block: -30, -50, -10&amp;#10;    practice_values = [-30, -50, -10]  # All negative&amp;#10;    practice_baselines = [-50, -50, -50]  # All negative baselines&amp;#10;    practice_block_type = &quot;loss&quot;&amp;#10;&amp;#10;for i, image_name in enumerate(practice_fruit_names):&amp;#10;    baseline = practice_baselines[i]&amp;#10;    practice_value = practice_values[i]&amp;#10;    &amp;#10;    # Create practice trial with static value matching first block type&amp;#10;    practice_block.append({&amp;#10;        &quot;block&quot;: practice_block_type,&amp;#10;        &quot;fruit&quot;: image_dir + image_name,&amp;#10;        &quot;baseline&quot;: baseline,&amp;#10;        &quot;true_value&quot;: practice_value&amp;#10;    })&amp;#10;    print(f&quot;Practice trial {i+1} (Block 1, {first_block}): {image_name} with value {practice_value:+d} (baseline: {baseline:+d})&quot;)&amp;#10;&amp;#10;# Do NOT shuffle practice trials - keep them in order: dog, cat, rabbit&amp;#10;&amp;#10;practice_block_index = -1&amp;#10;# Store in globals&amp;#10;globals()['practice_block'] = practice_block&amp;#10;globals()['practice_block_index'] = practice_block_index&amp;#10;print(f&quot;Practice learning trials for Block 1 ({first_block}): {len(practice_block)} (3 trials)&quot;)&amp;#10;&amp;#10;# --- Create practice decision block (3 practice trials) ---&amp;#10;# Practice decision trials with dollar amounts: $5/$1, $10/$1, $10/$5&amp;#10;# Structure matches decision-making practice run:&amp;#10;# Trial 1: $5 left (2s), crosshair (1s), $1 right (2s), crosshair (1s), both (2s), crosshair (2s)&amp;#10;# Trial 2: $10 right (2s), crosshair (1s), $1 left (2s), crosshair (1s), both (2s), crosshair (2s)&amp;#10;# Trial 3: $10 left (2s), crosshair (1s), $5 right (2s), crosshair (1s), both (2s), crosshair (2s)&amp;#10;practice_decision_block = []&amp;#10;&amp;#10;# Practice dollar values&amp;#10;practice_dollar_values = {&amp;#10;    &quot;$5&quot;: 5,&amp;#10;    &quot;$1&quot;: 1,&amp;#10;    &quot;$10&quot;: 10&amp;#10;}&amp;#10;&amp;#10;# Practice decision trials (3 trials with specific structure):&amp;#10;# Trial 1: $5 left, $1 right (correct: left, $5 &gt; $1)&amp;#10;# Trial 2: $1 left, $10 right (correct: right, $10 &gt; $1)&amp;#10;# Trial 3: $10 left, $5 right (correct: left, $10 &gt; $5)&amp;#10;practice_decision_trials = [&amp;#10;    {&amp;#10;        &quot;leftDollar&quot;: &quot;$5&quot;,&amp;#10;        &quot;rightDollar&quot;: &quot;$1&quot;,&amp;#10;        &quot;firstDollar&quot;: &quot;$5&quot;,&amp;#10;        &quot;firstSide&quot;: &quot;left&quot;,      # $5 appears first on left&amp;#10;        &quot;secondDollar&quot;: &quot;$1&quot;,&amp;#10;        &quot;secondSide&quot;: &quot;right&quot;,   # $1 appears second on right&amp;#10;        &quot;leftVal&quot;: 5,&amp;#10;        &quot;rightVal&quot;: 1,&amp;#10;        &quot;correct&quot;: &quot;left&quot;&amp;#10;    },&amp;#10;    {&amp;#10;        &quot;leftDollar&quot;: &quot;$1&quot;,&amp;#10;        &quot;rightDollar&quot;: &quot;$10&quot;,&amp;#10;        &quot;firstDollar&quot;: &quot;$10&quot;,&amp;#10;        &quot;firstSide&quot;: &quot;right&quot;,    # $10 appears first on right&amp;#10;        &quot;secondDollar&quot;: &quot;$1&quot;,&amp;#10;        &quot;secondSide&quot;: &quot;left&quot;,    # $1 appears second on left&amp;#10;        &quot;leftVal&quot;: 1,&amp;#10;        &quot;rightVal&quot;: 10,&amp;#10;        &quot;correct&quot;: &quot;right&quot;&amp;#10;    },&amp;#10;    {&amp;#10;        &quot;leftDollar&quot;: &quot;$10&quot;,&amp;#10;        &quot;rightDollar&quot;: &quot;$5&quot;,&amp;#10;        &quot;firstDollar&quot;: &quot;$10&quot;,&amp;#10;        &quot;firstSide&quot;: &quot;left&quot;,     # $10 appears first on left&amp;#10;        &quot;secondDollar&quot;: &quot;$5&quot;,&amp;#10;        &quot;secondSide&quot;: &quot;right&quot;,   # $5 appears second on right&amp;#10;        &quot;leftVal&quot;: 10,&amp;#10;        &quot;rightVal&quot;: 5,&amp;#10;        &quot;correct&quot;: &quot;left&quot;&amp;#10;    }&amp;#10;]&amp;#10;&amp;#10;for trial in practice_decision_trials:&amp;#10;    practice_decision_block.append(trial)&amp;#10;    print(f&quot;Practice decision trial: {trial['leftDollar']} vs {trial['rightDollar']} (left={trial['leftVal']}, right={trial['rightVal']}, correct={trial['correct']}, first={trial['firstDollar']} on {trial['firstSide']})&quot;)&amp;#10;&amp;#10;# Do NOT shuffle practice decision trials - keep them in order: rabbit/dog, dog/cat, rabbit/cat&amp;#10;&amp;#10;practice_decision_index = -1&amp;#10;# Store in globals&amp;#10;globals()['practice_decision_block'] = practice_decision_block&amp;#10;globals()['practice_decision_index'] = practice_decision_index&amp;#10;print(f&quot;Practice decision trials: {len(practice_decision_block)} (3 trials)&quot;)&amp;#10;print(f&quot;DEBUG: Stored practice_decision_block in globals with {len(practice_decision_block)} trials&quot;)&amp;#10;print(f&quot;DEBUG: First trial: {practice_decision_block[0] if practice_decision_block else 'EMPTY'}&quot;)&amp;#10;&amp;#10;# Initialize ITI duration variables (will be set during trials)&amp;#10;iti1_duration = 2.0  # Default&amp;#10;iti2_duration = 2.0  # Default&amp;#10;iti3_duration = 2.0  # Default (will be calculated in decisionMakingEndRoutine)&amp;#10;&amp;#10;# Initialize duration variables for learning phase (will be set in trialEndRoutine)&amp;#10;# Initialize them here so Builder can access them even before first trial&amp;#10;globals()['crosshair1_duration'] = 2.0  # Default&amp;#10;globals()['actualPoints_duration'] = ACTUAL_POINTS_DURATION  # Default (2.0)&amp;#10;globals()['crosshair2_duration'] = 2.0  # Default&amp;#10;globals()['timeout_duration'] = 0  # Default&amp;#10;&amp;#10;# --- Additional variables for the experiment ---&amp;#10;# True values display&amp;#10;trueValuesText = &quot;&quot;&amp;#10;&amp;#10;# Decision making variables&amp;#10;leftFile = &quot;images/blank.png&quot;&amp;#10;rightFile = &quot;images/blank.png&quot;&amp;#10;leftVal = 0&amp;#10;rightVal = 0&amp;#10;correct_side = &quot;&quot;&amp;#10;decision_choice = &quot;&quot;&amp;#10;decision_rt = 0&amp;#10;decision_start_time = 0&amp;#10;&amp;#10;# Block transition variables&amp;#10;transitionText = &quot;&quot;&amp;#10;countdown_time = 30&amp;#10;countdown_text = &quot;&quot;&amp;#10;&amp;#10;# Trial counters&amp;#10;current_trial = 0&amp;#10;total_trials = 30  # Change this to 30 for full experiment&amp;#10;&amp;#10;print(f&quot;Experiment setup complete:&quot;)&amp;#10;print(f&quot;- Gain fruits: {gain_fruits}&quot;)&amp;#10;print(f&quot;- Loss fruits: {loss_fruits}&quot;)&amp;#10;print(f&quot;- Total learning trials: {len(gain_block) + len(loss_block)}&quot;)&amp;#10;print(f&quot;- Decision trials: {len(decision_block)}&quot;)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="trial">
      <RoutineSettingsComponent name="trial" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="trial" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <SliderComponent name="slider" plugin="None">
        <Param val="White" valType="color" updates="constant" name="borderColor"/>
        <Param val="LightGray" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="Red" valType="color" updates="constant" name="fillColor"/>
        <Param val="False" valType="bool" updates="constant" name="flip"/>
        <Param val="Noto Sans" valType="str" updates="constant" name="font"/>
        <Param val="False" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="5" valType="num" updates="constant" name="granularity"/>
        <Param val="0" valType="code" updates="None" name="initVal"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="labels"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="slider" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="constant" name="readOnly"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 0.075)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeHistory"/>
        <Param val="True" valType="bool" updates="constant" name="storeRating"/>
        <Param val="True" valType="bool" updates="constant" name="storeRatingTime"/>
        <Param val="()" valType="list" updates="constant" name="styleTweaks"/>
        <Param val="slider" valType="str" updates="constant" name="styles"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="ticks"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </SliderComponent>
      <ImageComponent name="image_3" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/blank.png" valType="file" updates="set every repeat" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <CodeComponent name="code_2" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="trueValStr = &quot;&quot;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="trueValStr = &quot;&quot;;&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="current = trials[trial_index];&amp;#10;trial_index += 1;&amp;#10;fruitFile = current[&quot;fruit&quot;];&amp;#10;trueVal = current[&quot;true_value&quot;];&amp;#10;baselineR = current[&quot;baseline&quot;];&amp;#10;blockType = current[&quot;block&quot;];&amp;#10;console.log(&quot;Trial&quot;, trial_index, fruitFile, trueVal);&amp;#10;slider.reset();&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Get the current trial from combined learning block&amp;#10;# The loop nReps controls total trials - we use first nReps/2 from each block type&amp;#10;# Get learning_block_index from globals (or initialize if first trial)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;learning_block_index += 1&amp;#10;# Store in globals to persist across trials&amp;#10;globals()['learning_block_index'] = learning_block_index&amp;#10;&amp;#10;# Calculate how many trials per block based on loop nReps&amp;#10;# If loop nReps is 60, we want 30 gain + 30 loss&amp;#10;total_trials = 120  # Default&amp;#10;trials_per_block = 60  # Default&amp;#10;&amp;#10;try:&amp;#10;    # Try to get nReps from current loop&amp;#10;    if 'currentLoop' in locals() and hasattr(currentLoop, 'nReps'):&amp;#10;        if currentLoop.nReps is not None:&amp;#10;            total_trials = int(currentLoop.nReps)&amp;#10;            trials_per_block = total_trials // 2&amp;#10;            print(f&quot;Using loop nReps: {total_trials} total trials ({trials_per_block} per block)&quot;)&amp;#10;    elif 'learningLoop' in globals() and hasattr(learningLoop, 'nReps'):&amp;#10;        if learningLoop.nReps is not None:&amp;#10;            total_trials = int(learningLoop.nReps)&amp;#10;            trials_per_block = total_trials // 2&amp;#10;            print(f&quot;Using learningLoop nReps: {total_trials} total trials ({trials_per_block} per block)&quot;)&amp;#10;    else:&amp;#10;        # Fallback: use all available or default&amp;#10;        combined_learning_block_check = globals().get('combined_learning_block', [])&amp;#10;        if combined_learning_block_check:&amp;#10;            total_trials = len(combined_learning_block_check)&amp;#10;            trials_per_block = total_trials // 2&amp;#10;            print(f&quot;Using combined block length: {total_trials} total trials ({trials_per_block} per block)&quot;)&amp;#10;        else:&amp;#10;            print(f&quot;WARNING: Using default {total_trials} total trials ({trials_per_block} per block)&quot;)&amp;#10;except Exception as e:&amp;#10;    print(f&quot;Error getting nReps: {e}, using defaults&quot;)&amp;#10;    combined_learning_block_check = globals().get('combined_learning_block', [])&amp;#10;    if combined_learning_block_check:&amp;#10;        total_trials = len(combined_learning_block_check)&amp;#10;        trials_per_block = total_trials // 2&amp;#10;&amp;#10;# Build a limited combined block on-the-fly based on nReps&amp;#10;# This ensures we use exactly nReps/2 from each block type&amp;#10;# Store it globally so it persists across trials&amp;#10;existing_limited = globals().get('limited_combined_block', [])&amp;#10;combined_learning_block = globals().get('combined_learning_block', [])&amp;#10;if 'limited_combined_block' not in globals() or len(existing_limited) != total_trials:&amp;#10;    print(f&quot;DEBUG: Building limited block. learning_block_index={learning_block_index}, total_trials={total_trials}, existing_size={len(existing_limited)}&quot;)&amp;#10;    # First trial or not yet built - build the limited combined block&amp;#10;    if combined_learning_block and len(combined_learning_block) &gt; 0:&amp;#10;        # The combined_learning_block is structured as: [first_block_all_trials, second_block_all_trials]&amp;#10;        # So we take first trials_per_block from the beginning (first block type)&amp;#10;        # Then we find where second block starts and take first trials_per_block from there&amp;#10;        &amp;#10;        first_block_type = combined_learning_block[0][&quot;block&quot;]&amp;#10;        second_block_type = &quot;loss&quot; if first_block_type == &quot;gain&quot; else &quot;gain&quot;&amp;#10;        &amp;#10;        # Find where first block ends and second block begins&amp;#10;        first_block_end = 0&amp;#10;        for i, trial_dict in enumerate(combined_learning_block):&amp;#10;            if trial_dict[&quot;block&quot;] != first_block_type:&amp;#10;                first_block_end = i&amp;#10;                break&amp;#10;        else:&amp;#10;            # All trials are of first type (shouldn't happen, but handle it)&amp;#10;            first_block_end = len(combined_learning_block)&amp;#10;        &amp;#10;        # Get first trials_per_block from first block (they're already at the start)&amp;#10;        first_block_trials = combined_learning_block[:min(trials_per_block, first_block_end)]&amp;#10;        &amp;#10;        # Get first trials_per_block from second block (starting from first_block_end)&amp;#10;        second_block_start = first_block_end&amp;#10;        second_block_trials = combined_learning_block[second_block_start:second_block_start + trials_per_block]&amp;#10;        &amp;#10;        # Create limited combined block and store globally&amp;#10;        limited_block = first_block_trials + second_block_trials&amp;#10;        globals()['limited_combined_block'] = limited_block&amp;#10;        globals()['total_trials'] = total_trials  # Store for reference&amp;#10;        print(f&quot;Built limited block: {len(first_block_trials)} {first_block_type} + {len(second_block_trials)} {second_block_type} = {len(limited_block)} total (expected {total_trials})&quot;)&amp;#10;        if len(limited_block) &gt; 0:&amp;#10;            print(f&quot;DEBUG LIMITED BLOCK: First trial block type = '{limited_block[0].get('block', 'unknown')}', should be '{first_block_type}'&quot;)&amp;#10;            if len(limited_block) &gt; trials_per_block:&amp;#10;                print(f&quot;DEBUG LIMITED BLOCK: Trial at index {trials_per_block} block type = '{limited_block[trials_per_block].get('block', 'unknown')}', should be '{second_block_type}'&quot;)&amp;#10;    else:&amp;#10;        # Fallback: use first total_trials from combined block&amp;#10;        if combined_learning_block:&amp;#10;            globals()['limited_combined_block'] = combined_learning_block[:total_trials]&amp;#10;            print(f&quot;Built limited block from combined (fallback): {len(globals()['limited_combined_block'])} trials&quot;)&amp;#10;        else:&amp;#10;            globals()['limited_combined_block'] = []&amp;#10;            print(f&quot;ERROR: No combined_learning_block available! Available globals: {[k for k in globals().keys() if 'block' in k.lower()]}&quot;)&amp;#10;&amp;#10;# Get the limited block (from globals)&amp;#10;limited_combined_block = globals().get('limited_combined_block', [])&amp;#10;&amp;#10;# Get stored total_trials if available&amp;#10;stored_total = globals().get('total_trials', total_trials)&amp;#10;if stored_total != total_trials:&amp;#10;    total_trials = stored_total&amp;#10;    trials_per_block = total_trials // 2&amp;#10;&amp;#10;# Safety check - rebuild if empty or wrong size&amp;#10;if not limited_combined_block or len(limited_combined_block) != total_trials:&amp;#10;    print(f&quot;WARNING: Limited block mismatch. Expected {total_trials}, got {len(limited_combined_block) if limited_combined_block else 0}&quot;)&amp;#10;    # Rebuild if needed - get combined_learning_block from globals&amp;#10;    combined_learning_block = globals().get('combined_learning_block', [])&amp;#10;    if combined_learning_block and len(combined_learning_block) &gt; 0:&amp;#10;        first_block_type = combined_learning_block[0][&quot;block&quot;]&amp;#10;        second_block_type = &quot;loss&quot; if first_block_type == &quot;gain&quot; else &quot;gain&quot;&amp;#10;        &amp;#10;        # Find where first block ends&amp;#10;        first_block_end = 0&amp;#10;        for i, trial_dict in enumerate(combined_learning_block):&amp;#10;            if trial_dict[&quot;block&quot;] != first_block_type:&amp;#10;                first_block_end = i&amp;#10;                break&amp;#10;        else:&amp;#10;            first_block_end = len(combined_learning_block)&amp;#10;        &amp;#10;        # Get first trials_per_block from each block&amp;#10;        first_block_trials = combined_learning_block[:min(trials_per_block, first_block_end)]&amp;#10;        second_block_start = first_block_end&amp;#10;        second_block_trials = combined_learning_block[second_block_start:second_block_start + trials_per_block]&amp;#10;        &amp;#10;        limited_combined_block = first_block_trials + second_block_trials&amp;#10;        globals()['limited_combined_block'] = limited_combined_block&amp;#10;        globals()['total_trials'] = total_trials&amp;#10;        print(f&quot;Rebuilt limited block: {len(first_block_trials)} {first_block_type} + {len(second_block_trials)} {second_block_type} = {len(limited_combined_block)} total&quot;)&amp;#10;&amp;#10;# Get current trial - ensure index is valid&amp;#10;# learning_block_index starts at -1, increments to 0 for first trial, so we use it directly (not -1)&amp;#10;if learning_block_index &gt;= 0 and learning_block_index &lt; len(limited_combined_block):&amp;#10;    current = limited_combined_block[learning_block_index]&amp;#10;    idx = learning_block_index + 1  # Display as 1-indexed for user&amp;#10;    block_type_str = current[&quot;block&quot;].title()&amp;#10;    print(f&quot;{block_type_str} trial {idx}/{total_trials}: {current['fruit']}&quot;)&amp;#10;elif learning_block_index &lt; total_trials:&amp;#10;    # Fallback to combined_learning_block if limited is empty&amp;#10;    combined_learning_block = globals().get('combined_learning_block', [])&amp;#10;    if learning_block_index &gt;= 0 and learning_block_index &lt; len(combined_learning_block):&amp;#10;        current = combined_learning_block[learning_block_index]&amp;#10;        idx = learning_block_index + 1  # Display as 1-indexed&amp;#10;        block_type_str = current[&quot;block&quot;].title()&amp;#10;        print(f&quot;{block_type_str} trial {idx}/{len(combined_learning_block)}: {current['fruit']} (using fallback from combined)&quot;)&amp;#10;    else:&amp;#10;        print(f&quot;ERROR: Index {learning_block_index} out of range. Combined block has {len(combined_learning_block)} trials&quot;)&amp;#10;        current = {&quot;fruit&quot;: &quot;images/blank.png&quot;, &quot;true_value&quot;: 0, &quot;baseline&quot;: 0, &quot;block&quot;: &quot;unknown&quot;}&amp;#10;        idx = 0&amp;#10;else:&amp;#10;    # No more trials&amp;#10;    print(f&quot;ERROR: Learning block exceeded. Index={learning_block_index}, Total={total_trials}, Limited block size={len(limited_combined_block) if limited_combined_block else 0}&quot;)&amp;#10;    current = {&quot;fruit&quot;: &quot;images/blank.png&quot;, &quot;true_value&quot;: 0, &quot;baseline&quot;: 0, &quot;block&quot;: &quot;unknown&quot;}&amp;#10;    idx = 0&amp;#10;&amp;#10;# Assign trial values&amp;#10;fruitFile = current[&quot;fruit&quot;]&amp;#10;trueVal   = current[&quot;true_value&quot;]&amp;#10;baselineR = current[&quot;baseline&quot;]&amp;#10;blockType = current[&quot;block&quot;]&amp;#10;&amp;#10;print(f&quot;Trial {idx}: {fruitFile}, value={trueVal}&quot;)&amp;#10;&amp;#10;# Clear any keys that were pressed in previous routines (like space from introScreen)&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;    print(&quot;DEBUG: Cleared key buffer at trial start&quot;)&amp;#10;except:&amp;#10;    pass  # If event is not available, that's ok&amp;#10;&amp;#10;# Force hide the image initially to prevent ghost fruit, then show real fruit&amp;#10;if 'image_3' in locals():&amp;#10;    image_3.opacity = 0&amp;#10;    image_3.setImage(&quot;images/blank.png&quot;)&amp;#10;    # Now set the real fruit image&amp;#10;    image_3.setImage(fruitFile)&amp;#10;    image_3.opacity = 1&amp;#10;    # Reset debug flag for EachFrame&amp;#10;    if hasattr(image_3, '_shown_debug'):&amp;#10;        del image_3._shown_debug&amp;#10;    print(f&quot;DEBUG: BeginRoutine set image to {fruitFile} with opacity {image_3.opacity}&quot;)&amp;#10;&amp;#10;# Reset slider to random starting value and ensure it's visible&amp;#10;if 'slider' in locals():&amp;#10;    import random&amp;#10;    # Get slider min/max if available, otherwise use reasonable defaults&amp;#10;    slider_min = -100  # Default minimum&amp;#10;    slider_max = 100   # Default maximum&amp;#10;    try:&amp;#10;        if hasattr(slider, 'min'):&amp;#10;            slider_min = slider.min&amp;#10;        if hasattr(slider, 'max'):&amp;#10;            slider_max = slider.max&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Generate random starting value within slider range&amp;#10;    random_start_value = random.randint(int(slider_min), int(slider_max))&amp;#10;    &amp;#10;    # Round to nearest 5 to match slider granularity (what's displayed)&amp;#10;    # Slider has granularity=5, so values are rounded to nearest 5 for display&amp;#10;    # Examples: 64 → 65, 32 → 30, -69 → -70&amp;#10;    rounded_start_value = round(random_start_value / 5) * 5&amp;#10;    &amp;#10;    slider.reset()&amp;#10;    slider.setRating(rounded_start_value)  # Start at rounded value (matches display)&amp;#10;    print(f&quot;Slider reset to random starting value: {random_start_value} → {rounded_start_value} (rounded to nearest 5, range: {slider_min} to {slider_max})&quot;)&amp;#10;    &amp;#10;    # Store rounded slider starting value in globals for logging (matches what's displayed)&amp;#10;    globals()['slider_starting_value'] = rounded_start_value&amp;#10;else:&amp;#10;    print(&quot;WARNING: Slider component not found!&quot;)&amp;#10;&amp;#10;# Initialize timing variables for response tracking&amp;#10;import time&amp;#10;trial_start_time = time.time()&amp;#10;response_time = None&amp;#10;trial_timed_out = False&amp;#10;responded_in_time = False&amp;#10;&amp;#10;# Store in globals so EachFrame and EndRoutine can access them&amp;#10;globals()['trial_start_time'] = trial_start_time&amp;#10;globals()['response_time'] = None&amp;#10;globals()['trial_timed_out'] = False&amp;#10;globals()['responded_in_time'] = False&amp;#10;&amp;#10;# Log trial start for data logging&amp;#10;try:&amp;#10;    data_logger = globals().get('data_logger', None)&amp;#10;    if data_logger:&amp;#10;        data_logger.start_trial(trial_start_time)&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Show the fruit image - FORCE it to be visible&amp;#10;if 'image_3' in locals() and fruitFile and fruitFile != 'images/blank.png' and fruitFile != '':&amp;#10;    # Set the image and make it visible every frame&amp;#10;    image_3.setImage(fruitFile)&amp;#10;    image_3.opacity = 1.0  # Force opacity to 1.0&amp;#10;    image_3.setAutoDraw(True)  # Force autodraw to ensure it's drawn&amp;#10;    # Debug: print once per trial that image is being shown&amp;#10;    if not hasattr(image_3, '_shown_debug'):&amp;#10;        print(f&quot;DEBUG: Showing image {fruitFile} with opacity {image_3.opacity}, autodraw={image_3.status}&quot;)&amp;#10;        image_3._shown_debug = True&amp;#10;elif 'image_3' in locals():&amp;#10;    image_3.opacity = 0&amp;#10;    image_3.setAutoDraw(False)&amp;#10;&amp;#10;# Display current slider value&amp;#10;if 'slider' in locals():&amp;#10;    current_value = slider.getRating()&amp;#10;    # Update text display if it exists&amp;#10;    if 'text_slider_value' in locals():&amp;#10;        text_slider_value.text = f&quot;Current rating: {int(current_value)}&quot;&amp;#10;    elif 'text_rating' in locals():&amp;#10;        text_rating.text = f&quot;Current rating: {int(current_value)}&quot;&amp;#10;&amp;#10;# Handle keyboard input for slider controls&amp;#10;# Using keys 1/2/3: 1 = left (decrease), 2 = continue, 3 = right (increase)&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['1', '2', '3', 'num_1', 'num_2', 'num_3'])&amp;#10;except (NameError, AttributeError):&amp;#10;    keys = []&amp;#10;    if 'key_resp_2' in locals() and hasattr(key_resp_2, 'keys'):&amp;#10;        if key_resp_2.keys and len(key_resp_2.keys) &gt; 0:&amp;#10;            keys = [key_resp_2.keys[0]]&amp;#10;            key_resp_2.keys = []&amp;#10;&amp;#10;for key in keys:&amp;#10;    # Log keypress for data logging&amp;#10;    import time&amp;#10;    current_timestamp = time.time()&amp;#10;    try:&amp;#10;        data_logger = globals().get('data_logger', None)&amp;#10;        if data_logger:&amp;#10;            data_logger.log_keypress(key, current_timestamp)&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Normalize key names (handle both '1' and 'num_1' formats)&amp;#10;    if key == 'num_1' or key == '1':&amp;#10;        # Key 1: Move slider left by 5 points (allow negatives)&amp;#10;        if 'slider' in locals():&amp;#10;            current_rating = slider.getRating()&amp;#10;            new_rating = current_rating - 5&amp;#10;            slider.setRating(new_rating)&amp;#10;            print(f&quot;Slider moved left (key 1): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_3' or key == '3':&amp;#10;        # Key 3: Move slider right by 5 points&amp;#10;        if 'slider' in locals():&amp;#10;            current_rating = slider.getRating()&amp;#10;            new_rating = current_rating + 5&amp;#10;            slider.setRating(new_rating)&amp;#10;            print(f&quot;Slider moved right (key 3): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_2' or key == '2':&amp;#10;        # Key 2: Submit answer - calculate response time&amp;#10;        import time&amp;#10;        trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;        response_time = time.time() - trial_start_time&amp;#10;        &amp;#10;        # Get timeout threshold (from startTaskBeginExperiment or default)&amp;#10;        try:&amp;#10;            if 'TRIAL_TIMEOUT_SECONDS' in globals():&amp;#10;                pass  # Use existing value&amp;#10;            else:&amp;#10;                TRIAL_TIMEOUT_SECONDS = 8.0  # Default&amp;#10;        except:&amp;#10;            TRIAL_TIMEOUT_SECONDS = 8.0  # Default&amp;#10;        &amp;#10;        if response_time &lt;= TRIAL_TIMEOUT_SECONDS:&amp;#10;            responded_in_time = True&amp;#10;            trial_timed_out = False&amp;#10;            print(f&quot;Answer submitted (key 2) in {response_time:.2f} seconds (within {TRIAL_TIMEOUT_SECONDS}s limit)&quot;)&amp;#10;        else:&amp;#10;            # Shouldn't happen since we check timeout below, but just in case&amp;#10;            responded_in_time = False&amp;#10;            trial_timed_out = True&amp;#10;            print(f&quot;Answer submitted (key 2) in {response_time:.2f} seconds (over {TRIAL_TIMEOUT_SECONDS}s limit)&quot;)&amp;#10;        &amp;#10;        # Store in globals for EndRoutine&amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;        break&amp;#10;&amp;#10;# Check for timeout - use config value&amp;#10;try:&amp;#10;    import time&amp;#10;    &amp;#10;    # Get trial_start_time from globals&amp;#10;    trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;    &amp;#10;    # Get timeout threshold (from startTaskBeginExperiment or default)&amp;#10;    try:&amp;#10;        if 'TRIAL_TIMEOUT_SECONDS' in globals():&amp;#10;            pass  # Use existing value&amp;#10;        else:&amp;#10;            TRIAL_TIMEOUT_SECONDS = 8.0  # Default&amp;#10;    except:&amp;#10;        TRIAL_TIMEOUT_SECONDS = 8.0  # Default&amp;#10;    &amp;#10;    # Check if already responded&amp;#10;    responded_in_time = globals().get('responded_in_time', False)&amp;#10;    &amp;#10;    elapsed_time = time.time() - trial_start_time&amp;#10;    &amp;#10;    if elapsed_time &gt;= TRIAL_TIMEOUT_SECONDS and not responded_in_time:&amp;#10;        # Trial timed out&amp;#10;        trial_timed_out = True&amp;#10;        response_time = TRIAL_TIMEOUT_SECONDS&amp;#10;        responded_in_time = False&amp;#10;        &amp;#10;        # Store in globals for EndRoutine&amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        print(f&quot;Trial timed out at {TRIAL_TIMEOUT_SECONDS} seconds&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Alternative: Fallback to keyboard component method if event.getKeys() doesn't work&amp;#10;# if 'key_resp_2' in locals():&amp;#10;#     keys = getattr(key_resp_2, 'keys', None)&amp;#10;#     if keys and len(keys) &gt; 0:&amp;#10;#         key = keys[0]&amp;#10;#         if key == 'left' and 'slider' in locals():&amp;#10;#             current_rating = slider.getRating()&amp;#10;#             slider.setRating(max(0, current_rating - 5))&amp;#10;#         elif key == 'right' and 'slider' in locals():&amp;#10;#             current_rating = slider.getRating()&amp;#10;#             slider.setRating(min(100, current_rating + 5))&amp;#10;#         elif key == 'return' or key == 'space':&amp;#10;#             continueRoutine = False&amp;#10;#         key_resp_2.keys = []&amp;#10;&amp;#10;# Check if slider itself is being clicked (alternative submission method)&amp;#10;if 'slider' in locals() and slider.getMouseResponses():&amp;#10;    # User clicked on slider to submit&amp;#10;    slider_responses = slider.getMouseResponses()&amp;#10;    if slider_responses:&amp;#10;        print(f&quot;Slider clicked to submit: {slider.getRating()}&quot;)&amp;#10;        continueRoutine = False&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="rating = slider.getRating();&amp;#10;rt = slider.getRT();&amp;#10;psychoJS.experiment.addData(&quot;block&quot;, blockType);&amp;#10;psychoJS.experiment.addData(&quot;fruit&quot;, fruitFile);&amp;#10;psychoJS.experiment.addData(&quot;baseline&quot;, baselineR);&amp;#10;psychoJS.experiment.addData(&quot;true_value&quot;, trueVal);&amp;#10;psychoJS.experiment.addData(&quot;predicted&quot;, rating);&amp;#10;psychoJS.experiment.addData(&quot;predicted_rt&quot;, rt);&amp;#10;" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="rating = slider.getRating()&amp;#10;rt = slider.getRT()&amp;#10;&amp;#10;# Get response_time, responded_in_time, and trial_timed_out from globals (set in EachFrame)&amp;#10;response_time = globals().get('response_time', None)&amp;#10;responded_in_time = globals().get('responded_in_time', False)&amp;#10;trial_timed_out = globals().get('trial_timed_out', False)&amp;#10;&amp;#10;# Use response_time if available (from our tracking), otherwise use slider RT&amp;#10;actual_response_time = response_time if response_time is not None else rt&amp;#10;&amp;#10;# Convert to milliseconds for logging&amp;#10;reaction_time_ms = int(actual_response_time * 1000) if actual_response_time else 0&amp;#10;&amp;#10;print(f&quot;Trial EndRoutine: RT={actual_response_time:.3f}s, responded_in_time={responded_in_time}, timed_out={trial_timed_out}&quot;)&amp;#10;&amp;#10;thisExp.addData(&quot;block&quot;, blockType)&amp;#10;thisExp.addData(&quot;fruit&quot;, fruitFile)&amp;#10;thisExp.addData(&quot;baseline&quot;, baselineR)&amp;#10;thisExp.addData(&quot;true_value&quot;, trueVal)&amp;#10;thisExp.addData(&quot;predicted&quot;, rating)&amp;#10;thisExp.addData(&quot;predicted_rt&quot;, actual_response_time)&amp;#10;thisExp.addData(&quot;responded_in_time&quot;, responded_in_time)&amp;#10;thisExp.addData(&quot;trial_timed_out&quot;, trial_timed_out)&amp;#10;&amp;#10;# Log trial data&amp;#10;try:&amp;#10;    # Extract fruit name from fruitFile (remove path and extension)&amp;#10;    # Use string operations instead of os.path for PsychoPy compatibility&amp;#10;    if fruitFile:&amp;#10;        # Handle both '/' and '\' path separators&amp;#10;        fruit_name = str(fruitFile).replace('\\', '/').split('/')[-1].replace('.png', '')&amp;#10;    else:&amp;#10;        fruit_name = &quot;unknown&quot;&amp;#10;    &amp;#10;    # Determine trial number within block (1-indexed)&amp;#10;    # learning_block_index is 0-indexed, so trial number = learning_block_index + 1&amp;#10;    # But we need trial number WITHIN the current block&amp;#10;    # Get learning_block_index from globals (should be set in BeginRoutine)&amp;#10;    learning_block_index = globals().get('learning_block_index', -1)&amp;#10;    limited_combined_block = globals().get('limited_combined_block', [])&amp;#10;    total_expected = globals().get('total_trials', 120)&amp;#10;    trials_per_block = total_expected // 2&amp;#10;    &amp;#10;    # Determine which block we're in based on learning_block_index&amp;#10;    if learning_block_index &lt; trials_per_block:&amp;#10;        # First block&amp;#10;        trial_num_within_block = learning_block_index + 1&amp;#10;        block_id = 1 if blockType == &quot;gain&quot; else 2&amp;#10;        block_name = &quot;rewards&quot; if blockType == &quot;gain&quot; else &quot;punishment&quot;&amp;#10;    else:&amp;#10;        # Second block&amp;#10;        trial_num_within_block = (learning_block_index - trials_per_block) + 1&amp;#10;        block_id = 1 if blockType == &quot;gain&quot; else 2&amp;#10;        block_name = &quot;rewards&quot; if blockType == &quot;gain&quot; else &quot;punishment&quot;&amp;#10;    &amp;#10;    # Get data logger and log trial&amp;#10;    data_logger = globals().get('data_logger', None)&amp;#10;    if data_logger:&amp;#10;        # Get slider starting value from globals (set in trialBeginRoutine)&amp;#10;        slider_starting_value = globals().get('slider_starting_value', None)&amp;#10;        &amp;#10;        data_logger.log_learning_trial(&amp;#10;            trial_num=trial_num_within_block,&amp;#10;            block_id=block_id,&amp;#10;            block_name=block_name,&amp;#10;            stimulus_identity=fruit_name,&amp;#10;            stimulus_avg_points=baselineR,&amp;#10;            actual_points=trueVal,&amp;#10;            prediction_value=int(rating),&amp;#10;            reaction_time_ms=reaction_time_ms,&amp;#10;            responded_in_time=responded_in_time,&amp;#10;            trial_timed_out=trial_timed_out,&amp;#10;            slider_starting_value=slider_starting_value&amp;#10;        )&amp;#10;except Exception as e:&amp;#10;    print(f&quot;Error logging trial data: {e}&quot;)&amp;#10;&amp;#10;# Calculate durations for subsequent routines and set text&amp;#10;import random&amp;#10;&amp;#10;# Use timing config values (set in startTaskBeginExperiment or defaults)&amp;#10;# Avoid os import to prevent conflicts with PsychoPy&amp;#10;try:&amp;#10;    # Try to use values from startTaskBeginExperiment&amp;#10;    if 'TRIAL_TIMEOUT_SECONDS' in globals():&amp;#10;        pass  # Use existing values&amp;#10;    else:&amp;#10;        TRIAL_TIMEOUT_SECONDS = 8.0&amp;#10;        CROSSHAIR_RANDOM_VALUES = [2, 3, 4]&amp;#10;        TIMEOUT_SCREEN_DURATION = 1.5&amp;#10;        ACTUAL_POINTS_DURATION = 2.0&amp;#10;except:&amp;#10;    # Fallback defaults&amp;#10;    TRIAL_TIMEOUT_SECONDS = 8.0&amp;#10;    CROSSHAIR_RANDOM_VALUES = [2, 3, 4]&amp;#10;    TIMEOUT_SCREEN_DURATION = 1.5&amp;#10;    ACTUAL_POINTS_DURATION = 2.0&amp;#10;&amp;#10;# Set actual_points_text here so it's available before actualPoints routine starts&amp;#10;# Make sure trueVal exists first&amp;#10;try:&amp;#10;    # Convert to int for display (trueVal can be float)&amp;#10;    actual_points_text = f&quot;Actual points: {int(trueVal):+d}&quot;&amp;#10;except:&amp;#10;    actual_points_text = &quot;Actual points: 0&quot;&amp;#10;&amp;#10;if responded_in_time and actual_response_time &lt;= TRIAL_TIMEOUT_SECONDS:&amp;#10;    # Case 1: Responded in time (t &lt;= TRIAL_TIMEOUT_SECONDS)&amp;#10;    rand1 = random.choice(CROSSHAIR_RANDOM_VALUES)&amp;#10;    crosshair1_duration = rand1 + (TRIAL_TIMEOUT_SECONDS - actual_response_time)&amp;#10;    actualPoints_duration = ACTUAL_POINTS_DURATION  # From config&amp;#10;    rand2 = random.choice(CROSSHAIR_RANDOM_VALUES)&amp;#10;    crosshair2_duration = rand2&amp;#10;    timeout_duration = 0  # No timeout screen&amp;#10;    &amp;#10;    # Store in globals so Builder can access them via $variableName&amp;#10;    globals()['crosshair1_duration'] = crosshair1_duration&amp;#10;    globals()['actualPoints_duration'] = actualPoints_duration&amp;#10;    globals()['crosshair2_duration'] = crosshair2_duration&amp;#10;    globals()['timeout_duration'] = timeout_duration&amp;#10;    &amp;#10;    # Log timing data&amp;#10;    thisExp.addData(&quot;crosshair1_rand&quot;, rand1)&amp;#10;    thisExp.addData(&quot;crosshair1_duration&quot;, crosshair1_duration)&amp;#10;    thisExp.addData(&quot;actualPoints_duration&quot;, actualPoints_duration)&amp;#10;    thisExp.addData(&quot;crosshair2_rand&quot;, rand2)&amp;#10;    thisExp.addData(&quot;crosshair2_duration&quot;, crosshair2_duration)&amp;#10;    thisExp.addData(&quot;timeout_duration&quot;, timeout_duration)&amp;#10;    &amp;#10;    print(f&quot;Case 1: RT={actual_response_time:.2f}s&quot;)&amp;#10;    print(f&quot;  rand1={rand1}, crosshair1={rand1} + ({TRIAL_TIMEOUT_SECONDS}-{actual_response_time:.2f}) = {crosshair1_duration:.2f}s&quot;)&amp;#10;    print(f&quot;  actualPoints={ACTUAL_POINTS_DURATION}s (from config)&quot;)&amp;#10;    print(f&quot;  rand2={rand2}, crosshair2={rand2}s&quot;)&amp;#10;else:&amp;#10;    # Case 2: Timed out (t &gt; TRIAL_TIMEOUT_SECONDS)&amp;#10;    timeout_duration = TIMEOUT_SCREEN_DURATION&amp;#10;    rand1 = random.choice(CROSSHAIR_RANDOM_VALUES)&amp;#10;    crosshair1_duration = max(0, rand1 - TIMEOUT_SCREEN_DURATION)  # Ensure non-negative&amp;#10;    actualPoints_duration = ACTUAL_POINTS_DURATION  # From config&amp;#10;    rand2 = random.choice(CROSSHAIR_RANDOM_VALUES)&amp;#10;    crosshair2_duration = rand2&amp;#10;    &amp;#10;    # Store in globals so Builder can access them via $variableName&amp;#10;    globals()['timeout_duration'] = timeout_duration&amp;#10;    globals()['crosshair1_duration'] = crosshair1_duration&amp;#10;    globals()['actualPoints_duration'] = actualPoints_duration&amp;#10;    globals()['crosshair2_duration'] = crosshair2_duration&amp;#10;    &amp;#10;    # Log timing data&amp;#10;    thisExp.addData(&quot;timeout_duration&quot;, timeout_duration)&amp;#10;    thisExp.addData(&quot;crosshair1_rand&quot;, rand1)&amp;#10;    thisExp.addData(&quot;crosshair1_duration&quot;, crosshair1_duration)&amp;#10;    thisExp.addData(&quot;actualPoints_duration&quot;, actualPoints_duration)&amp;#10;    thisExp.addData(&quot;crosshair2_rand&quot;, rand2)&amp;#10;    thisExp.addData(&quot;crosshair2_duration&quot;, crosshair2_duration)&amp;#10;    &amp;#10;    print(f&quot;Case 2: Timeout at {TRIAL_TIMEOUT_SECONDS}s&quot;)&amp;#10;    print(f&quot;  timeout={TIMEOUT_SCREEN_DURATION}s&quot;)&amp;#10;    print(f&quot;  rand1={rand1}, crosshair1={rand1} - {TIMEOUT_SCREEN_DURATION} = {crosshair1_duration:.2f}s&quot;)&amp;#10;    print(f&quot;  actualPoints={ACTUAL_POINTS_DURATION}s (from config)&quot;)&amp;#10;    print(f&quot;  rand2={rand2}, crosshair2={rand2}s&quot;)&amp;#10;&amp;#10;# Check if we've completed the first block (halfway point)&amp;#10;# This will trigger the transition screen before starting the second block&amp;#10;# Get learning_block_index from globals (should be set in BeginRoutine)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;limited_combined_block = globals().get('limited_combined_block', [])&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# learning_block_index is 0-indexed and incremented at START of each trial&amp;#10;# After completing the last trial of first block (trial #trials_per_block),&amp;#10;# learning_block_index = trials_per_block - 1&amp;#10;# At the end of that trial, we want to show transition screen&amp;#10;# So we check if we just completed the last trial of the first block&amp;#10;if learning_block_index == trials_per_block - 1:&amp;#10;    print(f&quot;DEBUG: First block complete check - learning_block_index={learning_block_index}, trials_per_block={trials_per_block}&quot;)&amp;#10;    # We've just completed the first block - set flag to show transition screen&amp;#10;    globals()['show_block_transition'] = True&amp;#10;    &amp;#10;    # Save learning data for first block&amp;#10;    try:&amp;#10;        data_logger = globals().get('data_logger', None)&amp;#10;        if data_logger:&amp;#10;            # Determine block name based on first block type&amp;#10;            first_block_type = blockType if learning_block_index == 0 else None&amp;#10;            if not first_block_type and limited_combined_block:&amp;#10;                first_block_type = limited_combined_block[0][&quot;block&quot;]&amp;#10;            block_name = &quot;rewards&quot; if first_block_type == &quot;gain&quot; else &quot;punishment&quot;&amp;#10;            data_logger.save_learning_data(block_num=1, block_name=block_name)&amp;#10;    except Exception as e:&amp;#10;        print(f&quot;Error saving first block data: {e}&quot;)&amp;#10;    &amp;#10;    print(f&quot;First block complete! ({trials_per_block} trials) - Transition screen will appear next.&quot;)&amp;#10;&amp;#10;# Check if we've completed all learning trials&amp;#10;# learning_block_index is 0-indexed and incremented at START of each trial&amp;#10;# After completing the last trial (trial N where N = total_expected), &amp;#10;# learning_block_index = N - 1 = total_expected - 1&amp;#10;# So we check if we've just completed the last trial&amp;#10;print(f&quot;DEBUG: Checking if all trials complete - learning_block_index={learning_block_index}, total_expected={total_expected}, condition={learning_block_index == total_expected - 1}&quot;)&amp;#10;if learning_block_index == total_expected - 1:&amp;#10;    print(f&quot;Learning trials complete. Completed {learning_block_index + 1}/{total_expected} trials.&quot;)&amp;#10;    &amp;#10;    # Save learning data for second block&amp;#10;    try:&amp;#10;        data_logger = globals().get('data_logger', None)&amp;#10;        if data_logger:&amp;#10;            # Determine block name based on second block type&amp;#10;            if limited_combined_block and len(limited_combined_block) &gt; trials_per_block:&amp;#10;                second_block_type = limited_combined_block[trials_per_block][&quot;block&quot;]&amp;#10;                block_name = &quot;rewards&quot; if second_block_type == &quot;gain&quot; else &quot;punishment&quot;&amp;#10;                print(f&quot;Saving second block data: block_num=2, block_name={block_name}&quot;)&amp;#10;                data_logger.save_learning_data(block_num=2, block_name=block_name)&amp;#10;            else:&amp;#10;                # Fallback: determine block name from current blockType&amp;#10;                # Since we're in the second block, blockType should be the second block type&amp;#10;                block_name = &quot;rewards&quot; if blockType == &quot;gain&quot; else &quot;punishment&quot;&amp;#10;                print(f&quot;Saving second block data (fallback): block_num=2, block_name={block_name}&quot;)&amp;#10;                data_logger.save_learning_data(block_num=2, block_name=block_name)&amp;#10;    except Exception as e:&amp;#10;        print(f&quot;Error saving second block data: {e}&quot;)&amp;#10;        import traceback&amp;#10;        traceback.print_exc()&amp;#10;    &amp;#10;    # End the loop (assuming loop is named learningLoop or similar)&amp;#10;    if 'learningLoop' in locals():&amp;#10;        learningLoop.finished = True&amp;#10;    elif 'currentLoop' in locals():&amp;#10;        currentLoop.finished = True&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_2" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <KeyboardComponent name="key_resp_2" plugin="None">
        <Param val="'left','right','return'" valType="list" updates="set every repeat" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_2" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <TextComponent name="text_slider_value" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_slider_value" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.1)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="feedback">
      <RoutineSettingsComponent name="feedback" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="feedback" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_feedback" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_feedback" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$trueValStr" valType="str" updates="set every repeat" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_3" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Clear any key presses from the trial (so they don't affect next trial)&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Display the true value for the fruit that was just shown&amp;#10;# Only show if we have actual trial data (not initial state)&amp;#10;if fruitFile and fruitFile != 'images/blank.png' and fruitFile != '':&amp;#10;    trueValStr = f&quot;True value: {trueVal:+d} points&quot;&amp;#10;    print(f&quot;Feedback: {fruitFile} = {trueVal:+d} points&quot;)&amp;#10;    &amp;#10;    # Make sure the feedback text is visible&amp;#10;    if 'text_feedback' in locals():&amp;#10;        text_feedback.text = trueValStr&amp;#10;        text_feedback.opacity = 1&amp;#10;        print(f&quot;Setting feedback text: {trueValStr}&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_feedback component not found!&quot;)&amp;#10;else:&amp;#10;    # Don't show anything if we don't have valid trial data&amp;#10;    print(&quot;Feedback skipped: No trial data available&quot;)&amp;#10;    if 'text_feedback' in locals():&amp;#10;        text_feedback.opacity = 0&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_3" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="introScreen">
      <RoutineSettingsComponent name="introScreen" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="introScreen" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_6" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_6" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press SPACE to Begin" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp" plugin="None">
        <Param val="'space'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="blockBreak">
      <RoutineSettingsComponent name="blockBreak" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="blockBreak" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_7" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_7" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Great job! You finished the first block.&amp;#10;Now you’ll see new fruits and new point values.&amp;#10;&amp;#10;Press 2 to continue.&amp;#10;" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_3" plugin="None">
        <Param val="'2', 'num2'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_3" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="decisionTrial">
      <RoutineSettingsComponent name="decisionTrial" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionTrial" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="image_left" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="$leftFile" valType="file" updates="set every repeat" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_left" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.3, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.4, 0.4)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="image_right" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="$rightFile" valType="file" updates="set every repeat" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_right" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.3, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.4, 0.4)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <MouseComponent name="mouse" plugin="None">
        <Param val="" valType="list" updates="constant" name="clickable"/>
        <Param val="" valType="list" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="any click" valType="str" updates="constant" name="forceEndRoutineOnPress"/>
        <Param val="mouse" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="constant" name="newClicksOnly"/>
        <Param val="on click" valType="str" updates="None" name="saveMouseState"/>
        <Param val="name," valType="list" updates="constant" name="saveParamsClickable"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="False" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="mouse onset" valType="str" updates="constant" name="timeRelativeTo"/>
      </MouseComponent>
      <CodeComponent name="code_4" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Pull current decision pair&amp;#10;if decision_index &lt; len(decision_block):&amp;#10;    current = decision_block[decision_index]&amp;#10;    leftFile  = current[&quot;leftFruit&quot;]&amp;#10;    rightFile = current[&quot;rightFruit&quot;]&amp;#10;    correct   = current[&quot;correct&quot;]&amp;#10;    &amp;#10;    # Set the images immediately&amp;#10;    image_left.setImage(leftFile)&amp;#10;    image_right.setImage(rightFile)&amp;#10;    &amp;#10;    # Reset&amp;#10;    choice = &quot;&quot;&amp;#10;    mouse.clickReset()&amp;#10;    print(f&quot;Decision {decision_index+1}: {leftFile} vs {rightFile}, correct={correct}&quot;)&amp;#10;else:&amp;#10;    # No more decision trials&amp;#10;    leftFile = &quot;images/blank.png&quot;&amp;#10;    rightFile = &quot;images/blank.png&quot;&amp;#10;    image_left.setImage(leftFile)&amp;#10;    image_right.setImage(rightFile)&amp;#10;    choice = &quot;&quot;&amp;#10;    print(&quot;No more decision trials available&quot;)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="import numpy as np  # make sure this is at the top of your experiment or routine&amp;#10;&amp;#10;# --- Ensure images are visible and properly set (your original logic) ---&amp;#10;if leftFile and leftFile != &quot;images/blank.png&quot;:&amp;#10;    image_left.opacity = 1&amp;#10;    image_left.setImage(leftFile)&amp;#10;else:&amp;#10;    image_left.opacity = 0&amp;#10;&amp;#10;if rightFile and rightFile != &quot;images/blank.png&quot;:&amp;#10;    image_right.opacity = 1&amp;#10;    image_right.setImage(rightFile)&amp;#10;else:&amp;#10;    image_right.opacity = 0&amp;#10;&amp;#10;# --- Smooth hover magnification setup ---&amp;#10;normal_size = np.array([0.4, 0.4])&amp;#10;hover_size = np.array([0.46, 0.46])   # ~20% larger&amp;#10;growth_speed = 0.5                    # 0.05–0.2 recommended for smoothness&amp;#10;&amp;#10;mouse_pos = mouse.getPos()&amp;#10;&amp;#10;# For left image&amp;#10;if image_left.opacity &gt; 0 and image_left.contains(mouse_pos):&amp;#10;    image_left.size += (hover_size - np.array(image_left.size)) * growth_speed&amp;#10;else:&amp;#10;    image_left.size += (normal_size - np.array(image_left.size)) * growth_speed&amp;#10;&amp;#10;# For right image&amp;#10;if image_right.opacity &gt; 0 and image_right.contains(mouse_pos):&amp;#10;    image_right.size += (hover_size - np.array(image_right.size)) * growth_speed&amp;#10;else:&amp;#10;    image_right.size += (normal_size - np.array(image_right.size)) * growth_speed&amp;#10;&amp;#10;# --- Click detection (your original logic) ---&amp;#10;if mouse.isPressedIn(image_left):&amp;#10;    choice = &quot;left&quot;&amp;#10;    continueRoutine = False&amp;#10;elif mouse.isPressedIn(image_right):&amp;#10;    choice = &quot;right&quot;&amp;#10;    continueRoutine = False&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Determine correctness&amp;#10;was_correct = (choice == correct)&amp;#10;&amp;#10;# Log the decision data&amp;#10;thisExp.addData(&quot;decision_trial&quot;, decision_index + 1)&amp;#10;thisExp.addData(&quot;leftFruit&quot;, leftFile)&amp;#10;thisExp.addData(&quot;rightFruit&quot;, rightFile)&amp;#10;thisExp.addData(&quot;choice&quot;, choice)&amp;#10;thisExp.addData(&quot;correctSide&quot;, correct)&amp;#10;thisExp.addData(&quot;was_correct&quot;, was_correct)&amp;#10;&amp;#10;print(f&quot;Decision {decision_index + 1}: {choice} (correct: {correct}, accurate: {was_correct})&quot;)&amp;#10;&amp;#10;# Move to next trial&amp;#10;decision_index += 1&amp;#10;&amp;#10;# Check if we're done with decision trials&amp;#10;if decision_index &gt;= len(decision_block):&amp;#10;    print(&quot;All decision trials complete.&quot;)&amp;#10;    decisionLoop.finished = True&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_4" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionPhase">
      <RoutineSettingsComponent name="decisionPhase" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionPhase" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_5" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_5" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press C to continue with the first block." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_4" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_4" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="decisionInstructions">
      <RoutineSettingsComponent name="decisionInstructions" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionInstructions" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_8" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_8" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="&amp;#10;&amp;#10;You have completed the learning phase and will now make decisions between pairs of fruits based on what you learned.&amp;#10;&amp;#10;Performance Bonus Opportunity:&amp;#10;Most people get 70% of their responses correctly.&amp;#10;If you'll be correct in more than 80% of your decisions, you will receive a bonus compensation.&amp;#10;&amp;#10;Try to recall the points associated with each fruit and make the best choices you can.&amp;#10;&amp;#10;Click C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_9" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.06" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_9" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.3)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Decision Task Instructions" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_5" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_5" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="whichFruit">
      <RoutineSettingsComponent name="whichFruit" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="whichFruit" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_10" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.06" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_10" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Which fruit would you pick?&amp;#10;&amp;#10;In this block, you will choose between pairs of fruits. Choose the fruit you think will give you more points.&amp;#10;&amp;#10;Use &quot;1&quot; to choose the fruit on the left side of the screen, and &quot;3&quot; to choose the fruit on the right side of the screen.&amp;#10;&amp;#10;Click C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_6" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_6" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="fruitInfoScreen">
      <RoutineSettingsComponent name="fruitInfoScreen" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="fruitInfoScreen" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_5" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# Clear any keys that were pressed in previous routines - AGGRESSIVE CLEARING&amp;#10;try:&amp;#10;    import time&amp;#10;    # Clear multiple times to be sure&amp;#10;    for _ in range(5):&amp;#10;        event.clearEvents()&amp;#10;        time.sleep(0.01)&amp;#10;    routine_start_time = time.time()&amp;#10;    print(&quot;AGGRESSIVELY cleared key buffer at start of fruitInfoScreen&quot;)&amp;#10;    print(&quot;Current time:&quot;, routine_start_time)&amp;#10;except Exception as e:&amp;#10;    routine_start_time = 0&amp;#10;    print(f&quot;Error in BeginExperiment: {e}&quot;)&amp;#10;&amp;#10;# Separate gains/losses and sort&amp;#10;gain_fruits = [(fruit, val) for fruit, val in fruit_values.items() if val &gt; 0]&amp;#10;loss_fruits = [(fruit, val) for fruit, val in fruit_values.items() if val &lt; 0]&amp;#10;&amp;#10;gain_fruits = sorted(gain_fruits, key=lambda x: x[1])&amp;#10;loss_fruits = sorted(loss_fruits, key=lambda x: x[1])&amp;#10;&amp;#10;print(f&quot;Gain fruits: {gain_fruits}&quot;)&amp;#10;print(f&quot;Loss fruits: {loss_fruits}&quot;)&amp;#10;&amp;#10;# Extract fruit paths and values&amp;#10;gain_fruit_paths = [f[0] for f in gain_fruits]&amp;#10;gain_fruit_values = [f[1] for f in gain_fruits]&amp;#10;loss_fruit_paths = [f[0] for f in loss_fruits]&amp;#10;loss_fruit_values = [f[1] for f in loss_fruits]&amp;#10;&amp;#10;# Build the info text to display&amp;#10;fruit_info_text = &quot;Information about the fruits\n\n&quot;&amp;#10;fruit_info_text += &quot;GAIN FRUITS (Average Points):\n&quot;&amp;#10;for i, (fruit, val) in enumerate(gain_fruits):&amp;#10;    fruit_name = fruit.split('/')[-1].replace('.png', '')&amp;#10;    fruit_info_text += f&quot;{i+1}. {fruit_name}: +{val} points\n&quot;&amp;#10;fruit_info_text += &quot;\nLOSS FRUITS (Average Points):\n&quot;&amp;#10;for i, (fruit, val) in enumerate(loss_fruits):&amp;#10;    fruit_name = fruit.split('/')[-1].replace('.png', '')&amp;#10;    fruit_info_text += f&quot;{i+1}. {fruit_name}: {val} points\n&quot;&amp;#10;fruit_info_text += &quot;\n\nPress SPACE to continue&quot;&amp;#10;&amp;#10;print(f&quot;Fruit info text: {fruit_info_text}&quot;)&amp;#10;&amp;#10;# Create visual stimuli dynamically&amp;#10;y_positions = [0.35, 0.05, -0.25]&amp;#10;x_gain, x_loss = -0.45, 0.45&amp;#10;img_size = (0.2, 0.2)&amp;#10;&amp;#10;gain_images = []&amp;#10;gain_texts = []&amp;#10;loss_images = []&amp;#10;loss_texts = []&amp;#10;&amp;#10;# Create gain fruit displays&amp;#10;for i, (fruit, val) in enumerate(gain_fruits):&amp;#10;    img = visual.ImageStim(win, image=fruit, pos=(x_gain - 0.1, y_positions[i]), size=img_size)&amp;#10;    fruit_name = fruit.split('/')[-1].replace('.png', '')&amp;#10;    txt = visual.TextStim(win, text=f&quot;{fruit_name}: +{val} pts&quot;,&amp;#10;                          pos=(x_gain + 0.25, y_positions[i]), color='darkgreen', &amp;#10;                          height=0.05, alignText='left', bold=True)&amp;#10;    gain_images.append(img)&amp;#10;    gain_texts.append(txt)&amp;#10;&amp;#10;# Create loss fruit displays&amp;#10;for i, (fruit, val) in enumerate(loss_fruits):&amp;#10;    img = visual.ImageStim(win, image=fruit, pos=(x_loss - 0.1, y_positions[i]), size=img_size)&amp;#10;    fruit_name = fruit.split('/')[-1].replace('.png', '')&amp;#10;    txt = visual.TextStim(win, text=f&quot;{fruit_name}: {val} pts&quot;,&amp;#10;                          pos=(x_loss + 0.25, y_positions[i]), color='darkred', &amp;#10;                          height=0.05, alignText='left', bold=True)&amp;#10;    loss_images.append(img)&amp;#10;    loss_texts.append(txt)&amp;#10;&amp;#10;# Create title and subtitle&amp;#10;title = visual.TextStim(win, text=&quot;Information about the fruits&quot;, &amp;#10;                       pos=(0, 0.75), height=0.08, color='black', bold=True)&amp;#10;subtitle = visual.TextStim(win, text=&quot;The average number of points for each fruit:&quot;,&amp;#10;                          pos=(0, 0.65), height=0.04, color='black')&amp;#10;bottom_note = visual.TextStim(win, text=&quot;Press SPACE to continue&quot;, &amp;#10;                              pos=(0, -0.7), height=0.05, color='black', bold=True)&amp;#10;&amp;#10;print(f&quot;Created {len(gain_images)} gain images and {len(loss_images)} loss images&quot;)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Draw everything each frame to keep it visible&amp;#10;if 'title' in locals() and 'gain_images' in locals():&amp;#10;    title.draw()&amp;#10;    subtitle.draw()&amp;#10;    &amp;#10;    for img, txt in zip(gain_images, gain_texts):&amp;#10;        img.draw()&amp;#10;        txt.draw()&amp;#10;    &amp;#10;    for img, txt in zip(loss_images, loss_texts):&amp;#10;        img.draw()&amp;#10;        txt.draw()&amp;#10;    &amp;#10;    bottom_note.draw()&amp;#10;    win.flip()&amp;#10;&amp;#10;# Wait for space to end - but ignore presses in first 2 seconds to avoid stale keys&amp;#10;try:&amp;#10;    import time&amp;#10;    elapsed_time = time.time() - routine_start_time&amp;#10;    &amp;#10;    # Only accept key presses after 2 seconds have passed&amp;#10;    if elapsed_time &gt; 2.0:&amp;#10;        keys = event.getKeys(keyList=['space'], timeStamped=False)&amp;#10;        if keys and 'space' in keys:&amp;#10;            print(f&quot;Space pressed to continue from fruit info screen (after {elapsed_time:.2f}s)&quot;)&amp;#10;            continueRoutine = False&amp;#10;    else:&amp;#10;        # Still in the &quot;ignore window&quot; - clear any keys aggressively&amp;#10;        event.clearEvents()&amp;#10;        print(f&quot;Ignoring keys for {elapsed_time:.2f}s (need to wait until 2.0s)&quot;)&amp;#10;except Exception as e:&amp;#10;    print(f&quot;Error in EachFrame: {e}&quot;)&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="shown = false;&amp;#10;" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Clean up if needed (but shown will be reset by PsychoPy anyway)&amp;#10;pass&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_5" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_12" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_12" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$fruit_info_text" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="timeout">
      <RoutineSettingsComponent name="timeout" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="timeout" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_timeout" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_timeout" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$timeout_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Time out" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_7" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_timeout&quot;, locals())) {&amp;#10;    text_timeout.text = &quot;Time out&quot;;&amp;#10;    text_timeout.opacity = 1;&amp;#10;    text_timeout.setAutoDraw(true);&amp;#10;}&amp;#10;console.log(&quot;Showing timeout screen&quot;);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Timeout screen - shows &quot;Time out&quot; message&amp;#10;# Duration is exactly 1.5 seconds (set in Builder or dynamically)&amp;#10;# Only show if timeout_duration &gt; 0&amp;#10;&amp;#10;if 'timeout_duration' in locals() and timeout_duration &gt; 0:&amp;#10;    if 'text_timeout' in locals():&amp;#10;        text_timeout.text = &quot;Time out&quot;&amp;#10;        text_timeout.opacity = 1&amp;#10;        text_timeout.setAutoDraw(True)&amp;#10;        print(&quot;Showing timeout screen&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_timeout component not found!&quot;)&amp;#10;else:&amp;#10;    # No timeout - skip this screen (duration should be 0)&amp;#10;    print(&quot;Skipping timeout screen (no timeout occurred)&quot;)&amp;#10;    if 'text_timeout' in locals():&amp;#10;        text_timeout.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Timeout screen - just wait for duration&amp;#10;pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_7" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="crosshair1">
      <RoutineSettingsComponent name="crosshair1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_13" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_13" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$crosshair1_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_6" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;    crosshair.opacity = 1;&amp;#10;    crosshair.setAutoDraw(true);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# First crosshair screen - duration set dynamically based on trial response time&amp;#10;# Duration is set in trialEndRoutine.py as crosshair1_duration&amp;#10;# This routine will show a crosshair in the center of the screen&amp;#10;&amp;#10;# Make sure crosshair is visible (add a crosshair component in Builder)&amp;#10;if 'crosshair' in locals():&amp;#10;    crosshair.opacity = 1&amp;#10;    crosshair.setAutoDraw(True)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Crosshair screen - just wait for duration&amp;#10;# Duration is controlled by PsychoPy Builder routine settings&amp;#10;pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_6" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="crosshair2">
      <RoutineSettingsComponent name="crosshair2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_14" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_14" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$crosshair2_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_9" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;    crosshair.opacity = 1;&amp;#10;    crosshair.setAutoDraw(true);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Second crosshair screen - duration is random 2-4 seconds&amp;#10;# Duration is set in trialEndRoutine.py as crosshair2_duration&amp;#10;&amp;#10;# Make sure crosshair is visible&amp;#10;if 'crosshair' in locals():&amp;#10;    crosshair.opacity = 1&amp;#10;    crosshair.setAutoDraw(True)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Crosshair screen - just wait for duration&amp;#10;pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_9" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="actualPoints">
      <RoutineSettingsComponent name="actualPoints" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="actualPoints" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="image_30" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="image_30" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$actualPoints_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_8" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Actual points screen - shows the true value&amp;#10;# Duration is set dynamically based on trial response time&amp;#10;# IMPORTANT: In Builder, leave the Text component's text field BLANK - code will set it&amp;#10;&amp;#10;# Get trueVal and create the text&amp;#10;actual_points_text = &quot;Actual points: 0&quot;  # Initialize first&amp;#10;&amp;#10;# Try to get trueVal from various sources&amp;#10;if 'trueVal' in locals():&amp;#10;    # Convert to int for display (trueVal can be float)&amp;#10;    actual_points_text = f&quot;Actual points: {int(trueVal):+d}&quot;&amp;#10;elif 'trueVal' in globals():&amp;#10;    # Convert to int for display (trueVal can be float)&amp;#10;    actual_points_text = f&quot;Actual points: {int(trueVal):+d}&quot;&amp;#10;else:&amp;#10;    # Fallback: try to get from actual_points_text if it was set in trialEndRoutine&amp;#10;    try:&amp;#10;        if 'actual_points_text' in locals():&amp;#10;            pass  # Use the value that exists&amp;#10;        else:&amp;#10;            actual_points_text = &quot;Actual points: 0&quot;&amp;#10;    except:&amp;#10;        actual_points_text = &quot;Actual points: 0&quot;&amp;#10;&amp;#10;# Set the text component (DO NOT set text in Builder - leave it blank!)&amp;#10;# Try multiple possible component names&amp;#10;if 'text_actual_points' in locals():&amp;#10;    text_actual_points.text = actual_points_text&amp;#10;    text_actual_points.opacity = 1&amp;#10;    text_actual_points.setAutoDraw(True)&amp;#10;    print(f&quot;Showing actual points: {actual_points_text}&quot;)&amp;#10;elif 'image_30' in locals():&amp;#10;    # Handle case where component was accidentally renamed to image_30&amp;#10;    image_30.text = actual_points_text&amp;#10;    image_30.opacity = 1&amp;#10;    image_30.setAutoDraw(True)&amp;#10;    print(f&quot;Showing actual points (via image_30): {actual_points_text}&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_actual_points or image_30 component not found!&quot;)&amp;#10;&amp;#10;# Ensure actualPoints_duration is available from globals&amp;#10;# This helps Builder access it for the routine duration&amp;#10;if 'actualPoints_duration' not in globals():&amp;#10;    # Fallback to default if not set yet&amp;#10;    globals()['actualPoints_duration'] = 2.0&amp;#10;    print(&quot;WARNING: actualPoints_duration not found in globals, using default 2.0&quot;)&amp;#10;else:&amp;#10;    print(f&quot;actualPoints_duration is {globals()['actualPoints_duration']} seconds&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide actual points text&amp;#10;if 'text_actual_points' in locals():&amp;#10;    text_actual_points.setAutoDraw(False)&amp;#10;    text_actual_points.opacity = 0&amp;#10;elif 'image_30' in locals():&amp;#10;    image_30.setAutoDraw(False)&amp;#10;    image_30.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;print(&quot;Actual points routine ended&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_8" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionStimulus1">
      <RoutineSettingsComponent name="decisionStimulus1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionStimulus1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.3)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Any text&amp;#10;&amp;#10;including line breaks" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <ImageComponent name="image_left1" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_left1" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="image_right2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_right2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <CodeComponent name="code_10" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# First stimulus screen - shows first fruit on its side for 2 seconds&amp;#10;# Components: text_question, image_left1, image_right2&amp;#10;&amp;#10;# Get decision_index and decision_block from globals&amp;#10;decision_index = globals().get('decision_index', 0)&amp;#10;decision_block = globals().get('decision_block', [])&amp;#10;&amp;#10;if decision_block:&amp;#10;    # Use modulo to cycle through trials if needed&amp;#10;    trial_idx = decision_index % len(decision_block)&amp;#10;    current = decision_block[trial_idx]&amp;#10;    first_fruit = current[&quot;firstFruit&quot;]&amp;#10;    first_side = current[&quot;firstSide&quot;]&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question' in locals():&amp;#10;        text_question.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question.pos = (0, 0)&amp;#10;        text_question.opacity = 1&amp;#10;        text_question.setAutoDraw(True)&amp;#10;    &amp;#10;    # Show first fruit on its designated side&amp;#10;    if first_side == &quot;left&quot;:&amp;#10;        if 'image_left1' in locals():&amp;#10;            image_left1.setImage(first_fruit)&amp;#10;            image_left1.opacity = 1&amp;#10;            image_left1.setAutoDraw(True)&amp;#10;        if 'image_right2' in locals():&amp;#10;            image_right2.opacity = 0&amp;#10;            image_right2.setAutoDraw(False)&amp;#10;    else:  # right&amp;#10;        if 'image_right2' in locals():&amp;#10;            image_right2.setImage(first_fruit)&amp;#10;            image_right2.opacity = 1&amp;#10;            image_right2.setAutoDraw(True)&amp;#10;        if 'image_left1' in locals():&amp;#10;            image_left1.opacity = 0&amp;#10;            image_left1.setAutoDraw(False)&amp;#10;    &amp;#10;    print(f&quot;Decision {decision_index+1}: Showing {first_fruit} on {first_side} (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(&quot;No more decision trials&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_10" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionITI1">
      <RoutineSettingsComponent name="decisionITI1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionITI1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_15" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_15" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$iti1_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_11" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# ITI 1 - Crosshair screen (random 1-3 seconds)&amp;#10;# Component: text_15 (crosshair)&amp;#10;import random&amp;#10;&amp;#10;# Hide previous text and fruits&amp;#10;if 'text_question' in locals():&amp;#10;    text_question.opacity = 0&amp;#10;    text_question.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_left1' in locals():&amp;#10;    image_left1.opacity = 0&amp;#10;    image_left1.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_right2' in locals():&amp;#10;    image_right2.opacity = 0&amp;#10;    image_right2.setAutoDraw(False)&amp;#10;&amp;#10;# Show crosshair&amp;#10;if 'text_15' in locals():&amp;#10;    text_15.text = &quot;+&quot;  # Crosshair symbol&amp;#10;    text_15.opacity = 1&amp;#10;    text_15.setAutoDraw(True)&amp;#10;&amp;#10;# Random duration: 1, 2, or 3 seconds&amp;#10;iti1_duration = random.choice([1, 2, 3])&amp;#10;print(f&quot;ITI 1: {iti1_duration} seconds&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_11" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionStimulus2">
      <RoutineSettingsComponent name="decisionStimulus2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionStimulus2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.3)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Any text&amp;#10;&amp;#10;including line breaks" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <ImageComponent name="image_left1_2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_left1_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="image_right2_2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_right2_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <CodeComponent name="code_12" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Second stimulus screen - shows second fruit on opposite side for 2 seconds&amp;#10;# Components: text_question_2, image_left1_2, image_right2_2&amp;#10;&amp;#10;# Get decision_index and decision_block from globals&amp;#10;decision_index = globals().get('decision_index', 0)&amp;#10;decision_block = globals().get('decision_block', [])&amp;#10;&amp;#10;if decision_block:&amp;#10;    # Use modulo to cycle through trials if needed&amp;#10;    trial_idx = decision_index % len(decision_block)&amp;#10;    current = decision_block[trial_idx]&amp;#10;    second_fruit = current[&quot;secondFruit&quot;]&amp;#10;    second_side = current[&quot;secondSide&quot;]&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question_2' in locals():&amp;#10;        text_question_2.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question_2.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question_2.pos = (0, 0)&amp;#10;        text_question_2.opacity = 1&amp;#10;        text_question_2.setAutoDraw(True)&amp;#10;    &amp;#10;    # Hide previous crosshair&amp;#10;    if 'text_15' in locals():&amp;#10;        text_15.opacity = 0&amp;#10;        text_15.setAutoDraw(False)&amp;#10;    &amp;#10;    # Show second fruit on its designated side&amp;#10;    if second_side == &quot;left&quot;:&amp;#10;        if 'image_left1_2' in locals():&amp;#10;            image_left1_2.setImage(second_fruit)&amp;#10;            image_left1_2.opacity = 1&amp;#10;            image_left1_2.setAutoDraw(True)&amp;#10;        if 'image_right2_2' in locals():&amp;#10;            image_right2_2.opacity = 0&amp;#10;            image_right2_2.setAutoDraw(False)&amp;#10;    else:  # right&amp;#10;        if 'image_right2_2' in locals():&amp;#10;            image_right2_2.setImage(second_fruit)&amp;#10;            image_right2_2.opacity = 1&amp;#10;            image_right2_2.setAutoDraw(True)&amp;#10;        if 'image_left1_2' in locals():&amp;#10;            image_left1_2.opacity = 0&amp;#10;            image_left1_2.setAutoDraw(False)&amp;#10;    &amp;#10;    print(f&quot;Decision {decision_index+1}: Showing {second_fruit} on {second_side} (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(&quot;No more decision trials&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_12" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionITI2">
      <RoutineSettingsComponent name="decisionITI2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionITI2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_16" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_16" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$iti2_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_13" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="import * as random from 'random';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_question_2&quot;, locals())) {&amp;#10;    text_question_2.opacity = 0;&amp;#10;    text_question_2.setAutoDraw(false);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_left1_2&quot;, locals())) {&amp;#10;    image_left1_2.opacity = 0;&amp;#10;    image_left1_2.setAutoDraw(false);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_right2_2&quot;, locals())) {&amp;#10;    image_right2_2.opacity = 0;&amp;#10;    image_right2_2.setAutoDraw(false);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;text_16&quot;, locals())) {&amp;#10;    text_16.text = &quot;+&quot;;&amp;#10;    text_16.opacity = 1;&amp;#10;    text_16.setAutoDraw(true);&amp;#10;}&amp;#10;iti2_duration = Math.random.choice([1, 2, 3]);&amp;#10;console.log(`ITI 2: ${iti2_duration} seconds`);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# ITI 2 - Crosshair screen (random 1-3 seconds)&amp;#10;# Component: text_16 (crosshair)&amp;#10;import random&amp;#10;&amp;#10;# Hide previous text and fruits&amp;#10;if 'text_question_2' in locals():&amp;#10;    text_question_2.opacity = 0&amp;#10;    text_question_2.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_left1_2' in locals():&amp;#10;    image_left1_2.opacity = 0&amp;#10;    image_left1_2.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_right2_2' in locals():&amp;#10;    image_right2_2.opacity = 0&amp;#10;    image_right2_2.setAutoDraw(False)&amp;#10;&amp;#10;# Show crosshair&amp;#10;if 'text_16' in locals():&amp;#10;    text_16.text = &quot;+&quot;  # Crosshair symbol&amp;#10;    text_16.opacity = 1&amp;#10;    text_16.setAutoDraw(True)&amp;#10;&amp;#10;# Random duration: 1, 2, or 3 seconds&amp;#10;iti2_duration = random.choice([1, 2, 3])&amp;#10;print(f&quot;ITI 2: {iti2_duration} seconds&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_13" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionMaking">
      <RoutineSettingsComponent name="decisionMaking" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionMaking" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question_1" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question_1" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.3)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <ImageComponent name="image_left_left" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_left_left" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="image_right_right" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_right_right" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <MouseComponent name="mouse_2" plugin="None">
        <Param val="" valType="list" updates="constant" name="clickable"/>
        <Param val="" valType="list" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="any click" valType="str" updates="constant" name="forceEndRoutineOnPress"/>
        <Param val="mouse_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="constant" name="newClicksOnly"/>
        <Param val="on click" valType="str" updates="None" name="saveMouseState"/>
        <Param val="name," valType="list" updates="constant" name="saveParamsClickable"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="False" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="mouse onset" valType="str" updates="constant" name="timeRelativeTo"/>
      </MouseComponent>
      <CodeComponent name="code_14" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Decision phase - both fruits shown simultaneously (2 seconds fixed)&amp;#10;# Components: text_question_1, image_left_left, image_right_right, mouse_2&amp;#10;import time&amp;#10;&amp;#10;# Get decision_index and decision_block from globals (ensure they persist)&amp;#10;decision_index = globals().get('decision_index', 0)&amp;#10;decision_block = globals().get('decision_block', [])&amp;#10;&amp;#10;# Use modulo to cycle through decision_block if needed (for when nReps &gt; len(decision_block))&amp;#10;if decision_block:&amp;#10;    # Use modulo to cycle through trials if we need more than available&amp;#10;    trial_idx = decision_index % len(decision_block)&amp;#10;    current = decision_block[trial_idx]&amp;#10;    &amp;#10;    # IMPORTANT: Maintain the sides where each fruit appeared individually&amp;#10;    # firstFruit appeared on firstSide, secondFruit appeared on secondSide (opposite side)&amp;#10;    # They should maintain these positions when shown together&amp;#10;    first_fruit = current[&quot;firstFruit&quot;]&amp;#10;    first_side = current[&quot;firstSide&quot;]&amp;#10;    second_fruit = current[&quot;secondFruit&quot;]&amp;#10;    &amp;#10;    # Determine which fruit goes on left and which on right based on where they appeared individually&amp;#10;    # Since firstFruit and secondFruit appear on opposite sides:&amp;#10;    # - If firstFruit was on left, it stays on left; secondFruit (on right) stays on right&amp;#10;    # - If firstFruit was on right, it stays on right; secondFruit (on left) stays on left&amp;#10;    if first_side == &quot;left&quot;:&amp;#10;        leftFile = first_fruit   # firstFruit was on left, stays on left&amp;#10;        rightFile = second_fruit  # secondFruit was on right, stays on right&amp;#10;    else:  # first_side == &quot;right&quot;&amp;#10;        leftFile = second_fruit   # secondFruit was on left, stays on left&amp;#10;        rightFile = first_fruit   # firstFruit was on right, stays on right&amp;#10;    &amp;#10;    # Recalculate correct side based on actual positions&amp;#10;    # Get fruit values to determine which side is correct&amp;#10;    left_val = current.get(&quot;leftVal&quot;, 0)  # Value of fruit originally on left&amp;#10;    right_val = current.get(&quot;rightVal&quot;, 0)  # Value of fruit originally on right&amp;#10;    &amp;#10;    # But we need the values of the fruits in their actual positions&amp;#10;    # Get fruit_values dictionary to look up actual values&amp;#10;    fruit_values = globals().get('fruit_values', {})&amp;#10;    actual_left_val = fruit_values.get(leftFile, 0)&amp;#10;    actual_right_val = fruit_values.get(rightFile, 0)&amp;#10;    &amp;#10;    # Correct side is the side with the higher value fruit&amp;#10;    correct = &quot;left&quot; if actual_left_val &gt; actual_right_val else &quot;right&quot;&amp;#10;    &amp;#10;    # Store correct value in globals for use in EndRoutine&amp;#10;    globals()['decision_correct_side'] = correct&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question_1' in locals():&amp;#10;        text_question_1.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question_1.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question_1.pos = (0, 0)&amp;#10;        text_question_1.opacity = 1&amp;#10;        text_question_1.setAutoDraw(True)&amp;#10;    &amp;#10;    # Hide previous crosshair&amp;#10;    if 'text_16' in locals():&amp;#10;        text_16.opacity = 0&amp;#10;        text_16.setAutoDraw(False)&amp;#10;    &amp;#10;    # Set both images - maintain positions from individual presentations&amp;#10;    if 'image_left_left' in locals():&amp;#10;        image_left_left.setImage(leftFile)&amp;#10;        image_left_left.opacity = 1&amp;#10;        image_left_left.setAutoDraw(True)&amp;#10;    if 'image_right_right' in locals():&amp;#10;        image_right_right.setImage(rightFile)&amp;#10;        image_right_right.opacity = 1&amp;#10;        image_right_right.setAutoDraw(True)&amp;#10;    &amp;#10;    # Reset choice and start timer&amp;#10;    choice = &quot;&quot;&amp;#10;    decision_start_time = time.time()&amp;#10;    decision_timed_out = False&amp;#10;    &amp;#10;    # Store in globals for use in EachFrame&amp;#10;    globals()['choice'] = choice&amp;#10;    globals()['decision_start_time'] = decision_start_time&amp;#10;    globals()['decision_timed_out'] = False&amp;#10;    &amp;#10;    # Log decision start for data logging&amp;#10;    try:&amp;#10;        data_logger = globals().get('data_logger', None)&amp;#10;        if data_logger:&amp;#10;            data_logger.start_decision(decision_start_time)&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Clear any key presses from previous routines ONCE at the start&amp;#10;    # This prevents keys pressed during decisionStimulus1/2 or ITIs from being registered here&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;        print(f&quot;Cleared key buffer at decision start&quot;)&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Set a small ignore window to prevent immediate key registration (0.1 seconds)&amp;#10;    # This ensures keys pressed right before this routine started are ignored&amp;#10;    ignore_keys_until = decision_start_time + 0.1&amp;#10;    globals()['ignore_keys_until'] = ignore_keys_until&amp;#10;    &amp;#10;    if 'mouse_2' in locals():&amp;#10;        mouse_2.clickReset()&amp;#10;    &amp;#10;    # Debug: Show which fruits appeared where individually&amp;#10;    print(f&quot;Decision {decision_index+1}: {first_fruit} (was on {first_side}) vs {second_fruit} (was on {second_side})&quot;)&amp;#10;    print(f&quot;  Final positions: {leftFile} (left) vs {rightFile} (right), correct={correct}&quot;)&amp;#10;else:&amp;#10;    # No more decision trials&amp;#10;    leftFile = &quot;images/blank.png&quot;&amp;#10;    rightFile = &quot;images/blank.png&quot;&amp;#10;    choice = &quot;&quot;&amp;#10;    print(&quot;No more decision trials available&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Decision phase - check for response&amp;#10;# Using keys 1/3: 1 = left image, 3 = right image&amp;#10;import time&amp;#10;&amp;#10;# Get decision_index from globals (needed for logging)&amp;#10;decision_index = globals().get('decision_index', 0)&amp;#10;&amp;#10;# Get decision_start_time and ignore_keys_until from globals (set in BeginRoutine)&amp;#10;decision_start_time = globals().get('decision_start_time', time.time())&amp;#10;ignore_keys_until = globals().get('ignore_keys_until', decision_start_time + 0.1)&amp;#10;&amp;#10;# Initialize decision_timed_out if not already set&amp;#10;decision_timed_out = globals().get('decision_timed_out', False)&amp;#10;&amp;#10;# Get the actual timeout duration from configuration (set in startTaskBeginExperiment.py)&amp;#10;# This is configurable via DECISION_TIMEOUT_DURATION global variable&amp;#10;decision_timeout_duration = globals().get('DECISION_TIMEOUT_DURATION', 4.0)&amp;#10;try:&amp;#10;    # Also try to get from routine duration if available (for Builder compatibility)&amp;#10;    if 'decisionMaking' in locals():&amp;#10;        if hasattr(decisionMaking, 'duration'):&amp;#10;            routine_duration = float(decisionMaking.duration)&amp;#10;            if routine_duration &gt; 0:&amp;#10;                decision_timeout_duration = routine_duration&amp;#10;        elif hasattr(decisionMaking, 'stopVal'):&amp;#10;            routine_duration = float(decisionMaking.stopVal)&amp;#10;            if routine_duration &gt; 0:&amp;#10;                decision_timeout_duration = routine_duration&amp;#10;except:&amp;#10;    # Use configured default&amp;#10;    pass&amp;#10;&amp;#10;# Store in globals for use in EndRoutine&amp;#10;globals()['decision_timeout_duration'] = decision_timeout_duration&amp;#10;&amp;#10;# Check for timeout (use actual duration from Builder, not hardcoded 2.0)&amp;#10;try:&amp;#10;    elapsed_time = time.time() - decision_start_time&amp;#10;    &amp;#10;    if elapsed_time &gt;= decision_timeout_duration:&amp;#10;        # Timeout - no response (routine will end at the actual timeout duration)&amp;#10;        if not globals().get('choice', &quot;&quot;):&amp;#10;            choice = &quot;&quot;&amp;#10;            decision_rt = decision_timeout_duration  # Use actual timeout duration, not hardcoded 2.0&amp;#10;            decision_timed_out = True&amp;#10;            # Store in globals for EndRoutine&amp;#10;            globals()['decision_timed_out'] = True&amp;#10;            globals()['decision_rt'] = decision_timeout_duration&amp;#10;            print(f&quot;Decision {decision_index+1}: No response within {decision_timeout_duration:.1f} seconds&quot;)&amp;#10;        continueRoutine = False&amp;#10;except:&amp;#10;    decision_timed_out = False&amp;#10;&amp;#10;# Only check for keys if we're past the ignore window AND not timed out&amp;#10;if not decision_timed_out:&amp;#10;    current_time = time.time()&amp;#10;    if current_time &gt;= ignore_keys_until:&amp;#10;        # Check for keyboard input (keys 1 or 3)&amp;#10;        try:&amp;#10;            keys = event.getKeys(keyList=['1', '3', 'num_1', 'num_3'])&amp;#10;            for key in keys:&amp;#10;                # Normalize key names (handle both '1' and 'num_1' formats)&amp;#10;                if key == 'num_1' or key == '1':&amp;#10;                    # Key 1: Choose left image&amp;#10;                    choice = &quot;left&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    # Store in globals&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Decision {decision_index+1}: Chose left (key 1, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                    # Clear events after processing&amp;#10;                    try:&amp;#10;                        event.clearEvents()&amp;#10;                    except:&amp;#10;                        pass&amp;#10;                    break&amp;#10;                elif key == 'num_3' or key == '3':&amp;#10;                    # Key 3: Choose right image&amp;#10;                    choice = &quot;right&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    # Store in globals&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Decision {decision_index+1}: Chose right (key 3, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                    # Clear events after processing&amp;#10;                    try:&amp;#10;                        event.clearEvents()&amp;#10;                    except:&amp;#10;                        pass&amp;#10;                    break&amp;#10;        except (NameError, AttributeError):&amp;#10;            # Fallback: Check for mouse click (using mouse_2 and correct image components)&amp;#10;            if 'mouse_2' in locals() and 'image_left_left' in locals() and 'image_right_right' in locals():&amp;#10;                if mouse_2.isPressedIn(image_left_left):&amp;#10;                    choice = &quot;left&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Decision {decision_index+1}: Chose left (mouse, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                elif mouse_2.isPressedIn(image_right_right):&amp;#10;                    choice = &quot;right&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Decision {decision_index+1}: Chose right (mouse, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Get decision_index and decision_block from globals&amp;#10;decision_index = globals().get('decision_index', 0)&amp;#10;decision_block = globals().get('decision_block', [])&amp;#10;&amp;#10;# Get choice, decision_rt, and decision_timed_out from globals (set in EachFrame)&amp;#10;choice = globals().get('choice', &quot;&quot;)&amp;#10;# Get timeout duration from globals (set in EachFrame) or use default&amp;#10;decision_timeout_duration = globals().get('decision_timeout_duration', 4.0)&amp;#10;decision_rt = globals().get('decision_rt', decision_timeout_duration)  # Default to timeout duration if not set&amp;#10;decision_timed_out = globals().get('decision_timed_out', False)&amp;#10;&amp;#10;# Get leftFile and rightFile from current trial&amp;#10;if decision_block:&amp;#10;    trial_idx = decision_index % len(decision_block)&amp;#10;    current = decision_block[trial_idx]&amp;#10;    # Get actual left/right files from BeginRoutine (which maintains positions from individual presentations)&amp;#10;    # But we need to recalculate them here too, or get from globals&amp;#10;    firstFile = current.get(&quot;firstFruit&quot;, &quot;&quot;)&amp;#10;    firstSide = current.get(&quot;firstSide&quot;, &quot;&quot;)&amp;#10;    secondFruit = current.get(&quot;secondFruit&quot;, &quot;&quot;)&amp;#10;    &amp;#10;    # Recalculate leftFile and rightFile based on where fruits appeared individually&amp;#10;    if firstSide == &quot;left&quot;:&amp;#10;        leftFile = firstFile&amp;#10;        rightFile = secondFruit&amp;#10;    else:  # firstSide == &quot;right&quot;&amp;#10;        leftFile = secondFruit&amp;#10;        rightFile = firstFile&amp;#10;    &amp;#10;    # Get correct side from globals (recalculated in BeginRoutine based on actual positions)&amp;#10;    correct = globals().get('decision_correct_side', current.get(&quot;correct&quot;, &quot;&quot;))&amp;#10;else:&amp;#10;    leftFile = &quot;images/blank.png&quot;&amp;#10;    rightFile = &quot;images/blank.png&quot;&amp;#10;    firstFile = &quot;&quot;&amp;#10;    firstSide = &quot;&quot;&amp;#10;    correct = &quot;&quot;&amp;#10;&amp;#10;# Determine correctness&amp;#10;was_correct = (choice == correct) if choice else False&amp;#10;&amp;#10;# Convert reaction time to milliseconds&amp;#10;# If timed out and RT wasn't set, use the timeout duration&amp;#10;if decision_timed_out and (decision_rt is None or decision_rt == 0):&amp;#10;    decision_rt_value = decision_timeout_duration&amp;#10;else:&amp;#10;    decision_rt_value = decision_rt if decision_rt is not None else decision_timeout_duration&amp;#10;decision_rt_ms = int(decision_rt_value * 1000)&amp;#10;&amp;#10;# Calculate timeout duration for timeout screen (1.5 seconds if timed out, 0 otherwise)&amp;#10;decision_timeout_duration = 1.5 if decision_timed_out else 0.0&amp;#10;globals()['decision_timeout_duration'] = decision_timeout_duration&amp;#10;print(f&quot;DEBUG decisionMakingEndRoutine: decision_timed_out={decision_timed_out}, decision_timeout_duration={decision_timeout_duration}&quot;)&amp;#10;&amp;#10;# Log the decision data&amp;#10;thisExp.addData(&quot;decision_trial&quot;, decision_index + 1)&amp;#10;thisExp.addData(&quot;leftFruit&quot;, leftFile)&amp;#10;thisExp.addData(&quot;rightFruit&quot;, rightFile)&amp;#10;thisExp.addData(&quot;firstFruit&quot;, firstFile if firstFile else &quot;&quot;)&amp;#10;thisExp.addData(&quot;firstSide&quot;, firstSide if firstSide else &quot;&quot;)&amp;#10;thisExp.addData(&quot;choice&quot;, choice)&amp;#10;thisExp.addData(&quot;correctSide&quot;, correct)&amp;#10;thisExp.addData(&quot;was_correct&quot;, was_correct)&amp;#10;thisExp.addData(&quot;decision_rt&quot;, decision_rt_value)&amp;#10;thisExp.addData(&quot;decision_timed_out&quot;, decision_timed_out)&amp;#10;thisExp.addData(&quot;decision_timeout_duration&quot;, decision_timeout_duration)&amp;#10;&amp;#10;# Log decision trial to CSV&amp;#10;try:&amp;#10;    # Extract fruit names from file paths&amp;#10;    # Use string operations instead of os.path for PsychoPy compatibility&amp;#10;    if leftFile:&amp;#10;        left_fruit_name = str(leftFile).replace('\\', '/').split('/')[-1].replace('.png', '')&amp;#10;    else:&amp;#10;        left_fruit_name = &quot;unknown&quot;&amp;#10;    &amp;#10;    if rightFile:&amp;#10;        right_fruit_name = str(rightFile).replace('\\', '/').split('/')[-1].replace('.png', '')&amp;#10;    else:&amp;#10;        right_fruit_name = &quot;unknown&quot;&amp;#10;    &amp;#10;    # Get fruit numerical IDs&amp;#10;    fruit_to_num = globals().get('fruit_to_num', {})&amp;#10;    left_stimulus_num = fruit_to_num.get(left_fruit_name, 0)&amp;#10;    right_stimulus_num = fruit_to_num.get(right_fruit_name, 0)&amp;#10;    &amp;#10;    # Get fruit average points (baselines)&amp;#10;    # We need to get these from the fruit_values or decision_block&amp;#10;    decision_block = globals().get('decision_block', [])&amp;#10;    left_avg = 0&amp;#10;    right_avg = 0&amp;#10;    if decision_block:&amp;#10;        # Use modulo to get the correct trial (cycles if needed)&amp;#10;        trial_idx = decision_index % len(decision_block)&amp;#10;        current = decision_block[trial_idx]&amp;#10;        left_avg = current.get('leftVal', 0)&amp;#10;        right_avg = current.get('rightVal', 0)&amp;#10;    &amp;#10;    # Extract first fruit information&amp;#10;    if firstFile:&amp;#10;        first_fruit_name = str(firstFile).replace('\\', '/').split('/')[-1].replace('.png', '')&amp;#10;    else:&amp;#10;        first_fruit_name = &quot;unknown&quot;&amp;#10;    first_side_value = firstSide if firstSide else &quot;&quot;&amp;#10;    &amp;#10;    # Determine block ID (1=before showing points explicitly, 2=after showing points explicitly)&amp;#10;    # For now, we'll use 1 as default (you can modify this based on your experiment structure)&amp;#10;    block_id = 1  # TODO: Update this based on your experiment structure&amp;#10;    block_name = &quot;implicit&quot;  # TODO: Update this based on your experiment structure&amp;#10;    &amp;#10;    # Determine choice as numerical ID (left_stimulus_num or right_stimulus_num)&amp;#10;    # The choice should be the numerical ID of the chosen fruit&amp;#10;    choice_num = left_stimulus_num if choice == &quot;left&quot; else (right_stimulus_num if choice == &quot;right&quot; else &quot;&quot;)&amp;#10;    &amp;#10;    # Get data logger and log decision&amp;#10;    data_logger = globals().get('data_logger', None)&amp;#10;    if data_logger:&amp;#10;        data_logger.log_decision_trial(&amp;#10;            trial_num=decision_index + 1,&amp;#10;            block_id=block_id,&amp;#10;            block_name=block_name,&amp;#10;            first_stimulus_id=first_fruit_name,&amp;#10;            first_stimulus_side=first_side_value,&amp;#10;            left_stimulus_id=left_fruit_name,&amp;#10;            right_stimulus_id=right_fruit_name,&amp;#10;            left_stimulus_num=left_stimulus_num,&amp;#10;            right_stimulus_num=right_stimulus_num,&amp;#10;            left_avg_points=left_avg,&amp;#10;            right_avg_points=right_avg,&amp;#10;            choice=choice_num if choice_num else &quot;&quot;,&amp;#10;            reaction_time_ms=decision_rt_ms&amp;#10;        )&amp;#10;except Exception as e:&amp;#10;    print(f&quot;Error logging decision data: {e}&quot;)&amp;#10;&amp;#10;# Calculate ITI 3 duration (crosshair after decision)&amp;#10;# Logic: timeout (1.5s) + crosshair should total 2/3/4s (same as learning)&amp;#10;# So: crosshair_duration = rand(2,3,4) - timeout_screen_duration&amp;#10;# This ensures timeout + crosshair = 2/3/4s total&amp;#10;# Set this BEFORE decisionITI3 routine starts so it's available for Builder duration&amp;#10;import random&amp;#10;response_time = decision_rt_value&amp;#10;timeout_screen_duration = globals().get('TIMEOUT_SCREEN_DURATION', 1.5)  # 1.5s timeout screen&amp;#10;crosshair_total_values = [2, 3, 4]  # Total duration (timeout + crosshair)&amp;#10;rand_crosshair_total = random.choice(crosshair_total_values)&amp;#10;&amp;#10;if decision_timed_out:&amp;#10;    # If timed out: crosshair_duration = (2/3/4) - timeout_screen_duration&amp;#10;    # This ensures timeout (1.5s) + crosshair = 2/3/4s total&amp;#10;    iti3_duration = max(0, rand_crosshair_total - timeout_screen_duration)&amp;#10;    print(f&quot;ITI 3 (timeout case): crosshair = {rand_crosshair_total} - {timeout_screen_duration} = {iti3_duration:.2f}s (total: {rand_crosshair_total}s)&quot;)&amp;#10;else:&amp;#10;    # Normal case: (base_duration - response_time) + rand(1,2,3)&amp;#10;    # Base duration should match the decision timeout duration&amp;#10;    base_duration = decision_timeout_duration&amp;#10;    rand3 = random.choice([1, 2, 3])&amp;#10;    iti3_duration = (base_duration - response_time) + rand3&amp;#10;    print(f&quot;ITI 3 (normal case): ({base_duration} - {response_time:.2f}) + {rand3} = {iti3_duration:.2f}s&quot;)&amp;#10;&amp;#10;# Ensure iti3_duration is in globals so Builder can access it&amp;#10;if 'iti3_duration' not in globals():&amp;#10;    globals()['iti3_duration'] = iti3_duration&amp;#10;&amp;#10;print(f&quot;ITI 3: (2 - {response_time:.2f}) + {rand3} = {iti3_duration:.2f} seconds (timeout: {decision_timed_out})&quot;)&amp;#10;&amp;#10;# Log ITI durations&amp;#10;iti1_duration = globals().get('iti1_duration', 0)&amp;#10;iti2_duration = globals().get('iti2_duration', 0)&amp;#10;thisExp.addData(&quot;iti1_duration&quot;, iti1_duration)&amp;#10;thisExp.addData(&quot;iti2_duration&quot;, iti2_duration)&amp;#10;thisExp.addData(&quot;iti3_duration&quot;, iti3_duration)&amp;#10;thisExp.addData(&quot;decision_response_time&quot;, response_time)&amp;#10;&amp;#10;print(f&quot;Decision {decision_index + 1}: {choice} (correct: {correct}, accurate: {was_correct}, RT: {response_time:.2f}s, timed_out: {decision_timed_out})&quot;)&amp;#10;print(f&quot;Decision EndRoutine: RT={decision_rt_value:.3f}s={decision_rt_ms}ms, responded_in_time={not decision_timed_out}, timed_out={decision_timed_out}&quot;)&amp;#10;&amp;#10;# Move to next trial&amp;#10;decision_index += 1&amp;#10;# Store in globals to ensure it persists&amp;#10;globals()['decision_index'] = decision_index&amp;#10;&amp;#10;# Check if we're done with decision trials&amp;#10;# IMPORTANT: Let PsychoPy loop's nReps control when to stop&amp;#10;# Only end the loop if we've reached the loop's nReps OR run out of decision_block trials&amp;#10;decision_block = globals().get('decision_block', [])&amp;#10;total_decision_trials = len(decision_block)&amp;#10;&amp;#10;# Get loop nReps to determine when to stop&amp;#10;loop_nReps = None&amp;#10;try:&amp;#10;    if 'currentLoop' in locals() and hasattr(currentLoop, 'nReps') and currentLoop.nReps:&amp;#10;        loop_nReps = int(currentLoop.nReps)&amp;#10;    elif 'decisionLoop' in globals() and hasattr(decisionLoop, 'nReps') and decisionLoop.nReps:&amp;#10;        loop_nReps = int(decisionLoop.nReps)&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Only end loop if we've reached nReps OR run out of decision_block trials&amp;#10;# Don't end prematurely - let the loop run for nReps iterations&amp;#10;should_end = False&amp;#10;if loop_nReps is not None:&amp;#10;    # End when we've completed the number of trials specified by nReps&amp;#10;    if decision_index &gt;= loop_nReps:&amp;#10;        print(f&quot;Decision loop complete: {decision_index}/{loop_nReps} trials completed (nReps reached)&quot;)&amp;#10;        should_end = True&amp;#10;    elif decision_index &gt;= total_decision_trials:&amp;#10;        # Ran out of decision_block trials before reaching nReps&amp;#10;        print(f&quot;WARNING: Ran out of decision_block trials ({total_decision_trials}) before reaching nReps ({loop_nReps})&quot;)&amp;#10;        should_end = True&amp;#10;else:&amp;#10;    # Fallback: check against decision_block length if nReps not available&amp;#10;    if decision_index &gt;= total_decision_trials:&amp;#10;        print(f&quot;All decision_block trials complete ({total_decision_trials} trials)&quot;)&amp;#10;        should_end = True&amp;#10;&amp;#10;# Only end and save if we should&amp;#10;if should_end:&amp;#10;    # Save decision data before ending&amp;#10;    try:&amp;#10;        data_logger = globals().get('data_logger', None)&amp;#10;        if data_logger:&amp;#10;            block_num = 3  # TODO: Update based on your experiment structure&amp;#10;            block_name = &quot;implicit&quot;  # TODO: Update based on your experiment structure&amp;#10;            data_logger.save_decision_data(block_num=block_num, block_name=block_name)&amp;#10;    except Exception as e:&amp;#10;        print(f&quot;Error saving decision data: {e}&quot;)&amp;#10;    &amp;#10;    # Only end the loop if we should&amp;#10;    if 'decisionLoop' in locals():&amp;#10;        decisionLoop.finished = True&amp;#10;    elif 'currentLoop' in locals():&amp;#10;        currentLoop.finished = True&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_14" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="decisionITI3">
      <RoutineSettingsComponent name="decisionITI3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionITI3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_17" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_17" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$iti3_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_15" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# ITI 3 - Crosshair screen (duration: (2 - response_time) + rand(1,2,3))&amp;#10;# Component: text_17 (crosshair)&amp;#10;# Duration is calculated in decisionMakingEndRoutine as iti3_duration&amp;#10;&amp;#10;# Make sure iti3_duration exists (should be set in decisionMakingEndRoutine)&amp;#10;# If for some reason it doesn't exist, use a default&amp;#10;if 'iti3_duration' not in locals() and 'iti3_duration' not in globals():&amp;#10;    import random&amp;#10;    iti3_duration = random.choice([1, 2, 3]) + 1.0  # Default fallback&amp;#10;    print(&quot;WARNING: iti3_duration not found, using default&quot;)&amp;#10;&amp;#10;# Ensure it's available in globals for Builder&amp;#10;if 'iti3_duration' in locals():&amp;#10;    globals()['iti3_duration'] = iti3_duration&amp;#10;&amp;#10;# Hide previous text and fruits&amp;#10;if 'text_question_1' in locals():&amp;#10;    text_question_1.opacity = 0&amp;#10;    text_question_1.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_left_left' in locals():&amp;#10;    image_left_left.opacity = 0&amp;#10;    image_left_left.setAutoDraw(False)&amp;#10;&amp;#10;if 'image_right_right' in locals():&amp;#10;    image_right_right.opacity = 0&amp;#10;    image_right_right.setAutoDraw(False)&amp;#10;&amp;#10;# Show crosshair&amp;#10;if 'text_17' in locals():&amp;#10;    text_17.text = &quot;+&quot;  # Crosshair symbol&amp;#10;    text_17.opacity = 1&amp;#10;    text_17.setAutoDraw(True)&amp;#10;&amp;#10;print(f&quot;Showing ITI 3 crosshair (duration: {iti3_duration if 'iti3_duration' in locals() or 'iti3_duration' in globals() else 'unknown'}s)&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_15" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="newInstruction">
      <RoutineSettingsComponent name="newInstruction" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="newInstruction" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_18" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_18" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Any text&amp;#10;&amp;#10;including line breaks" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_7" plugin="None">
        <Param val="'space'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_7" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="keyInstructions">
      <RoutineSettingsComponent name="keyInstructions" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="keyInstructions" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_20" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_20" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Pressing &quot;1&quot; will shift the slider value leftwards by a value of 5. Pressing &quot;3&quot; will shift the slider value rightwards, also by a value of 5. &amp;#10;&amp;#10;Pressing &quot;2&quot; will confirm your answer.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_19" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_19" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="blockTransition">
      <RoutineSettingsComponent name="blockTransition" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="blockTransition" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_block_transition" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_block_transition" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_transition" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_transition" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <CodeComponent name="code_16" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Block transition screen - shown between first and second block&amp;#10;# Shows &quot;You completed the first block. Press C to move on to next block.&quot;&amp;#10;&amp;#10;# Check if we should show this screen (only after first block completes, and only once)&amp;#10;show_block_transition = globals().get('show_block_transition', False)&amp;#10;ready_for_block2_setup = globals().get('ready_for_block2_setup', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Only show if:&amp;#10;# 1. Flag is set to True&amp;#10;# 2. Block 2 setup hasn't been completed yet (ready_for_block2_setup = False)&amp;#10;# 3. We're still in or just finished the first block (learning_block_index &lt; trials_per_block)&amp;#10;if not show_block_transition or ready_for_block2_setup or learning_block_index &gt;= trials_per_block:&amp;#10;    # Don't show transition screen - skip this routine&amp;#10;    if not show_block_transition:&amp;#10;        print(&quot;Skipping block transition screen (flag not set)&quot;)&amp;#10;    elif ready_for_block2_setup:&amp;#10;        print(&quot;Skipping block transition screen (block 2 setup already completed)&quot;)&amp;#10;    elif learning_block_index &gt;= trials_per_block:&amp;#10;        print(f&quot;Skipping block transition screen (already past first block: index={learning_block_index}, trials_per_block={trials_per_block})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Show the transition screen&amp;#10;    transitionText = &quot;You completed the first block.\n\nPress C to move on to next block.&quot;&amp;#10;    &amp;#10;    # Set the text component (make sure component name matches your Builder setup)&amp;#10;    if 'text_block_transition' in locals():&amp;#10;        text_block_transition.text = transitionText&amp;#10;        text_block_transition.opacity = 1&amp;#10;        text_block_transition.setAutoDraw(True)&amp;#10;        print(&quot;Showing block transition screen&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_block_transition component not found!&quot;)&amp;#10;    &amp;#10;    # Clear any previous key presses IMMEDIATELY to prevent carryover&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;        # Also clear any keyboard component buffers&amp;#10;        if 'key_resp_transition' in locals() and hasattr(key_resp_transition, 'keys'):&amp;#10;            key_resp_transition.keys = []&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Set a timestamp to ignore any keys pressed before this routine started&amp;#10;    import time&amp;#10;    globals()['block_transition_start_time'] = time.time()&amp;#10;    print(f&quot;Block transition: Routine started at {globals()['block_transition_start_time']}, cleared key buffer&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Block transition screen - wait for key press 2 to continue&amp;#10;&amp;#10;# Only show if flag is set (double-check)&amp;#10;show_block_transition = globals().get('show_block_transition', False)&amp;#10;if not show_block_transition:&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Check for key press 2 (or num_2)&amp;#10;    # Only accept keys pressed AFTER this routine started (ignore carryover)&amp;#10;    import time&amp;#10;    routine_start_time = globals().get('block_transition_start_time', time.time())&amp;#10;    current_time = time.time()&amp;#10;    &amp;#10;    # Only process keys if at least 0.1 seconds have passed since routine started&amp;#10;    # This prevents using keys that were pressed before the routine started&amp;#10;    if current_time - routine_start_time &gt;= 0.1:&amp;#10;        try:&amp;#10;            keys = event.getKeys(keyList=['2', 'num_2'])&amp;#10;            if '2' in keys or 'num_2' in keys:&amp;#10;                # User pressed 2, continue to next block&amp;#10;                print(&quot;Key 2 pressed - moving to next block&quot;)&amp;#10;                # Reset the flag so it doesn't show again&amp;#10;                globals()['show_block_transition'] = False&amp;#10;                # Set flag to indicate we're ready for block 2 setup&amp;#10;                globals()['ready_for_block2_setup'] = True&amp;#10;                print(f&quot;DEBUG: Set ready_for_block2_setup = True&quot;)&amp;#10;                continueRoutine = False&amp;#10;                event.clearEvents()&amp;#10;        except (NameError, AttributeError):&amp;#10;            # Fallback: check keyboard component if event.getKeys doesn't work&amp;#10;            if 'key_resp_transition' in locals() and hasattr(key_resp_transition, 'keys'):&amp;#10;                if key_resp_transition.keys and len(key_resp_transition.keys) &gt; 0:&amp;#10;                    key = key_resp_transition.keys[0]&amp;#10;                    if key == '2' or key == 'num_2':&amp;#10;                        print(&quot;Key 2 pressed (via keyboard component) - moving to next block&quot;)&amp;#10;                        # Reset the flag so it doesn't show again&amp;#10;                        globals()['show_block_transition'] = False&amp;#10;                        # Set flag to indicate we're ready for block 2 setup&amp;#10;                        globals()['ready_for_block2_setup'] = True&amp;#10;                        print(f&quot;DEBUG: Set ready_for_block2_setup = True (keyboard component)&quot;)&amp;#10;                        continueRoutine = False&amp;#10;                        key_resp_transition.keys = []&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide block transition text when routine ends&amp;#10;if 'text_block_transition' in locals():&amp;#10;    text_block_transition.setAutoDraw(False)&amp;#10;    text_block_transition.opacity = 0&amp;#10;    print(&quot;Block transition text hidden&quot;)&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# IMPORTANT: Reset the show_block_transition flag to False so it doesn't show again&amp;#10;# This ensures it only shows once after the first block&amp;#10;globals()['show_block_transition'] = False&amp;#10;&amp;#10;# Ensure the flag is set correctly&amp;#10;globals()['ready_for_block2_setup'] = True&amp;#10;print(&quot;Block transition ended, ready for block 2 setup&quot;)&amp;#10;print(&quot;  - show_block_transition set to False (will not show again)&quot;)&amp;#10;print(&quot;  - ready_for_block2_setup set to True&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_16" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="thankYou">
      <RoutineSettingsComponent name="thankYou" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="thankYou" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_11" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_11" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="You completed the experiment!&amp;#10;&amp;#10;Thank you for participating!&amp;#10;&amp;#10;Press C to end." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_8" plugin="None">
        <Param val="'c', 'C'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_8" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="decisionTimeout">
      <RoutineSettingsComponent name="decisionTimeout" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="decisionTimeout" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$decision_timeout_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_decision_timeout" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_decision_timeout" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$decision_timeout_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Time out" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_17" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Decision timeout screen - shows &quot;Time out&quot; message&amp;#10;# Duration is exactly 1.5 seconds (set in Builder or dynamically)&amp;#10;# Only show if decision_timeout_duration &gt; 0&amp;#10;&amp;#10;decision_timeout_duration = globals().get('decision_timeout_duration', 0)&amp;#10;decision_timed_out = globals().get('decision_timed_out', False)&amp;#10;&amp;#10;# DEBUG: Print timeout status&amp;#10;print(f&quot;DEBUG decisionTimeout: decision_timeout_duration={decision_timeout_duration}, decision_timed_out={decision_timed_out}&quot;)&amp;#10;&amp;#10;if decision_timeout_duration &gt; 0:&amp;#10;    if 'text_decision_timeout' in locals():&amp;#10;        text_decision_timeout.text = &quot;Time out&quot;&amp;#10;        text_decision_timeout.opacity = 1&amp;#10;        text_decision_timeout.setAutoDraw(True)&amp;#10;        print(&quot;Showing decision timeout screen (1.5 seconds)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_decision_timeout component not found!&quot;)&amp;#10;else:&amp;#10;    # No timeout - skip this screen (duration should be 0)&amp;#10;    print(&quot;Skipping decision timeout screen (no timeout occurred, decision_timeout_duration=0)&quot;)&amp;#10;    if 'text_decision_timeout' in locals():&amp;#10;        text_decision_timeout.opacity = 0&amp;#10;        text_decision_timeout.setAutoDraw(False)&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Decision timeout screen - just displays &quot;Time out&quot; message, no interaction needed&amp;#10;# The duration is controlled by decision_timeout_duration (1.5 seconds if timeout occurred, 0 otherwise)&amp;#10;&amp;#10;# Double-check that we should be showing this (safety check)&amp;#10;decision_timeout_duration = globals().get('decision_timeout_duration', 0)&amp;#10;if decision_timeout_duration &lt;= 0:&amp;#10;    # Shouldn't be showing - skip&amp;#10;    continueRoutine = False&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide timeout text&amp;#10;if 'text_decision_timeout' in locals():&amp;#10;    text_decision_timeout.setAutoDraw(False)&amp;#10;    text_decision_timeout.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_17" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="scannerWait">
      <RoutineSettingsComponent name="scannerWait" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerWait" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="waitImage" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/randomImage.jpg" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="waitImage" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 1)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
    </Routine>
    <Routine name="practiceIntro">
      <RoutineSettingsComponent name="practiceIntro" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceIntro" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_18" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;text_practice_intro&quot;, locals())) {&amp;#10;    text_practice_intro.text = &quot;We will run a short practice task now. Press 2 to continue&quot;;&amp;#10;    text_practice_intro.opacity = 1;&amp;#10;    text_practice_intro.setAutoDraw(true);&amp;#10;    console.log(&quot;Practice introduction screen displayed&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_practice_intro component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice introduction screen&amp;#10;# Shows &quot;We will run a short practice task now. Press 2 to continue&quot;&amp;#10;# Component: text_practice_intro (or similar text component)&amp;#10;&amp;#10;# Clear any previous key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Display practice introduction text&amp;#10;if 'text_practice_intro' in locals():&amp;#10;    text_practice_intro.text = &quot;We will run a short practice task now. Press C to continue&quot;&amp;#10;    text_practice_intro.opacity = 1&amp;#10;    text_practice_intro.setAutoDraw(True)&amp;#10;    print(&quot;Practice introduction screen displayed&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_practice_intro component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice introduction - wait for key press '2' to continue&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['2', 'num_2'])&amp;#10;    if keys:&amp;#10;        # Key 2 pressed - continue to practice trials&amp;#10;        print(&quot;Practice introduction: Key 2 pressed, continuing to practice trials&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide practice introduction text&amp;#10;if 'text_practice_intro' in locals():&amp;#10;    text_practice_intro.setAutoDraw(False)&amp;#10;    text_practice_intro.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_18" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_practice_intro" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_practice_intro" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="We will run a short practice test now. Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_9" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_9" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="practiceTrial">
      <RoutineSettingsComponent name="practiceTrial" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceTrial" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_19" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="import * as time from 'time';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;practice_block_index = globals().get(&quot;practice_block_index&quot;, (- 1));&amp;#10;practice_block_index += 1;&amp;#10;globals()[&quot;practice_block_index&quot;] = practice_block_index;&amp;#10;practice_block = globals().get(&quot;practice_block&quot;, []);&amp;#10;if (((practice_block_index &gt;= 0) &amp;&amp; (practice_block_index &lt; practice_block.length))) {&amp;#10;    current = practice_block[practice_block_index];&amp;#10;    fruitFile = current[&quot;fruit&quot;];&amp;#10;    trueVal = current[&quot;true_value&quot;];&amp;#10;    baselineR = current[&quot;baseline&quot;];&amp;#10;    blockType = current[&quot;block&quot;];&amp;#10;    idx = (practice_block_index + 1);&amp;#10;    console.log(`Practice trial ${idx}/3: ${fruitFile}, value=${trueVal}`);&amp;#10;} else {&amp;#10;    fruitFile = &quot;images/blank.png&quot;;&amp;#10;    trueVal = 0;&amp;#10;    baselineR = 0;&amp;#10;    blockType = &quot;practice&quot;;&amp;#10;    idx = 0;&amp;#10;    console.log(`WARNING: Practice trial ${practice_block_index} out of range`);&amp;#10;}&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_3&quot;, locals())) {&amp;#10;    image_3.opacity = 0;&amp;#10;    image_3.setImage(&quot;images/blank.png&quot;);&amp;#10;    image_3.setImage(fruitFile);&amp;#10;    image_3.opacity = 1;&amp;#10;    console.log(`Practice trial: Set image to ${fruitFile}`);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;slider&quot;, locals())) {&amp;#10;    slider.reset();&amp;#10;    slider.setRating(0);&amp;#10;    console.log(&quot;Practice trial: Slider reset to 0&quot;);&amp;#10;}&amp;#10;trial_start_time = time.time();&amp;#10;response_time = null;&amp;#10;trial_timed_out = false;&amp;#10;responded_in_time = false;&amp;#10;globals()[&quot;trial_start_time&quot;] = trial_start_time;&amp;#10;globals()[&quot;response_time&quot;] = null;&amp;#10;globals()[&quot;trial_timed_out&quot;] = false;&amp;#10;globals()[&quot;responded_in_time&quot;] = false;&amp;#10;globals()[&quot;PRACTICE_TIMEOUT_SECONDS&quot;] = 6.0;&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice trial - similar to regular trial but with shorter durations&amp;#10;# Get practice_block_index from globals (or initialize if first practice trial)&amp;#10;practice_block_index = globals().get('practice_block_index', -1)&amp;#10;practice_block_index += 1&amp;#10;globals()['practice_block_index'] = practice_block_index&amp;#10;&amp;#10;# Get practice_block from globals&amp;#10;practice_block = globals().get('practice_block', [])&amp;#10;&amp;#10;# Debug: Print practice block info&amp;#10;print(f&quot;DEBUG: practice_block_index={practice_block_index}, practice_block length={len(practice_block)}&quot;)&amp;#10;if practice_block:&amp;#10;    print(f&quot;DEBUG: practice_block contents: {[t['fruit'] for t in practice_block]}&quot;)&amp;#10;else:&amp;#10;    print(&quot;ERROR: practice_block is empty! Creating fallback practice block.&quot;)&amp;#10;    # Fallback: Create a simple practice block if it doesn't exist&amp;#10;    image_dir = &quot;images/&quot;&amp;#10;    practice_block = [&amp;#10;        {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: image_dir + &quot;dog.png&quot;, &quot;baseline&quot;: 50, &quot;true_value&quot;: 30},&amp;#10;        {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: image_dir + &quot;cat.png&quot;, &quot;baseline&quot;: -50, &quot;true_value&quot;: -30},&amp;#10;        {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: image_dir + &quot;rabbit.png&quot;, &quot;baseline&quot;: 50, &quot;true_value&quot;: 50}&amp;#10;    ]&amp;#10;    globals()['practice_block'] = practice_block&amp;#10;    print(f&quot;Created fallback practice block with {len(practice_block)} trials&quot;)&amp;#10;&amp;#10;# Get current practice trial&amp;#10;if practice_block and len(practice_block) &gt; 0 and practice_block_index &gt;= 0 and practice_block_index &lt; len(practice_block):&amp;#10;    current = practice_block[practice_block_index]&amp;#10;    fruitFile = current[&quot;fruit&quot;]&amp;#10;    trueVal = current[&quot;true_value&quot;]&amp;#10;    baselineR = current[&quot;baseline&quot;]&amp;#10;    blockType = current[&quot;block&quot;]&amp;#10;    idx = practice_block_index + 1&amp;#10;    print(f&quot;Practice trial {idx}/3: {fruitFile}, value={trueVal}&quot;)&amp;#10;else:&amp;#10;    # Fallback - use blank&amp;#10;    fruitFile = &quot;images/blank.png&quot;&amp;#10;    trueVal = 0&amp;#10;    baselineR = 0&amp;#10;    blockType = &quot;practice&quot;&amp;#10;    idx = 0&amp;#10;    print(f&quot;WARNING: Practice trial {practice_block_index} out of range&quot;)&amp;#10;&amp;#10;# Clear any keys from previous routines&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Set the fruit image - initialize it properly to avoid tStartRefresh None error&amp;#10;# This matches the regular trial approach&amp;#10;if 'image_4' in locals():&amp;#10;    # Set the image first&amp;#10;    image_4.setImage(fruitFile)&amp;#10;    image_4.opacity = 1&amp;#10;    # Initialize by setting autodraw - this ensures tStartRefresh gets set&amp;#10;    image_4.setAutoDraw(True)&amp;#10;    # Reset debug flag for EachFrame&amp;#10;    if hasattr(image_4, '_shown_debug'):&amp;#10;        del image_4._shown_debug&amp;#10;    print(f&quot;Practice trial: Set image to {fruitFile} with opacity {image_4.opacity}&quot;)&amp;#10;&amp;#10;# Reset slider to 0&amp;#10;if 'slider_3' in locals():&amp;#10;    slider_3.reset()&amp;#10;    slider_3.setRating(0)&amp;#10;    print(&quot;Practice trial: Slider reset to 0&quot;)&amp;#10;&amp;#10;# Initialize timing variables (shorter timeout for practice - 6 seconds)&amp;#10;import time&amp;#10;trial_start_time = time.time()&amp;#10;response_time = None&amp;#10;trial_timed_out = False&amp;#10;responded_in_time = False&amp;#10;&amp;#10;# Store in globals&amp;#10;globals()['trial_start_time'] = trial_start_time&amp;#10;globals()['response_time'] = None&amp;#10;globals()['trial_timed_out'] = False&amp;#10;globals()['responded_in_time'] = False&amp;#10;&amp;#10;# Store trial variables in globals for use in other routines (like actualPoints)&amp;#10;globals()['trueVal'] = trueVal&amp;#10;globals()['fruitFile'] = fruitFile&amp;#10;globals()['blockType'] = blockType&amp;#10;globals()['baselineR'] = baselineR&amp;#10;&amp;#10;# Practice trials use shorter timeout (6 seconds instead of 8)&amp;#10;globals()['PRACTICE_TIMEOUT_SECONDS'] = 6.0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice trial - check for response (shorter timeout: 6 seconds)&amp;#10;# Using keys 1/3: 1 = left (decrease), 2 = continue, 3 = right (increase)&amp;#10;import time&amp;#10;&amp;#10;# Get fruitFile from locals or globals&amp;#10;if 'fruitFile' not in locals():&amp;#10;    fruitFile = globals().get('fruitFile', 'images/blank.png')&amp;#10;&amp;#10;# Show the fruit image - FORCE it to be visible (match regular trial approach)&amp;#10;if 'image_4' in locals() and fruitFile and fruitFile != 'images/blank.png' and fruitFile != '':&amp;#10;    # Set the image and make it visible every frame&amp;#10;    image_4.setImage(fruitFile)&amp;#10;    image_4.opacity = 1.0  # Force opacity to 1.0&amp;#10;    image_4.setAutoDraw(True)  # Force autodraw to ensure it's drawn&amp;#10;    # Debug: print once per trial that image is being shown&amp;#10;    if not hasattr(image_4, '_shown_debug'):&amp;#10;        print(f&quot;DEBUG: Practice showing image {fruitFile} with opacity {image_4.opacity}, autodraw={image_4.status}&quot;)&amp;#10;        image_4._shown_debug = True&amp;#10;elif 'image_4' in locals():&amp;#10;    image_4.opacity = 0&amp;#10;    image_4.setAutoDraw(False)&amp;#10;&amp;#10;# Display current slider value&amp;#10;if 'slider_3' in locals():&amp;#10;    current_value = slider_3.getRating()&amp;#10;    # Handle None values - slider might return None initially&amp;#10;    if current_value is not None:&amp;#10;        try:&amp;#10;            current_value_int = int(current_value)&amp;#10;            if 'text_slider_value' in locals():&amp;#10;                text_slider_value.text = f&quot;Current rating: {current_value_int}&quot;&amp;#10;            elif 'text_rating' in locals():&amp;#10;                text_rating.text = f&quot;Current rating: {current_value_int}&quot;&amp;#10;        except (ValueError, TypeError):&amp;#10;            # If conversion fails, just skip updating the text&amp;#10;            pass&amp;#10;&amp;#10;# Handle keyboard input for slider controls&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['1', '2', '3', 'num_1', 'num_2', 'num_3'])&amp;#10;except:&amp;#10;    keys = []&amp;#10;&amp;#10;for key in keys:&amp;#10;    # Normalize key names&amp;#10;    if key == 'num_1' or key == '1':&amp;#10;        # Key 1: Move slider left by 5 points&amp;#10;        if 'slider_3' in locals():&amp;#10;            current_rating = slider_3.getRating()&amp;#10;            if current_rating is None:&amp;#10;                current_rating = 0&amp;#10;            new_rating = current_rating - 5&amp;#10;            slider_3.setRating(new_rating)&amp;#10;            print(f&quot;Practice: Slider moved left (key 1): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_3' or key == '3':&amp;#10;        # Key 3: Move slider right by 5 points&amp;#10;        if 'slider_3' in locals():&amp;#10;            current_rating = slider_3.getRating()&amp;#10;            if current_rating is None:&amp;#10;                current_rating = 0&amp;#10;            new_rating = current_rating + 5&amp;#10;            slider_3.setRating(new_rating)&amp;#10;            print(f&quot;Practice: Slider moved right (key 3): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_2' or key == '2':&amp;#10;        # Key 2: Submit answer&amp;#10;        trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;        response_time = time.time() - trial_start_time&amp;#10;        &amp;#10;        PRACTICE_TIMEOUT_SECONDS = globals().get('PRACTICE_TIMEOUT_SECONDS', 6.0)&amp;#10;        &amp;#10;        if response_time &lt;= PRACTICE_TIMEOUT_SECONDS:&amp;#10;            responded_in_time = True&amp;#10;            trial_timed_out = False&amp;#10;            print(f&quot;Practice: Answer submitted (key 2) in {response_time:.2f} seconds&quot;)&amp;#10;        else:&amp;#10;            responded_in_time = False&amp;#10;            trial_timed_out = True&amp;#10;            print(f&quot;Practice: Answer submitted (key 2) in {response_time:.2f} seconds (over limit)&quot;)&amp;#10;        &amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;        break&amp;#10;&amp;#10;# Check for timeout (6 seconds for practice)&amp;#10;try:&amp;#10;    trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;    PRACTICE_TIMEOUT_SECONDS = globals().get('PRACTICE_TIMEOUT_SECONDS', 6.0)&amp;#10;    responded_in_time = globals().get('responded_in_time', False)&amp;#10;    &amp;#10;    elapsed_time = time.time() - trial_start_time&amp;#10;    &amp;#10;    if elapsed_time &gt;= PRACTICE_TIMEOUT_SECONDS and not responded_in_time:&amp;#10;        trial_timed_out = True&amp;#10;        response_time = PRACTICE_TIMEOUT_SECONDS&amp;#10;        responded_in_time = False&amp;#10;        &amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        print(f&quot;Practice: Trial timed out at {PRACTICE_TIMEOUT_SECONDS} seconds&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="import * as time from 'time';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (((_pj.in_es6(&quot;image_3&quot;, locals()) &amp;&amp; fruitFile) &amp;&amp; (fruitFile !== &quot;images/blank.png&quot;))) {&amp;#10;    image_3.setImage(fruitFile);&amp;#10;    image_3.opacity = 1.0;&amp;#10;    image_3.setAutoDraw(true);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;slider&quot;, locals())) {&amp;#10;    current_value = slider.getRating();&amp;#10;    if (_pj.in_es6(&quot;text_slider_value&quot;, locals())) {&amp;#10;        text_slider_value.text = `Current rating: ${Number.parseInt(current_value)}`;&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;text_rating&quot;, locals())) {&amp;#10;            text_rating.text = `Current rating: ${Number.parseInt(current_value)}`;&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;try {&amp;#10;    keys = psychoJS.eventManager.getKeys({&quot;keyList&quot;: [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;num_1&quot;, &quot;num_2&quot;, &quot;num_3&quot;]});&amp;#10;} catch(e) {&amp;#10;    keys = [];&amp;#10;}&amp;#10;for (var key, _pj_c = 0, _pj_a = keys, _pj_b = _pj_a.length; (_pj_c &lt; _pj_b); _pj_c += 1) {&amp;#10;    key = _pj_a[_pj_c];&amp;#10;    if (((key === &quot;num_1&quot;) || (key === &quot;1&quot;))) {&amp;#10;        if (_pj.in_es6(&quot;slider&quot;, locals())) {&amp;#10;            current_rating = slider.getRating();&amp;#10;            new_rating = (current_rating - 5);&amp;#10;            slider.setRating(new_rating);&amp;#10;            console.log(`Practice: Slider moved left (key 1): ${current_rating} -&gt; ${new_rating}`);&amp;#10;        }&amp;#10;    } else {&amp;#10;        if (((key === &quot;num_3&quot;) || (key === &quot;3&quot;))) {&amp;#10;            if (_pj.in_es6(&quot;slider&quot;, locals())) {&amp;#10;                current_rating = slider.getRating();&amp;#10;                new_rating = (current_rating + 5);&amp;#10;                slider.setRating(new_rating);&amp;#10;                console.log(`Practice: Slider moved right (key 3): ${current_rating} -&gt; ${new_rating}`);&amp;#10;            }&amp;#10;        } else {&amp;#10;            if (((key === &quot;num_2&quot;) || (key === &quot;2&quot;))) {&amp;#10;                trial_start_time = globals().get(&quot;trial_start_time&quot;, time.time());&amp;#10;                response_time = (time.time() - trial_start_time);&amp;#10;                PRACTICE_TIMEOUT_SECONDS = globals().get(&quot;PRACTICE_TIMEOUT_SECONDS&quot;, 6.0);&amp;#10;                if ((response_time &lt;= PRACTICE_TIMEOUT_SECONDS)) {&amp;#10;                    responded_in_time = true;&amp;#10;                    trial_timed_out = false;&amp;#10;                    console.log(`Practice: Answer submitted (key 2) in ${util.pad(Number.parseFloat(response_time).toFixed(2), 1)} seconds`);&amp;#10;                } else {&amp;#10;                    responded_in_time = false;&amp;#10;                    trial_timed_out = true;&amp;#10;                    console.log(`Practice: Answer submitted (key 2) in ${util.pad(Number.parseFloat(response_time).toFixed(2), 1)} seconds (over limit)`);&amp;#10;                }&amp;#10;                globals()[&quot;response_time&quot;] = response_time;&amp;#10;                globals()[&quot;responded_in_time&quot;] = responded_in_time;&amp;#10;                globals()[&quot;trial_timed_out&quot;] = trial_timed_out;&amp;#10;                continueRoutine = false;&amp;#10;                psychoJS.eventManager.clearEvents();&amp;#10;                break;&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;try {&amp;#10;    trial_start_time = globals().get(&quot;trial_start_time&quot;, time.time());&amp;#10;    PRACTICE_TIMEOUT_SECONDS = globals().get(&quot;PRACTICE_TIMEOUT_SECONDS&quot;, 6.0);&amp;#10;    responded_in_time = globals().get(&quot;responded_in_time&quot;, false);&amp;#10;    elapsed_time = (time.time() - trial_start_time);&amp;#10;    if (((elapsed_time &gt;= PRACTICE_TIMEOUT_SECONDS) &amp;&amp; (! responded_in_time))) {&amp;#10;        trial_timed_out = true;&amp;#10;        response_time = PRACTICE_TIMEOUT_SECONDS;&amp;#10;        responded_in_time = false;&amp;#10;        globals()[&quot;response_time&quot;] = response_time;&amp;#10;        globals()[&quot;responded_in_time&quot;] = responded_in_time;&amp;#10;        globals()[&quot;trial_timed_out&quot;] = trial_timed_out;&amp;#10;        console.log(`Practice: Trial timed out at ${PRACTICE_TIMEOUT_SECONDS} seconds`);&amp;#10;        continueRoutine = false;&amp;#10;        psychoJS.eventManager.clearEvents();&amp;#10;    }&amp;#10;} catch(e) {&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;rating = (_pj.in_es6(&quot;slider&quot;, locals()) ? slider.getRating() : 0);&amp;#10;rt = (_pj.in_es6(&quot;slider&quot;, locals()) ? slider.getRT() : null);&amp;#10;response_time = globals().get(&quot;response_time&quot;, null);&amp;#10;responded_in_time = globals().get(&quot;responded_in_time&quot;, false);&amp;#10;trial_timed_out = globals().get(&quot;trial_timed_out&quot;, false);&amp;#10;actual_response_time = ((response_time !== null) ? response_time : rt);&amp;#10;rt_str = (actual_response_time ? `${util.pad(Number.parseFloat(actual_response_time).toFixed(3), 1)}s` : &quot;N/A&quot;);&amp;#10;console.log(`Practice trial EndRoutine: RT=${rt_str}, responded_in_time=${responded_in_time}, timed_out=${trial_timed_out}`);&amp;#10;psychoJS.experiment.addData(&quot;practice_trial&quot;, true);&amp;#10;psychoJS.experiment.addData(&quot;practice_block&quot;, (_pj.in_es6(&quot;blockType&quot;, locals()) ? blockType : &quot;practice&quot;));&amp;#10;psychoJS.experiment.addData(&quot;practice_fruit&quot;, (_pj.in_es6(&quot;fruitFile&quot;, locals()) ? fruitFile : &quot;&quot;));&amp;#10;psychoJS.experiment.addData(&quot;practice_rating&quot;, rating);&amp;#10;psychoJS.experiment.addData(&quot;practice_rt&quot;, (actual_response_time ? actual_response_time : null));&amp;#10;psychoJS.experiment.addData(&quot;practice_true_value&quot;, (_pj.in_es6(&quot;trueVal&quot;, locals()) ? trueVal : 0));&amp;#10;psychoJS.experiment.addData(&quot;practice_responded_in_time&quot;, responded_in_time);&amp;#10;psychoJS.experiment.addData(&quot;practice_timed_out&quot;, trial_timed_out);&amp;#10;" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Get response data from practice trial&amp;#10;if 'slider_3' in locals():&amp;#10;    rating = slider_3.getRating()&amp;#10;    if rating is None:&amp;#10;        rating = 0&amp;#10;    rt = slider_3.getRT()&amp;#10;else:&amp;#10;    rating = 0&amp;#10;    rt = None&amp;#10;&amp;#10;# Get response_time, responded_in_time, and trial_timed_out from globals&amp;#10;response_time = globals().get('response_time', None)&amp;#10;responded_in_time = globals().get('responded_in_time', False)&amp;#10;trial_timed_out = globals().get('trial_timed_out', False)&amp;#10;&amp;#10;# Use response_time if available, otherwise use slider RT&amp;#10;actual_response_time = response_time if response_time is not None else rt&amp;#10;&amp;#10;rt_str = f&quot;{actual_response_time:.3f}s&quot; if actual_response_time else &quot;N/A&quot;&amp;#10;print(f&quot;Practice trial EndRoutine: RT={rt_str}, responded_in_time={responded_in_time}, timed_out={trial_timed_out}&quot;)&amp;#10;&amp;#10;# Log practice trial data (optional - you may want to log this separately)&amp;#10;thisExp.addData(&quot;practice_trial&quot;, True)&amp;#10;thisExp.addData(&quot;practice_block&quot;, blockType if 'blockType' in locals() else &quot;practice&quot;)&amp;#10;thisExp.addData(&quot;practice_fruit&quot;, fruitFile if 'fruitFile' in locals() else &quot;&quot;)&amp;#10;thisExp.addData(&quot;practice_rating&quot;, rating)&amp;#10;thisExp.addData(&quot;practice_rt&quot;, actual_response_time if actual_response_time else None)&amp;#10;thisExp.addData(&quot;practice_true_value&quot;, trueVal if 'trueVal' in locals() else 0)&amp;#10;thisExp.addData(&quot;practice_responded_in_time&quot;, responded_in_time)&amp;#10;thisExp.addData(&quot;practice_timed_out&quot;, trial_timed_out)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_19" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <ImageComponent name="image_4" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_4" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.17)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <SliderComponent name="slider_3" plugin="None">
        <Param val="White" valType="color" updates="constant" name="borderColor"/>
        <Param val="LightGray" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="Red" valType="color" updates="constant" name="fillColor"/>
        <Param val="False" valType="bool" updates="constant" name="flip"/>
        <Param val="Noto Sans" valType="str" updates="constant" name="font"/>
        <Param val="False" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="5" valType="num" updates="constant" name="granularity"/>
        <Param val="0" valType="code" updates="None" name="initVal"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="labels"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="slider_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="constant" name="readOnly"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 0.075)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeHistory"/>
        <Param val="True" valType="bool" updates="constant" name="storeRating"/>
        <Param val="True" valType="bool" updates="constant" name="storeRatingTime"/>
        <Param val="()" valType="list" updates="constant" name="styleTweaks"/>
        <Param val="slider" valType="str" updates="constant" name="styles"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="ticks"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </SliderComponent>
    </Routine>
    <Routine name="taskStartSoon">
      <RoutineSettingsComponent name="taskStartSoon" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="taskStartSoon" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_task_start_soon" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_task_start_soon" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="The task will start soon.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_10" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_10" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <CodeComponent name="code_20" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;text_task_start_soon&quot;, locals())) {&amp;#10;    text_task_start_soon.text = &quot;The task will start soon. Press 2 to continue&quot;;&amp;#10;    text_task_start_soon.opacity = 1;&amp;#10;    text_task_start_soon.setAutoDraw(true);&amp;#10;    console.log(&quot;Task start soon screen displayed&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_task_start_soon component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# &quot;Task will start soon. Press 2 to continue&quot; screen&amp;#10;# Component: text_task_start_soon (or similar text component)&amp;#10;# This should ONLY show ONCE at the start of Block 1, NOT after every trial&amp;#10;&amp;#10;# Check if Block 1 setup has already been completed&amp;#10;block1_scanner_sync_complete = globals().get('block1_scanner_sync_complete', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;&amp;#10;# Only show taskStartSoon ONCE at the start of Block 1&amp;#10;# Skip if: Block 1 scanner sync already done, OR block 2 setup is complete, OR we've already started trials (learning_block_index &gt;= 0 means at least one trial has started)&amp;#10;print(f&quot;DEBUG taskStartSoon: block1_scanner_sync_complete={block1_scanner_sync_complete}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index}&quot;)&amp;#10;&amp;#10;if block1_scanner_sync_complete or block2_setup_complete or learning_block_index &gt;= 0:&amp;#10;    print(f&quot;Skipping taskStartSoon (block1_scanner_sync_complete={block1_scanner_sync_complete}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Clear any previous key presses&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Display task start message&amp;#10;    if 'text_task_start_soon' in locals():&amp;#10;        text_task_start_soon.text = &quot;The task will start soon. Press C to continue&quot;&amp;#10;        text_task_start_soon.opacity = 1&amp;#10;        text_task_start_soon.setAutoDraw(True)&amp;#10;        print(&quot;Task start soon screen displayed&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_task_start_soon component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Task start soon - wait for key press '2' to continue&amp;#10;# Check if Block 1 setup has already been completed (shouldn't happen, but safety check)&amp;#10;block1_scanner_sync_complete = globals().get('block1_scanner_sync_complete', False)&amp;#10;if block1_scanner_sync_complete:&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['2', 'num_2'])&amp;#10;        if keys:&amp;#10;            # Key 2 pressed - continue to scanner sync&amp;#10;            print(&quot;Task start soon: Key 2 pressed, continuing to scanner sync&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide task start soon text&amp;#10;if 'text_task_start_soon' in locals():&amp;#10;    text_task_start_soon.setAutoDraw(False)&amp;#10;    text_task_start_soon.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_20" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="scannerSync">
      <RoutineSettingsComponent name="scannerSync" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerSync" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_scanner_wait" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_scanner_wait" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Waiting for the scanner to start..." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_11" plugin="None">
        <Param val="'5', 'num_5', 'num5'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_11" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <CodeComponent name="code_21" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;text_scanner_wait&quot;, locals())) {&amp;#10;    text_scanner_wait.text = &quot;Waiting for the scanner to start...&quot;;&amp;#10;    text_scanner_wait.opacity = 1;&amp;#10;    text_scanner_wait.setAutoDraw(true);&amp;#10;    console.log(&quot;Scanner sync: Waiting for trigger '5' from MRI scanner&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_scanner_wait component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# MRI Scanner sync - wait for scanner trigger (key '5')&amp;#10;# Component: text_scanner_wait (or similar text component)&amp;#10;# This should ONLY show ONCE at the start of Block 1, NOT after every trial&amp;#10;&amp;#10;# Check if Block 1 scanner sync has already been completed&amp;#10;block1_scanner_sync_complete = globals().get('block1_scanner_sync_complete', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;&amp;#10;# Only show scannerSync ONCE at the start of Block 1&amp;#10;# Skip if: Block 1 scanner sync already done, OR block 2 setup is complete, OR we've already started trials (learning_block_index &gt;= 0 means at least one trial has started)&amp;#10;print(f&quot;DEBUG scannerSync: block1_scanner_sync_complete={block1_scanner_sync_complete}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index}&quot;)&amp;#10;&amp;#10;if block1_scanner_sync_complete or block2_setup_complete or learning_block_index &gt;= 0:&amp;#10;    print(f&quot;Skipping scannerSync (block1_scanner_sync_complete={block1_scanner_sync_complete}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Clear any previous key presses&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Display waiting message&amp;#10;    if 'text_scanner_wait' in locals():&amp;#10;        text_scanner_wait.text = &quot;Waiting for the scanner to start...&quot;&amp;#10;        text_scanner_wait.opacity = 1&amp;#10;        text_scanner_wait.setAutoDraw(True)&amp;#10;        print(&quot;Scanner sync: Waiting for trigger '5' from MRI scanner (Block 1)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_scanner_wait component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Scanner sync - wait for MRI scanner trigger (key '5')&amp;#10;# The MRI sends '5' when it's ready&amp;#10;# Check if Block 1 scanner sync has already been completed (shouldn't happen, but safety check)&amp;#10;block1_scanner_sync_complete = globals().get('block1_scanner_sync_complete', False)&amp;#10;if block1_scanner_sync_complete:&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['5', 'num_5'])&amp;#10;        if keys:&amp;#10;            # Scanner trigger received - continue to next screen&amp;#10;            print(&quot;Scanner sync: Trigger '5' received from MRI scanner, continuing&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide scanner wait text&amp;#10;if 'text_scanner_wait' in locals():&amp;#10;    text_scanner_wait.setAutoDraw(False)&amp;#10;    text_scanner_wait.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Log scanner sync time (optional)&amp;#10;import time&amp;#10;scanner_sync_time = time.time()&amp;#10;globals()['scanner_sync_time'] = scanner_sync_time&amp;#10;print(f&quot;Scanner sync completed at {scanner_sync_time}&quot;)&amp;#10;&amp;#10;# Mark Block 1 scanner sync as complete - it should not show again&amp;#10;globals()['block1_scanner_sync_complete'] = True&amp;#10;print(&quot;Block 1 scanner sync complete - will not show again&quot;)&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_21" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="actualPoints1">
      <RoutineSettingsComponent name="actualPoints1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="actualPoints1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_22" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Actual points screen - shows the true value&amp;#10;# Duration is set dynamically based on trial response time&amp;#10;# IMPORTANT: In Builder, leave the Text component's text field BLANK - code will set it&amp;#10;&amp;#10;# Get trueVal and create the text&amp;#10;actual_points_text = &quot;Actual points: 0&quot;  # Initialize first&amp;#10;&amp;#10;# Try to get trueVal from various sources&amp;#10;if 'trueVal' in locals():&amp;#10;    actual_points_text = f&quot;Actual points: {trueVal:+d}&quot;&amp;#10;elif 'trueVal' in globals():&amp;#10;    actual_points_text = f&quot;Actual points: {trueVal:+d}&quot;&amp;#10;else:&amp;#10;    # Fallback: try to get from actual_points_text if it was set in trialEndRoutine&amp;#10;    try:&amp;#10;        if 'actual_points_text' in locals():&amp;#10;            pass  # Use the value that exists&amp;#10;        else:&amp;#10;            actual_points_text = &quot;Actual points: 0&quot;&amp;#10;    except:&amp;#10;        actual_points_text = &quot;Actual points: 0&quot;&amp;#10;&amp;#10;# Set the text component (DO NOT set text in Builder - leave it blank!)&amp;#10;if 'text_actual_points' in locals():&amp;#10;    text_actual_points.text = actual_points_text&amp;#10;    text_actual_points.opacity = 1&amp;#10;    text_actual_points.setAutoDraw(True)&amp;#10;    print(f&quot;Showing actual points: {actual_points_text}&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_actual_points component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_22" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_actual_points" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_actual_points" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshair3">
      <RoutineSettingsComponent name="crosshair3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_23" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_23" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_23" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;    crosshair.opacity = 1;&amp;#10;    crosshair.setAutoDraw(true);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# First crosshair screen - duration set dynamically based on trial response time&amp;#10;# Duration is set in trialEndRoutine.py as crosshair1_duration&amp;#10;# This routine will show a crosshair in the center of the screen&amp;#10;&amp;#10;# Make sure crosshair is visible (add a crosshair component in Builder)&amp;#10;if 'crosshair' in locals():&amp;#10;    crosshair.opacity = 1&amp;#10;    crosshair.setAutoDraw(True)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="pass&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_23" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="tastStartSoon2">
      <RoutineSettingsComponent name="tastStartSoon2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="tastStartSoon2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_24" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# &quot;Task will start soon. Press 2 to continue&quot; screen - for second block&amp;#10;# Only shows after first block completes (after blockTransition)&amp;#10;# Component: text_task_start_soon_block2 (or similar text component)&amp;#10;&amp;#10;# Check if we should show this (only after block transition)&amp;#10;# The blockTransition sets show_block_transition to False when it completes&amp;#10;# So we check if we're past the first block&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Only show if we're in the second block phase (after first block completed)&amp;#10;if learning_block_index &lt; trials_per_block:&amp;#10;    # Still in first block - skip this routine&amp;#10;    print(&quot;Skipping taskStartSoonBlock2 (still in first block)&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # We're past the first block - show the screen&amp;#10;    # Clear any previous key presses&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Display task start message&amp;#10;    if 'text_task_start_soon_block2' in locals():&amp;#10;        text_task_start_soon_block2.text = &quot;The task will start soon. Press 2 to continue&quot;&amp;#10;        text_task_start_soon_block2.opacity = 1&amp;#10;        text_task_start_soon_block2.setAutoDraw(True)&amp;#10;        print(&quot;Task start soon screen displayed (for second block)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_task_start_soon_block2 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Task start soon Block 2 - wait for key press '2' to continue&amp;#10;# Only runs if we're past the first block&amp;#10;&amp;#10;# Check if we should still be showing this&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;if learning_block_index &lt; trials_per_block:&amp;#10;    # Still in first block - skip&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Check for key press '2' to continue&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['2', 'num_2'])&amp;#10;        if keys:&amp;#10;            # Key 2 pressed - continue to scanner sync&amp;#10;            print(&quot;Task start soon Block 2: Key 2 pressed, continuing to scanner sync&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide task start soon Block 2 text&amp;#10;if 'text_task_start_soon_block2' in locals():&amp;#10;    text_task_start_soon_block2.setAutoDraw(False)&amp;#10;    text_task_start_soon_block2.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_24" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_task_start_soon_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_task_start_soon_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="The task will start soon.&amp;#10;&amp;#10;Press 2 to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_12" plugin="None">
        <Param val="'2'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_12" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="scannerSyncBlock2">
      <RoutineSettingsComponent name="scannerSyncBlock2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerSyncBlock2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_25" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# MRI Scanner sync Block 2 - wait for scanner trigger (key '5')&amp;#10;# Only shows after first block completes (after blockTransition and taskStartSoonBlock2)&amp;#10;# Component: text_scanner_wait_block2 (or similar text component)&amp;#10;&amp;#10;# Check if we should show this (only after taskStartSoonBlock2 completes, and only once)&amp;#10;# taskStartSoonBlock2 sets ready_for_scanner_sync_block2 = True when user presses C&amp;#10;ready_for_scanner_sync_block2 = globals().get('ready_for_scanner_sync_block2', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;&amp;#10;# Also check if we've already started Block 2 trials (once Block 2 has started, never show this again)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# DEBUG: Print flag states&amp;#10;print(f&quot;DEBUG scannerSyncBlock2: ready_for_scanner_sync_block2={ready_for_scanner_sync_block2}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index}, trials_per_block={trials_per_block}&quot;)&amp;#10;print(f&quot;DEBUG scannerSyncBlock2: Condition check - block2_setup_complete={block2_setup_complete}, not ready={not ready_for_scanner_sync_block2}, index too low={learning_block_index &lt; trials_per_block - 1}, index too high={learning_block_index &gt; trials_per_block}&quot;)&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block 2 setup already done (block2_setup_complete = True) - NEVER show again once setup is complete&amp;#10;# 2. taskStartSoonBlock2 hasn't completed yet (ready_for_scanner_sync_block2 = False)&amp;#10;# 3. Still in Block 1 (learning_block_index &lt; trials_per_block - 1)&amp;#10;# 4. Already well into Block 2 trials (learning_block_index &gt; trials_per_block) - once Block 2 trials start, never show again&amp;#10;# Show during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block AND ready_for_scanner_sync_block2 = True&amp;#10;# NOTE: learning_block_index is 0-indexed, so after last trial of block 1, it equals trials_per_block - 1&amp;#10;should_skip = block2_setup_complete or not ready_for_scanner_sync_block2 or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block&amp;#10;print(f&quot;DEBUG scannerSyncBlock2: should_skip = {should_skip}&quot;)&amp;#10;if should_skip:&amp;#10;    # Skip this routine&amp;#10;    if block2_setup_complete:&amp;#10;        print(&quot;Skipping scannerSyncBlock2 (block 2 setup already completed)&quot;)&amp;#10;    elif learning_block_index &lt; trials_per_block - 1:&amp;#10;        print(f&quot;Skipping scannerSyncBlock2 (still in Block 1, learning_block_index={learning_block_index} &lt; trials_per_block-1={trials_per_block-1})&quot;)&amp;#10;    elif learning_block_index &gt; trials_per_block:&amp;#10;        print(f&quot;Skipping scannerSyncBlock2 (already in Block 2 trials, learning_block_index={learning_block_index} &gt; trials_per_block={trials_per_block})&quot;)&amp;#10;    else:&amp;#10;        print(f&quot;Skipping scannerSyncBlock2 (taskStartSoonBlock2 not completed yet, ready_for_scanner_sync_block2={ready_for_scanner_sync_block2})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # We're past the first block - show the scanner sync&amp;#10;    # Clear any previous key presses IMMEDIATELY to prevent carryover&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;        # Also clear any keyboard component buffers&amp;#10;        if 'key_resp_scanner_block2' in locals() and hasattr(key_resp_scanner_block2, 'keys'):&amp;#10;            key_resp_scanner_block2.keys = []&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Set a timestamp to ignore any keys pressed before this routine started&amp;#10;    import time&amp;#10;    globals()['scannerSyncBlock2_start_time'] = time.time()&amp;#10;    print(f&quot;Scanner sync Block 2: Routine started at {globals()['scannerSyncBlock2_start_time']}, cleared key buffer&quot;)&amp;#10;&amp;#10;    # Display waiting message&amp;#10;    if 'text_scanner_wait_block2' in locals():&amp;#10;        text_scanner_wait_block2.text = &quot;Waiting for the scanner to start...&quot;&amp;#10;        text_scanner_wait_block2.opacity = 1&amp;#10;        text_scanner_wait_block2.setAutoDraw(True)&amp;#10;        print(&quot;Scanner sync Block 2: Waiting for trigger '5' from MRI scanner&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_scanner_wait_block2 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Scanner sync Block 2 - wait for MRI scanner trigger (key '5')&amp;#10;# Only runs if taskStartSoonBlock2 has completed&amp;#10;&amp;#10;# Check if we should still be showing this&amp;#10;ready_for_scanner_sync_block2 = globals().get('ready_for_scanner_sync_block2', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;&amp;#10;# Also check if we've already started Block 2 trials&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if any of these conditions are true&amp;#10;# Skip if: block 2 setup already done (NEVER show again), OR still in Block 1, OR taskStartSoonBlock2 hasn't completed, OR already well into Block 2 trials&amp;#10;# Allow during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or not ready_for_scanner_sync_block2 or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    # taskStartSoonBlock2 hasn't completed yet OR block 2 setup already done OR still in Block 1 OR already in Block 2 - skip&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # The MRI sends '5' when it's ready&amp;#10;    # Only accept keys pressed AFTER this routine started (ignore carryover)&amp;#10;    import time&amp;#10;    routine_start_time = globals().get('scannerSyncBlock2_start_time', time.time())&amp;#10;    current_time = time.time()&amp;#10;    &amp;#10;    # Only process keys if at least 0.1 seconds have passed since routine started&amp;#10;    # This prevents using keys that were pressed before the routine started&amp;#10;    if current_time - routine_start_time &gt;= 0.1:&amp;#10;        try:&amp;#10;            keys = event.getKeys(keyList=['5', 'num_5'])&amp;#10;            if keys:&amp;#10;                # Scanner trigger received - continue to next screen&amp;#10;                print(&quot;Scanner sync Block 2: Trigger '5' received from MRI scanner, continuing&quot;)&amp;#10;                continueRoutine = False&amp;#10;                event.clearEvents()&amp;#10;        except:&amp;#10;            pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide scanner wait Block 2 text&amp;#10;if 'text_scanner_wait_block2' in locals():&amp;#10;    text_scanner_wait_block2.setAutoDraw(False)&amp;#10;    text_scanner_wait_block2.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Log scanner sync time (optional)&amp;#10;import time&amp;#10;scanner_sync_time = time.time()&amp;#10;globals()['scanner_sync_time_block2'] = scanner_sync_time&amp;#10;print(f&quot;Scanner sync Block 2 completed at {scanner_sync_time}&quot;)&amp;#10;&amp;#10;# IMPORTANT: Do NOT set block2_setup_complete = True here&amp;#10;# It should only be set after ALL scanner sync routines complete (crosshairBlock2 → scannerWaitBlock2 → crosshair2Block2)&amp;#10;# Just clear the scanner sync flag&amp;#10;globals()['ready_for_scanner_sync_block2'] = False&amp;#10;print(&quot;Scanner sync Block 2 ended, proceeding to crosshairBlock2&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_25" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_scanner_wait_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_scanner_wait_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Waiting for the scanner to start..." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_13" plugin="None">
        <Param val="'5', 'num_5', 'num5'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_13" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="taskStartSoonBlock2">
      <RoutineSettingsComponent name="taskStartSoonBlock2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="taskStartSoonBlock2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_26" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# &quot;Task will start soon. Press C to continue&quot; screen - for second block&amp;#10;# Only shows after first block completes (after blockTransition)&amp;#10;# Component: text_task_start_soon_block2 (or similar text component)&amp;#10;&amp;#10;# Check if we should show this (only after block transition completes, and only once)&amp;#10;# The blockTransition sets ready_for_block2_setup = True when user presses 2&amp;#10;ready_for_block2_setup = globals().get('ready_for_block2_setup', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;&amp;#10;# Also check if we've already started Block 2 trials (once Block 2 has started, never show this again)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# DEBUG: Print flag states&amp;#10;print(f&quot;DEBUG taskStartSoonBlock2: ready_for_block2_setup={ready_for_block2_setup}, block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index}, trials_per_block={trials_per_block}&quot;)&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block transition hasn't completed yet (ready_for_block2_setup = False)&amp;#10;# 2. Block 2 setup already done (block2_setup_complete = True)&amp;#10;# 3. Still in Block 1 (learning_block_index &lt; trials_per_block - 1)&amp;#10;# 4. Already well into Block 2 (learning_block_index &gt; trials_per_block)&amp;#10;# Show during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if not ready_for_block2_setup or block2_setup_complete or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    # Skip this routine&amp;#10;    if block2_setup_complete:&amp;#10;        print(&quot;Skipping taskStartSoonBlock2 (block 2 setup already completed)&quot;)&amp;#10;    elif learning_block_index &lt; trials_per_block - 1:&amp;#10;        print(f&quot;Skipping taskStartSoonBlock2 (still in Block 1, learning_block_index={learning_block_index} &lt; trials_per_block-1={trials_per_block-1})&quot;)&amp;#10;    elif learning_block_index &gt; trials_per_block:&amp;#10;        print(f&quot;Skipping taskStartSoonBlock2 (already in Block 2, learning_block_index={learning_block_index} &gt; trials_per_block={trials_per_block})&quot;)&amp;#10;    else:&amp;#10;        print(f&quot;Skipping taskStartSoonBlock2 (block transition not completed yet, ready_for_block2_setup={ready_for_block2_setup})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # We're past the first block - show the screen&amp;#10;    # IMPORTANT: Hide any previous text components first to prevent overlap&amp;#10;    if 'text_block_transition' in locals():&amp;#10;        text_block_transition.setAutoDraw(False)&amp;#10;        text_block_transition.opacity = 0&amp;#10;        print(&quot;Hidden block transition text&quot;)&amp;#10;    &amp;#10;    # Clear any previous key presses IMMEDIATELY to prevent carryover&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;        # Also clear any keyboard component buffers&amp;#10;        if 'key_resp_task_start_block2' in locals() and hasattr(key_resp_task_start_block2, 'keys'):&amp;#10;            key_resp_task_start_block2.keys = []&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Set a timestamp to ignore any keys pressed before this routine started&amp;#10;    import time&amp;#10;    globals()['taskStartSoonBlock2_start_time'] = time.time()&amp;#10;    print(f&quot;Task start soon Block 2: Routine started at {globals()['taskStartSoonBlock2_start_time']}, cleared key buffer&quot;)&amp;#10;&amp;#10;    # Display task start message&amp;#10;    if 'text_task_start_soon_block2' in locals():&amp;#10;        text_task_start_soon_block2.text = &quot;The task will start soon. Press C to continue&quot;&amp;#10;        text_task_start_soon_block2.opacity = 1&amp;#10;        text_task_start_soon_block2.setAutoDraw(True)&amp;#10;        print(&quot;Task start soon screen displayed (for second block)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_task_start_soon_block2 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Task start soon Block 2 - wait for key press 'C' to continue&amp;#10;# Only runs if block transition has completed&amp;#10;&amp;#10;# Check if we should still be showing this&amp;#10;ready_for_block2_setup = globals().get('ready_for_block2_setup', False)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;&amp;#10;# Also check if we've already started Block 2 trials&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if any of these conditions are true&amp;#10;# Skip if: still in Block 1, OR block 2 setup already done, OR block transition hasn't completed, OR already in Block 2&amp;#10;if not ready_for_block2_setup or block2_setup_complete or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    # Block transition hasn't completed yet OR block 2 setup already done OR still in Block 1 OR already in Block 2 - skip&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Check for key press 'C' to continue&amp;#10;    # Only accept keys pressed AFTER this routine started (ignore carryover)&amp;#10;    import time&amp;#10;    routine_start_time = globals().get('taskStartSoonBlock2_start_time', time.time())&amp;#10;    current_time = time.time()&amp;#10;    &amp;#10;    # Only process keys if at least 0.1 seconds have passed since routine started&amp;#10;    # This prevents using keys that were pressed before the routine started&amp;#10;    if current_time - routine_start_time &gt;= 0.1:&amp;#10;        try:&amp;#10;            keys = event.getKeys(keyList=['c', 'C'])&amp;#10;            if keys:&amp;#10;                # Key C pressed - continue to scanner sync&amp;#10;                print(&quot;Task start soon Block 2: Key C pressed, continuing to scanner sync&quot;)&amp;#10;                continueRoutine = False&amp;#10;                event.clearEvents()&amp;#10;                # Set flag for scanner sync&amp;#10;                globals()['ready_for_scanner_sync_block2'] = True&amp;#10;        except:&amp;#10;            pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide task start soon Block 2 text when routine ends&amp;#10;if 'text_task_start_soon_block2' in locals():&amp;#10;    text_task_start_soon_block2.setAutoDraw(False)&amp;#10;    text_task_start_soon_block2.opacity = 0&amp;#10;    print(&quot;Task start soon Block 2 text hidden&quot;)&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# IMPORTANT: Set flag to indicate taskStartSoonBlock2 completed, ready for scanner sync&amp;#10;globals()['ready_for_scanner_sync_block2'] = True&amp;#10;print(&quot;Task start soon Block 2 ended, ready for scanner sync (ready_for_scanner_sync_block2 = True)&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_26" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <KeyboardComponent name="key_resp_task_start_block2" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_task_start_block2" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <TextComponent name="text_task_start_soon_block2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_task_start_soon_block2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="The task will start soon.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="scannerSyncBlock2_2">
      <RoutineSettingsComponent name="scannerSyncBlock2_2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerSyncBlock2_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_27" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# Scanner sync Block 2 - wait for MRI scanner trigger (key '5')&amp;#10;# Only runs if we're past the first block&amp;#10;&amp;#10;# Check if we should still be showing this&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Show if we've completed the first block but haven't started block 2 yet&amp;#10;if learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt;= trials_per_block:&amp;#10;    # Still in first block trials OR already in block 2 - skip&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # The MRI sends '5' when it's ready&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['5', 'num_5'])&amp;#10;        if keys:&amp;#10;            # Scanner trigger received - continue to next screen&amp;#10;            print(&quot;Scanner sync Block 2: Trigger '5' received from MRI scanner, continuing&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_27" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="practiceIntro2">
      <RoutineSettingsComponent name="practiceIntro2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceIntro2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_28" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;text_practice_intro&quot;, locals())) {&amp;#10;    text_practice_intro.text = &quot;We will run a short practice task now. Press 2 to continue&quot;;&amp;#10;    text_practice_intro.opacity = 1;&amp;#10;    text_practice_intro.setAutoDraw(true);&amp;#10;    console.log(&quot;Practice introduction screen displayed&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_practice_intro component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice introduction screen 2 (before practice decision trials)&amp;#10;# Shows &quot;We will run a short practice task now. Press 2 to continue&quot;&amp;#10;# Component: text_practice_intro (or similar text component)&amp;#10;&amp;#10;# IMPORTANT: Hide all leftover components from previous routines (especially fixation crosses)&amp;#10;# Hide practice decision components&amp;#10;if 'text_question1' in locals():&amp;#10;    text_question1.setAutoDraw(False)&amp;#10;    text_question1.opacity = 0&amp;#10;if 'text_question_3' in locals():&amp;#10;    text_question_3.setAutoDraw(False)&amp;#10;    text_question_3.opacity = 0&amp;#10;if 'text_question_4' in locals():&amp;#10;    text_question_4.setAutoDraw(False)&amp;#10;    text_question_4.opacity = 0&amp;#10;if 'text_25' in locals():&amp;#10;    text_25.setAutoDraw(False)&amp;#10;    text_25.opacity = 0&amp;#10;&amp;#10;# Hide practice decision images&amp;#10;if 'image_left3' in locals():&amp;#10;    image_left3.setAutoDraw(False)&amp;#10;    image_left3.opacity = 0&amp;#10;if 'image_right3' in locals():&amp;#10;    image_right3.setAutoDraw(False)&amp;#10;    image_right3.opacity = 0&amp;#10;if 'image_left1_3' in locals():&amp;#10;    image_left1_3.setAutoDraw(False)&amp;#10;    image_left1_3.opacity = 0&amp;#10;if 'image_right2_3' in locals():&amp;#10;    image_right2_3.setAutoDraw(False)&amp;#10;    image_right2_3.opacity = 0&amp;#10;if 'image_left_left1' in locals():&amp;#10;    image_left_left1.setAutoDraw(False)&amp;#10;    image_left_left1.opacity = 0&amp;#10;if 'image_right_right1' in locals():&amp;#10;    image_right_right1.setAutoDraw(False)&amp;#10;    image_right_right1.opacity = 0&amp;#10;&amp;#10;# Clear any previous key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Check if practice_decision_block exists, if not, re-initialize it&amp;#10;practice_decision_block = globals().get('practice_decision_block', [])&amp;#10;if not practice_decision_block or len(practice_decision_block) == 0:&amp;#10;    print(&quot;WARNING: practice_decision_block is empty! Re-initializing...&quot;)&amp;#10;    import random&amp;#10;    image_dir = &quot;images/&quot;&amp;#10;    &amp;#10;    # Practice fruit values (baselines from learning practice)&amp;#10;    practice_fruit_values = {&amp;#10;        image_dir + &quot;ten.png&quot;: 10,      # ten = 10&amp;#10;        image_dir + &quot;thirty.png&quot;: 30,   # thirty = 30&amp;#10;        image_dir + &quot;fifty.png&quot;: 50     # fifty = 50&amp;#10;    }&amp;#10;    &amp;#10;    # Practice decision pairs with counterbalancing (same structure as main decision trials)&amp;#10;    practice_decision_pairs = [&amp;#10;        (image_dir + &quot;ten.png&quot;, image_dir + &quot;thirty.png&quot;),    # ten/thirty&amp;#10;        (image_dir + &quot;thirty.png&quot;, image_dir + &quot;fifty.png&quot;),  # thirty/fifty&amp;#10;        (image_dir + &quot;ten.png&quot;, image_dir + &quot;fifty.png&quot;)       # ten/fifty&amp;#10;    ]&amp;#10;    &amp;#10;    practice_decision_block = []&amp;#10;    for fruit1, fruit2 in practice_decision_pairs:&amp;#10;        left_val = practice_fruit_values[fruit1]&amp;#10;        right_val = practice_fruit_values[fruit2]&amp;#10;        correct_side = &quot;left&quot; if left_val &gt; right_val else &quot;right&quot;&amp;#10;        &amp;#10;        # ALWAYS left appears first, then right&amp;#10;        practice_decision_block.append({&amp;#10;            &quot;leftFruit&quot;: fruit1,&amp;#10;            &quot;rightFruit&quot;: fruit2,&amp;#10;            &quot;firstFruit&quot;: fruit1,     # Left fruit appears first&amp;#10;            &quot;firstSide&quot;: &quot;left&quot;,      # ALWAYS left first&amp;#10;            &quot;secondFruit&quot;: fruit2,    # Right fruit appears second&amp;#10;            &quot;secondSide&quot;: &quot;right&quot;,   # ALWAYS right second&amp;#10;            &quot;leftVal&quot;: left_val,&amp;#10;            &quot;rightVal&quot;: right_val,&amp;#10;            &quot;correct&quot;: correct_side&amp;#10;        })&amp;#10;        print(f&quot;Re-initialized practice decision trial: {fruit1.split('/')[-1]} vs {fruit2.split('/')[-1]} (left={left_val}, right={right_val}, correct={correct_side}, first=left)&quot;)&amp;#10;    &amp;#10;    globals()['practice_decision_block'] = practice_decision_block&amp;#10;    print(f&quot;Re-initialized practice_decision_block with {len(practice_decision_block)} trials&quot;)&amp;#10;else:&amp;#10;    print(f&quot;DEBUG practiceIntro2: practice_decision_block exists with {len(practice_decision_block)} trials&quot;)&amp;#10;&amp;#10;# Reset practice_decision_index to -1 before practice decision loop starts&amp;#10;# This ensures it starts fresh at 0 for the first practice trial&amp;#10;practice_decision_index = -1&amp;#10;globals()['practice_decision_index'] = practice_decision_index&amp;#10;print(f&quot;DEBUG practiceIntro2: Reset practice_decision_index to -1 (will be 0 for first practice trial)&quot;)&amp;#10;&amp;#10;# Display practice introduction text&amp;#10;if 'text_practice_intro' in locals():&amp;#10;    text_practice_intro.text = &quot;We will run a short practice task now. Press C to continue&quot;&amp;#10;    text_practice_intro.opacity = 1&amp;#10;    text_practice_intro.setAutoDraw(True)&amp;#10;    print(&quot;Practice introduction screen displayed&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_practice_intro component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice introduction screen 2 - wait for key press '2' to continue&amp;#10;# Check for key press '2' to continue to practice decision trials&amp;#10;&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['2', 'num_2'])&amp;#10;    if keys:&amp;#10;        # Key 2 pressed - continue to practice decision trials&amp;#10;        print(&quot;Practice intro 2: Key 2 pressed, continuing to practice decision trials&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide practice introduction text&amp;#10;if 'text_practice_intro' in locals():&amp;#10;    text_practice_intro.setAutoDraw(False)&amp;#10;    text_practice_intro.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_28" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <KeyboardComponent name="key_resp_15" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_15" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="practiceDecision">
      <RoutineSettingsComponent name="practiceDecision" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceDecision" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="practiceDecisionStimulus1" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="practiceDecisionStimulus1" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ImageComponent name="practiceDecisionStimulus2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="practiceDecisionStimulus2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
    </Routine>
    <Routine name="practiceDecisionSimulus1">
      <RoutineSettingsComponent name="practiceDecisionSimulus1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceDecisionSimulus1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question1" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question1" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_29" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;practice_decision_index = globals().get(&quot;practice_decision_index&quot;, (- 1));&amp;#10;practice_decision_index += 1;&amp;#10;globals()[&quot;practice_decision_index&quot;] = practice_decision_index;&amp;#10;practice_decision_block = globals().get(&quot;practice_decision_block&quot;, []);&amp;#10;if (((practice_decision_block &amp;&amp; (practice_decision_index &gt;= 0)) &amp;&amp; (practice_decision_index &lt; practice_decision_block.length))) {&amp;#10;    current = practice_decision_block[practice_decision_index];&amp;#10;    first_fruit = current[&quot;firstFruit&quot;];&amp;#10;    first_side = current[&quot;firstSide&quot;];&amp;#10;    if (_pj.in_es6(&quot;text_question1&quot;, locals())) {&amp;#10;        text_question1.text = &quot;+&quot;;&amp;#10;        try {&amp;#10;            text_question1.setPos([0, 0]);&amp;#10;        } catch(e) {&amp;#10;            if ((e instanceof AttributeError)) {&amp;#10;                text_question1.pos = [0, 0];&amp;#10;            } else {&amp;#10;                throw e;&amp;#10;            }&amp;#10;        }&amp;#10;        text_question1.opacity = 1;&amp;#10;        text_question1.setAutoDraw(true);&amp;#10;    }&amp;#10;    if ((first_side === &quot;left&quot;)) {&amp;#10;        if (_pj.in_es6(&quot;image_left3&quot;, locals())) {&amp;#10;            image_left3.setImage(first_fruit);&amp;#10;            image_left3.opacity = 1;&amp;#10;            image_left3.setAutoDraw(true);&amp;#10;        }&amp;#10;        if (_pj.in_es6(&quot;image_right3&quot;, locals())) {&amp;#10;            image_right3.opacity = 0;&amp;#10;            image_right3.setAutoDraw(false);&amp;#10;        }&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;image_right3&quot;, locals())) {&amp;#10;            image_right3.setImage(first_fruit);&amp;#10;            image_right3.opacity = 1;&amp;#10;            image_right3.setAutoDraw(true);&amp;#10;        }&amp;#10;        if (_pj.in_es6(&quot;image_left3&quot;, locals())) {&amp;#10;            image_left3.opacity = 0;&amp;#10;            image_left3.setAutoDraw(false);&amp;#10;        }&amp;#10;    }&amp;#10;    console.log(`Practice decision ${(practice_decision_index + 1)}/3: Showing ${first_fruit} on ${first_side} (2 seconds)`);&amp;#10;} else {&amp;#10;    console.log(`WARNING: Practice decision trial ${practice_decision_index} out of range`);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice decision - First stimulus screen - shows first dollar amount on its side for 2 seconds&amp;#10;# Components: text_question1, text_dollar_left_practice, text_dollar_right_practice&amp;#10;# Shows dollar amount ($5, $1, or $10) on left or right side for 2 seconds&amp;#10;&amp;#10;# Get practice_decision_index and practice_decision_block from globals&amp;#10;practice_decision_index = globals().get('practice_decision_index', -1)&amp;#10;practice_decision_index += 1&amp;#10;globals()['practice_decision_index'] = practice_decision_index&amp;#10;&amp;#10;practice_decision_block = globals().get('practice_decision_block', [])&amp;#10;&amp;#10;# DEBUG: Print block info&amp;#10;print(f&quot;DEBUG practiceDecisionStimulus1: practice_decision_index={practice_decision_index}, block_length={len(practice_decision_block) if practice_decision_block else 0}&quot;)&amp;#10;&amp;#10;if practice_decision_block and practice_decision_index &gt;= 0 and practice_decision_index &lt; len(practice_decision_block):&amp;#10;    current = practice_decision_block[practice_decision_index]&amp;#10;    first_dollar = current[&quot;firstDollar&quot;]  # Dollar amount (e.g., &quot;$5&quot;, &quot;$1&quot;, &quot;$10&quot;)&amp;#10;    first_side = current[&quot;firstSide&quot;]&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question1' in locals():&amp;#10;        text_question1.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question1.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question1.pos = (0, 0)&amp;#10;        text_question1.opacity = 1&amp;#10;        text_question1.setAutoDraw(True)&amp;#10;    &amp;#10;    # Show first dollar amount on its designated side&amp;#10;    # Hide both text components first, then show the correct one&amp;#10;    if 'text_dollar_left_practice' in locals():&amp;#10;        text_dollar_left_practice.opacity = 0&amp;#10;        text_dollar_left_practice.setAutoDraw(False)&amp;#10;    if 'text_dollar_right_practice' in locals():&amp;#10;        text_dollar_right_practice.opacity = 0&amp;#10;        text_dollar_right_practice.setAutoDraw(False)&amp;#10;    &amp;#10;    if first_side == &quot;left&quot;:&amp;#10;        if 'text_dollar_left_practice' in locals():&amp;#10;            text_dollar_left_practice.text = first_dollar&amp;#10;            text_dollar_left_practice.opacity = 1&amp;#10;            # Set larger font size for currency numbers&amp;#10;            try:&amp;#10;                text_dollar_left_practice.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;            except AttributeError:&amp;#10;                pass  # If height can't be set, continue anyway&amp;#10;            text_dollar_left_practice.setAutoDraw(True)&amp;#10;    else:  # right&amp;#10;        if 'text_dollar_right_practice' in locals():&amp;#10;            text_dollar_right_practice.text = first_dollar&amp;#10;            text_dollar_right_practice.opacity = 1&amp;#10;            # Set larger font size for currency numbers&amp;#10;            try:&amp;#10;                text_dollar_right_practice.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;            except AttributeError:&amp;#10;                pass  # If height can't be set, continue anyway&amp;#10;            text_dollar_right_practice.setAutoDraw(True)&amp;#10;    &amp;#10;    print(f&quot;Practice decision {practice_decision_index+1}/3: Showing {first_dollar} on {first_side} (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(f&quot;WARNING: Practice decision trial {practice_decision_index} out of range&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide dollar amount text components when practiceDecisionStimulus1 ends&amp;#10;# This ensures clean transition to crosshair ITI&amp;#10;if 'text_dollar_left_practice' in locals():&amp;#10;    text_dollar_left_practice.setAutoDraw(False)&amp;#10;    text_dollar_left_practice.opacity = 0&amp;#10;if 'text_dollar_right_practice' in locals():&amp;#10;    text_dollar_right_practice.setAutoDraw(False)&amp;#10;    text_dollar_right_practice.opacity = 0&amp;#10;if 'text_question1' in locals():&amp;#10;    text_question1.setAutoDraw(False)&amp;#10;    text_question1.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_29" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_dollar_left_practice" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_left_practice" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_dollar_right_practice" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_right_practice" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="practiceDecisionSimulus2">
      <RoutineSettingsComponent name="practiceDecisionSimulus2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceDecisionSimulus2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question_3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_25" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_25" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_30" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;practice_decision_index = globals().get(&quot;practice_decision_index&quot;, (- 1));&amp;#10;practice_decision_block = globals().get(&quot;practice_decision_block&quot;, []);&amp;#10;if (((practice_decision_block &amp;&amp; (practice_decision_index &gt;= 0)) &amp;&amp; (practice_decision_index &lt; practice_decision_block.length))) {&amp;#10;    current = practice_decision_block[practice_decision_index];&amp;#10;    second_fruit = current[&quot;secondFruit&quot;];&amp;#10;    second_side = current[&quot;secondSide&quot;];&amp;#10;    if (_pj.in_es6(&quot;text_question_3&quot;, locals())) {&amp;#10;        text_question_3.text = &quot;+&quot;;&amp;#10;        try {&amp;#10;            text_question_3.setPos([0, 0]);&amp;#10;        } catch(e) {&amp;#10;            if ((e instanceof AttributeError)) {&amp;#10;                text_question_3.pos = [0, 0];&amp;#10;            } else {&amp;#10;                throw e;&amp;#10;            }&amp;#10;        }&amp;#10;        text_question_3.opacity = 1;&amp;#10;        text_question_3.setAutoDraw(true);&amp;#10;    }&amp;#10;    if (_pj.in_es6(&quot;text_25&quot;, locals())) {&amp;#10;        text_25.opacity = 0;&amp;#10;        text_25.setAutoDraw(false);&amp;#10;    }&amp;#10;    if ((second_side === &quot;left&quot;)) {&amp;#10;        if (_pj.in_es6(&quot;image_left1_3&quot;, locals())) {&amp;#10;            image_left1_3.setImage(second_fruit);&amp;#10;            image_left1_3.opacity = 1;&amp;#10;            image_left1_3.setAutoDraw(true);&amp;#10;        }&amp;#10;        if (_pj.in_es6(&quot;image_right2_3&quot;, locals())) {&amp;#10;            image_right2_3.opacity = 0;&amp;#10;            image_right2_3.setAutoDraw(false);&amp;#10;        }&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;image_right2_3&quot;, locals())) {&amp;#10;            image_right2_3.setImage(second_fruit);&amp;#10;            image_right2_3.opacity = 1;&amp;#10;            image_right2_3.setAutoDraw(true);&amp;#10;        }&amp;#10;        if (_pj.in_es6(&quot;image_left1_3&quot;, locals())) {&amp;#10;            image_left1_3.opacity = 0;&amp;#10;            image_left1_3.setAutoDraw(false);&amp;#10;        }&amp;#10;    }&amp;#10;    console.log(`Practice decision ${(practice_decision_index + 1)}/3: Showing ${second_fruit} on ${second_side} (2 seconds)`);&amp;#10;} else {&amp;#10;    console.log(`WARNING: Practice decision trial ${practice_decision_index} out of range`);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice decision - Second stimulus screen - shows second dollar amount on its side for 2 seconds&amp;#10;# Components: text_question_3, text_dollar_left_practice, text_dollar_right_practice&amp;#10;# Shows second dollar amount on left or right side for 2 seconds&amp;#10;&amp;#10;# Get practice_decision_index and practice_decision_block from globals&amp;#10;practice_decision_index = globals().get('practice_decision_index', 0)&amp;#10;practice_decision_block = globals().get('practice_decision_block', [])&amp;#10;&amp;#10;# DEBUG: Print block info&amp;#10;print(f&quot;DEBUG practiceDecisionStimulus2: practice_decision_index={practice_decision_index}, block_length={len(practice_decision_block) if practice_decision_block else 0}&quot;)&amp;#10;&amp;#10;if practice_decision_block and practice_decision_index &gt;= 0 and practice_decision_index &lt; len(practice_decision_block):&amp;#10;    current = practice_decision_block[practice_decision_index]&amp;#10;    second_dollar = current[&quot;secondDollar&quot;]  # Dollar amount (e.g., &quot;$5&quot;, &quot;$1&quot;, &quot;$10&quot;)&amp;#10;    second_side = current[&quot;secondSide&quot;]&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question_3' in locals():&amp;#10;        text_question_3.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question_3.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question_3.pos = (0, 0)&amp;#10;        text_question_3.opacity = 1&amp;#10;        text_question_3.setAutoDraw(True)&amp;#10;    &amp;#10;    # Hide previous crosshair&amp;#10;    if 'text_crosshair_practice_decision1' in locals():&amp;#10;        text_crosshair_practice_decision1.opacity = 0&amp;#10;        text_crosshair_practice_decision1.setAutoDraw(False)&amp;#10;    elif 'text_25' in locals():&amp;#10;        text_25.opacity = 0&amp;#10;        text_25.setAutoDraw(False)&amp;#10;    &amp;#10;    # Hide first dollar amount (from practiceDecisionStimulus1)&amp;#10;    if 'text_dollar_left_practice' in locals():&amp;#10;        text_dollar_left_practice.opacity = 0&amp;#10;        text_dollar_left_practice.setAutoDraw(False)&amp;#10;    if 'text_dollar_right_practice' in locals():&amp;#10;        text_dollar_right_practice.opacity = 0&amp;#10;        text_dollar_right_practice.setAutoDraw(False)&amp;#10;    &amp;#10;    # Show second dollar amount on its designated side (using _2 components)&amp;#10;    if second_side == &quot;left&quot;:&amp;#10;        if 'text_dollar_left_practice_2' in locals():&amp;#10;            text_dollar_left_practice_2.text = second_dollar&amp;#10;            text_dollar_left_practice_2.opacity = 1&amp;#10;            # Set larger font size for currency numbers&amp;#10;            try:&amp;#10;                text_dollar_left_practice_2.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;            except AttributeError:&amp;#10;                pass  # If height can't be set, continue anyway&amp;#10;            text_dollar_left_practice_2.setAutoDraw(True)&amp;#10;    else:  # right&amp;#10;        if 'text_dollar_right_practice_2' in locals():&amp;#10;            text_dollar_right_practice_2.text = second_dollar&amp;#10;            text_dollar_right_practice_2.opacity = 1&amp;#10;            # Set larger font size for currency numbers&amp;#10;            try:&amp;#10;                text_dollar_right_practice_2.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;            except AttributeError:&amp;#10;                pass  # If height can't be set, continue anyway&amp;#10;            text_dollar_right_practice_2.setAutoDraw(True)&amp;#10;    &amp;#10;    print(f&quot;Practice decision {practice_decision_index+1}/3: Showing {second_dollar} on {second_side} (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(f&quot;WARNING: Practice decision trial {practice_decision_index} out of range&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide dollar amount text components when practiceDecisionStimulus2 ends&amp;#10;# This ensures clean transition to crosshair ITI&amp;#10;if 'text_dollar_left_practice_2' in locals():&amp;#10;    text_dollar_left_practice_2.setAutoDraw(False)&amp;#10;    text_dollar_left_practice_2.opacity = 0&amp;#10;    text_dollar_left_practice_2.text = &quot;&quot;  # Clear text&amp;#10;if 'text_dollar_right_practice_2' in locals():&amp;#10;    text_dollar_right_practice_2.setAutoDraw(False)&amp;#10;    text_dollar_right_practice_2.opacity = 0&amp;#10;    text_dollar_right_practice_2.text = &quot;&quot;  # Clear text&amp;#10;if 'text_question_3' in locals():&amp;#10;    text_question_3.setAutoDraw(False)&amp;#10;    text_question_3.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_30" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_dollar_left_practice_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_left_practice_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_dollar_right_practice_2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_right_practice_2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="practiceDecisionMaking">
      <RoutineSettingsComponent name="practiceDecisionMaking" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceDecisionMaking" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_question_4" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_question_4" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_31" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="import * as time from 'time';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;practice_decision_index = globals().get(&quot;practice_decision_index&quot;, (- 1));&amp;#10;practice_decision_block = globals().get(&quot;practice_decision_block&quot;, []);&amp;#10;if (((practice_decision_block &amp;&amp; (practice_decision_index &gt;= 0)) &amp;&amp; (practice_decision_index &lt; practice_decision_block.length))) {&amp;#10;    current = practice_decision_block[practice_decision_index];&amp;#10;    leftFile = current[&quot;leftFruit&quot;];&amp;#10;    rightFile = current[&quot;rightFruit&quot;];&amp;#10;    correct = current[&quot;correct&quot;];&amp;#10;    if (_pj.in_es6(&quot;text_question_4&quot;, locals())) {&amp;#10;        text_question_4.text = &quot;+&quot;;&amp;#10;        try {&amp;#10;            text_question_4.setPos([0, 0]);&amp;#10;        } catch(e) {&amp;#10;            if ((e instanceof AttributeError)) {&amp;#10;                text_question_4.pos = [0, 0];&amp;#10;            } else {&amp;#10;                throw e;&amp;#10;            }&amp;#10;        }&amp;#10;        text_question_4.opacity = 1;&amp;#10;        text_question_4.setAutoDraw(true);&amp;#10;    }&amp;#10;    if (_pj.in_es6(&quot;text_25&quot;, locals())) {&amp;#10;        text_25.opacity = 0;&amp;#10;        text_25.setAutoDraw(false);&amp;#10;    }&amp;#10;    if (_pj.in_es6(&quot;image_left_left1&quot;, locals())) {&amp;#10;        image_left_left1.setImage(leftFile);&amp;#10;        image_left_left1.opacity = 1;&amp;#10;        image_left_left1.setAutoDraw(true);&amp;#10;    }&amp;#10;    if (_pj.in_es6(&quot;image_right_right1&quot;, locals())) {&amp;#10;        image_right_right1.setImage(rightFile);&amp;#10;        image_right_right1.opacity = 1;&amp;#10;        image_right_right1.setAutoDraw(true);&amp;#10;    }&amp;#10;    choice = &quot;&quot;;&amp;#10;    decision_start_time = time.time();&amp;#10;    decision_timed_out = false;&amp;#10;    globals()[&quot;choice&quot;] = choice;&amp;#10;    globals()[&quot;decision_start_time&quot;] = decision_start_time;&amp;#10;    globals()[&quot;decision_timed_out&quot;] = false;&amp;#10;    try {&amp;#10;        psychoJS.eventManager.clearEvents();&amp;#10;        console.log(`Cleared key buffer at practice decision start`);&amp;#10;    } catch(e) {&amp;#10;    }&amp;#10;    ignore_keys_until = (decision_start_time + 0.1);&amp;#10;    globals()[&quot;ignore_keys_until&quot;] = ignore_keys_until;&amp;#10;    if (_pj.in_es6(&quot;mouse_2&quot;, locals())) {&amp;#10;        mouse_2.clickReset();&amp;#10;    }&amp;#10;    console.log(`Practice decision ${(practice_decision_index + 1)}/3: ${leftFile} vs ${rightFile}, correct=${correct}`);&amp;#10;} else {&amp;#10;    leftFile = &quot;images/blank.png&quot;;&amp;#10;    rightFile = &quot;images/blank.png&quot;;&amp;#10;    choice = &quot;&quot;;&amp;#10;    console.log(&quot;No more practice decision trials available&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice decision phase - both dollar amounts shown simultaneously (2 seconds fixed)&amp;#10;# Components: text_question_4, text_dollar_left_practice, text_dollar_right_practice, mouse_2&amp;#10;# Shows both dollar amounts together for decision&amp;#10;import time&amp;#10;&amp;#10;# Get practice_decision_index and practice_decision_block from globals&amp;#10;practice_decision_index = globals().get('practice_decision_index', 0)&amp;#10;practice_decision_block = globals().get('practice_decision_block', [])&amp;#10;&amp;#10;if practice_decision_block and practice_decision_index &gt;= 0 and practice_decision_index &lt; len(practice_decision_block):&amp;#10;    current = practice_decision_block[practice_decision_index]&amp;#10;    leftDollar  = current[&quot;leftDollar&quot;]   # Dollar amount for left (e.g., &quot;$5&quot;)&amp;#10;    rightDollar = current[&quot;rightDollar&quot;]  # Dollar amount for right (e.g., &quot;$1&quot;)&amp;#10;    correct     = current[&quot;correct&quot;]&amp;#10;    &amp;#10;    # Show central fixation cross&amp;#10;    if 'text_question_4' in locals():&amp;#10;        text_question_4.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_question_4.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_question_4.pos = (0, 0)&amp;#10;        text_question_4.opacity = 1&amp;#10;        text_question_4.setAutoDraw(True)&amp;#10;    &amp;#10;    # Hide previous crosshair&amp;#10;    if 'text_crosshair_practice_decision2' in locals():&amp;#10;        text_crosshair_practice_decision2.opacity = 0&amp;#10;        text_crosshair_practice_decision2.setAutoDraw(False)&amp;#10;    &amp;#10;    # Hide dollar amounts from previous routines&amp;#10;    if 'text_dollar_left_practice' in locals():&amp;#10;        text_dollar_left_practice.opacity = 0&amp;#10;        text_dollar_left_practice.setAutoDraw(False)&amp;#10;    if 'text_dollar_right_practice' in locals():&amp;#10;        text_dollar_right_practice.opacity = 0&amp;#10;        text_dollar_right_practice.setAutoDraw(False)&amp;#10;    if 'text_dollar_left_practice_2' in locals():&amp;#10;        text_dollar_left_practice_2.opacity = 0&amp;#10;        text_dollar_left_practice_2.setAutoDraw(False)&amp;#10;    if 'text_dollar_right_practice_2' in locals():&amp;#10;        text_dollar_right_practice_2.opacity = 0&amp;#10;        text_dollar_right_practice_2.setAutoDraw(False)&amp;#10;    &amp;#10;    # Show both dollar amounts simultaneously (using _3 components)&amp;#10;    if 'text_dollar_left_practice_3' in locals():&amp;#10;        text_dollar_left_practice_3.text = leftDollar&amp;#10;        text_dollar_left_practice_3.opacity = 1&amp;#10;        # Set larger font size for currency numbers&amp;#10;        try:&amp;#10;            text_dollar_left_practice_3.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;        except AttributeError:&amp;#10;            pass  # If height can't be set, continue anyway&amp;#10;        text_dollar_left_practice_3.setAutoDraw(True)&amp;#10;    if 'text_dollar_right_practice_3' in locals():&amp;#10;        text_dollar_right_practice_3.text = rightDollar&amp;#10;        text_dollar_right_practice_3.opacity = 1&amp;#10;        # Set larger font size for currency numbers&amp;#10;        try:&amp;#10;            text_dollar_right_practice_3.height = 0.1  # Larger font size (default is typically 0.05)&amp;#10;        except AttributeError:&amp;#10;            pass  # If height can't be set, continue anyway&amp;#10;        text_dollar_right_practice_3.setAutoDraw(True)&amp;#10;    &amp;#10;    # Reset choice and start timer (for practice, allow responses during 2 second display)&amp;#10;    choice = &quot;&quot;&amp;#10;    decision_start_time = time.time()&amp;#10;    decision_timed_out = False&amp;#10;    &amp;#10;    # Store in globals for use in EachFrame&amp;#10;    globals()['choice'] = choice&amp;#10;    globals()['decision_start_time'] = decision_start_time&amp;#10;    globals()['decision_timed_out'] = False&amp;#10;    &amp;#10;    # Clear any key presses from previous routines ONCE at the start&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;        print(f&quot;Cleared key buffer at practice decision start&quot;)&amp;#10;    except:&amp;#10;        pass&amp;#10;    &amp;#10;    # Set a small ignore window to prevent immediate key registration (0.1 seconds)&amp;#10;    ignore_keys_until = decision_start_time + 0.1&amp;#10;    globals()['ignore_keys_until'] = ignore_keys_until&amp;#10;    &amp;#10;    if 'mouse_2' in locals():&amp;#10;        mouse_2.clickReset()&amp;#10;    print(f&quot;Practice decision {practice_decision_index+1}/3: {leftDollar} vs {rightDollar}, correct={correct} (2 seconds fixed)&quot;)&amp;#10;else:&amp;#10;    # No more practice decision trials&amp;#10;    leftDollar = &quot;&quot;&amp;#10;    rightDollar = &quot;&quot;&amp;#10;    choice = &quot;&quot;&amp;#10;    print(&quot;No more practice decision trials available&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice decision phase - check for response (2 seconds fixed duration)&amp;#10;# Using keys 1/3: 1 = left image, 3 = right image&amp;#10;import time&amp;#10;&amp;#10;# Get practice_decision_index from globals (needed for logging)&amp;#10;practice_decision_index = globals().get('practice_decision_index', -1)&amp;#10;&amp;#10;# Get decision_start_time and ignore_keys_until from globals (set in BeginRoutine)&amp;#10;decision_start_time = globals().get('decision_start_time', time.time())&amp;#10;ignore_keys_until = globals().get('ignore_keys_until', decision_start_time + 0.1)&amp;#10;&amp;#10;# Initialize decision_timed_out if not already set&amp;#10;decision_timed_out = globals().get('decision_timed_out', False)&amp;#10;&amp;#10;# Check for timeout (2 seconds max for practice)&amp;#10;try:&amp;#10;    elapsed_time = time.time() - decision_start_time&amp;#10;    &amp;#10;    if elapsed_time &gt;= 2.0:&amp;#10;        # Timeout - no response (routine will end at 2 seconds fixed duration)&amp;#10;        if not globals().get('choice', &quot;&quot;):&amp;#10;            choice = &quot;&quot;&amp;#10;            decision_rt = 2.0&amp;#10;            decision_timed_out = True&amp;#10;            # Store in globals for EndRoutine&amp;#10;            globals()['decision_timed_out'] = True&amp;#10;            globals()['decision_rt'] = 2.0&amp;#10;            print(f&quot;Practice decision {practice_decision_index+1}/3: No response within 2.0 seconds&quot;)&amp;#10;        continueRoutine = False&amp;#10;except:&amp;#10;    decision_timed_out = False&amp;#10;&amp;#10;# Only check for keys if we're past the ignore window AND not timed out&amp;#10;if not decision_timed_out:&amp;#10;    current_time = time.time()&amp;#10;    if current_time &gt;= ignore_keys_until:&amp;#10;        # Check for keyboard input (keys 1 or 3)&amp;#10;        try:&amp;#10;            keys = event.getKeys(keyList=['1', '3', 'num_1', 'num_3'])&amp;#10;            for key in keys:&amp;#10;                # Normalize key names (handle both '1' and 'num_1' formats)&amp;#10;                if key == 'num_1' or key == '1':&amp;#10;                    # Key 1: Choose left image&amp;#10;                    choice = &quot;left&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    # Store in globals&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Practice decision {practice_decision_index+1}/3: Chose left (key 1, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                    # Clear events after processing&amp;#10;                    try:&amp;#10;                        event.clearEvents()&amp;#10;                    except:&amp;#10;                        pass&amp;#10;                    break&amp;#10;                elif key == 'num_3' or key == '3':&amp;#10;                    # Key 3: Choose right image&amp;#10;                    choice = &quot;right&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    # Store in globals&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Practice decision {practice_decision_index+1}/3: Chose right (key 3, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                    # Clear events after processing&amp;#10;                    try:&amp;#10;                        event.clearEvents()&amp;#10;                    except:&amp;#10;                        pass&amp;#10;                    break&amp;#10;        except (NameError, AttributeError):&amp;#10;            # Fallback: Check for mouse click (using mouse_2 and correct image components)&amp;#10;            if 'mouse_2' in locals() and 'image_left_left1' in locals() and 'image_right_right1' in locals():&amp;#10;                if mouse_2.isPressedIn(image_left_left1):&amp;#10;                    choice = &quot;left&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Practice decision {practice_decision_index+1}/3: Chose left (mouse, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;                elif mouse_2.isPressedIn(image_right_right1):&amp;#10;                    choice = &quot;right&quot;&amp;#10;                    decision_rt = time.time() - decision_start_time&amp;#10;                    decision_timed_out = False&amp;#10;                    globals()['choice'] = choice&amp;#10;                    globals()['decision_rt'] = decision_rt&amp;#10;                    globals()['decision_timed_out'] = False&amp;#10;                    print(f&quot;Practice decision {practice_decision_index+1}/3: Chose right (mouse, RT={decision_rt:.2f}s)&quot;)&amp;#10;                    continueRoutine = False&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Get practice_decision_index and practice_decision_block from globals&amp;#10;practice_decision_index = globals().get('practice_decision_index', -1)&amp;#10;practice_decision_block = globals().get('practice_decision_block', [])&amp;#10;&amp;#10;# Get choice, decision_rt, and decision_timed_out from globals (set in EachFrame)&amp;#10;choice = globals().get('choice', &quot;&quot;)&amp;#10;decision_rt = globals().get('decision_rt', 4.0)&amp;#10;decision_timed_out = globals().get('decision_timed_out', False)&amp;#10;&amp;#10;# Get leftDollar and rightDollar from current trial&amp;#10;if practice_decision_block and practice_decision_index &gt;= 0 and practice_decision_index &lt; len(practice_decision_block):&amp;#10;    current = practice_decision_block[practice_decision_index]&amp;#10;    leftDollar = current.get(&quot;leftDollar&quot;, &quot;&quot;)&amp;#10;    rightDollar = current.get(&quot;rightDollar&quot;, &quot;&quot;)&amp;#10;    correct = current.get(&quot;correct&quot;, &quot;&quot;)&amp;#10;else:&amp;#10;    leftDollar = &quot;&quot;&amp;#10;    rightDollar = &quot;&quot;&amp;#10;    correct = &quot;&quot;&amp;#10;&amp;#10;# Determine correctness&amp;#10;was_correct = (choice == correct) if choice else False&amp;#10;&amp;#10;# Convert reaction time to milliseconds&amp;#10;decision_rt_value = decision_rt if decision_rt is not None else 4.0&amp;#10;decision_rt_ms = int(decision_rt_value * 1000)&amp;#10;&amp;#10;# Calculate timeout duration for timeout screen (1.5 seconds if timed out, 0 otherwise)&amp;#10;decision_timeout_duration = 1.5 if decision_timed_out else 0.0&amp;#10;globals()['decision_timeout_duration'] = decision_timeout_duration&amp;#10;&amp;#10;# Log the practice decision data (for debugging/monitoring, not saved to CSV)&amp;#10;print(f&quot;Practice decision {practice_decision_index+1}/3: {choice} (correct: {correct}, accurate: {was_correct}, RT: {decision_rt_value:.2f}s, timed_out: {decision_timed_out})&quot;)&amp;#10;print(f&quot;Practice decision EndRoutine: RT={decision_rt_value:.3f}s={decision_rt_ms}ms, responded_in_time={not decision_timed_out}, timed_out={decision_timed_out}&quot;)&amp;#10;&amp;#10;# Hide dollar amount text components (from practiceDecisionMaking - _3 components)&amp;#10;if 'text_dollar_left_practice_3' in locals():&amp;#10;    text_dollar_left_practice_3.setAutoDraw(False)&amp;#10;    text_dollar_left_practice_3.opacity = 0&amp;#10;if 'text_dollar_right_practice_3' in locals():&amp;#10;    text_dollar_right_practice_3.setAutoDraw(False)&amp;#10;    text_dollar_right_practice_3.opacity = 0&amp;#10;if 'text_question_4' in locals():&amp;#10;    text_question_4.setAutoDraw(False)&amp;#10;    text_question_4.opacity = 0&amp;#10;&amp;#10;# Practice decision trials don't increment the regular decision_index&amp;#10;# They're separate and just for practice&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_31" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_dollar_right_practice_3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_right_practice_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="text_dollar_left_practice_3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_dollar_left_practice_3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(-0.4, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="taskStartSoonBlock3">
      <RoutineSettingsComponent name="taskStartSoonBlock3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="taskStartSoonBlock3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_32" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# &quot;Task will start soon. Press 2 to continue&quot; screen - for third block (decision phase)&amp;#10;# Shows after practice decision trials complete&amp;#10;# Component: text_task_start_soon_block3 (or similar text component)&amp;#10;&amp;#10;# Clear any previous key presses IMMEDIATELY to prevent carryover&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Set a timestamp to ignore any keys pressed before this routine started&amp;#10;import time&amp;#10;globals()['taskStartSoonBlock3_start_time'] = time.time()&amp;#10;&amp;#10;# Display task start message&amp;#10;if 'text_task_start_soon_block3' in locals():&amp;#10;    text_task_start_soon_block3.text = &quot;The task will start soon. Press C to continue&quot;&amp;#10;    text_task_start_soon_block3.opacity = 1&amp;#10;    text_task_start_soon_block3.setAutoDraw(True)&amp;#10;    print(&quot;Task start soon screen displayed (for Block 3 - decision phase)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_task_start_soon_block3 component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Task start soon Block 3 - wait for key press '2' to continue&amp;#10;# Check for key press '2' to continue to scanner sync&amp;#10;import time&amp;#10;&amp;#10;# Only accept keys pressed AFTER this routine started (ignore carryover)&amp;#10;routine_start_time = globals().get('taskStartSoonBlock3_start_time', time.time())&amp;#10;current_time = time.time()&amp;#10;&amp;#10;# Only process keys if at least 0.1 seconds have passed since routine started&amp;#10;if current_time - routine_start_time &gt;= 0.1:&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['c', 'C'])&amp;#10;        if keys:&amp;#10;            # Key 2 pressed - continue to scanner sync&amp;#10;            print(&quot;Task start soon Block 3: Key C pressed, continuing to scanner sync&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_32" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_task_start_soon_block3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_task_start_soon_block3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="The task will start soon. Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="scannerSyncBlock3">
      <RoutineSettingsComponent name="scannerSyncBlock3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerSyncBlock3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_33" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="import * as time from 'time';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;globals()[&quot;scannerSyncBlock3_start_time&quot;] = time.time();&amp;#10;if (_pj.in_es6(&quot;text_scanner_wait_block3&quot;, locals())) {&amp;#10;    text_scanner_wait_block3.text = &quot;Waiting for the scanner to start...&quot;;&amp;#10;    text_scanner_wait_block3.opacity = 1;&amp;#10;    text_scanner_wait_block3.setAutoDraw(true);&amp;#10;    console.log(&quot;Scanner sync Block 3: Waiting for trigger '5' from MRI scanner&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_scanner_wait_block3 component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# MRI Scanner sync Block 3 - wait for scanner trigger (key '5')&amp;#10;# Shows after taskStartSoonBlock3 completes&amp;#10;# Component: text_scanner_wait_block3 (or similar text component)&amp;#10;&amp;#10;# Clear any previous key presses IMMEDIATELY to prevent carryover&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Set a timestamp to ignore any keys pressed before this routine started&amp;#10;import time&amp;#10;globals()['scannerSyncBlock3_start_time'] = time.time()&amp;#10;&amp;#10;# Display waiting message&amp;#10;if 'text_scanner_wait_block3' in locals():&amp;#10;    text_scanner_wait_block3.text = &quot;Waiting for the scanner to start...&quot;&amp;#10;    text_scanner_wait_block3.opacity = 1&amp;#10;    text_scanner_wait_block3.setAutoDraw(True)&amp;#10;    print(&quot;Scanner sync Block 3: Waiting for trigger '5' from MRI scanner&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_scanner_wait_block3 component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Scanner sync Block 3 - wait for MRI scanner trigger (key '5')&amp;#10;# The MRI sends '5' when it's ready&amp;#10;# Only accept keys pressed AFTER this routine started (ignore carryover)&amp;#10;import time&amp;#10;&amp;#10;routine_start_time = globals().get('scannerSyncBlock3_start_time', time.time())&amp;#10;current_time = time.time()&amp;#10;&amp;#10;# Only process keys if at least 0.1 seconds have passed since routine started&amp;#10;if current_time - routine_start_time &gt;= 0.1:&amp;#10;    try:&amp;#10;        keys = event.getKeys(keyList=['5', 'num_5'])&amp;#10;        if keys:&amp;#10;            # Scanner trigger received - continue to next screen&amp;#10;            print(&quot;Scanner sync Block 3: Trigger '5' received from MRI scanner, continuing&quot;)&amp;#10;            continueRoutine = False&amp;#10;            event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_33" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_scanner_wait_block3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_scanner_wait_block3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Waiting for the scanner to start..." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshair3Block3">
      <RoutineSettingsComponent name="crosshair3Block3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair3Block3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_34" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_crosshair3_block3&quot;, locals())) {&amp;#10;    text_crosshair3_block3.text = &quot;+&quot;;&amp;#10;    try {&amp;#10;        text_crosshair3_block3.setPos([0, 0]);&amp;#10;    } catch(e) {&amp;#10;        if ((e instanceof AttributeError)) {&amp;#10;            text_crosshair3_block3.pos = [0, 0];&amp;#10;        } else {&amp;#10;            throw e;&amp;#10;        }&amp;#10;    }&amp;#10;    text_crosshair3_block3.opacity = 1;&amp;#10;    text_crosshair3_block3.setAutoDraw(true);&amp;#10;    console.log(&quot;Crosshair 3 Block 3: Showing fixation cross (2 seconds)&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_crosshair3_block3 component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair 3 Block 3 - 2 second fixation cross before Block 3 (decision phase)&amp;#10;# Component: text_crosshair3_block3 (or similar text component)&amp;#10;&amp;#10;# Show fixation cross&amp;#10;if 'text_crosshair3_block3' in locals():&amp;#10;    text_crosshair3_block3.text = &quot;+&quot;&amp;#10;    try:&amp;#10;        text_crosshair3_block3.setPos((0, 0))&amp;#10;    except AttributeError:&amp;#10;        text_crosshair3_block3.pos = (0, 0)&amp;#10;    text_crosshair3_block3.opacity = 1&amp;#10;    text_crosshair3_block3.setAutoDraw(True)&amp;#10;    print(&quot;Crosshair 3 Block 3: Showing fixation cross (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_crosshair3_block3 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair&amp;#10;if 'text_crosshair3_block3' in locals():&amp;#10;    text_crosshair3_block3.setAutoDraw(False)&amp;#10;    text_crosshair3_block3.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_34" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_crosshair3_block3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair3_block3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="scannerWaitBlock3">
      <RoutineSettingsComponent name="scannerWaitBlock3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerWaitBlock3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_35" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;image_scanner_wait_block3&quot;, locals())) {&amp;#10;    image_scanner_wait_block3.opacity = 1;&amp;#10;    image_scanner_wait_block3.setAutoDraw(true);&amp;#10;    console.log(&quot;Scanner wait Block 3: Showing wait image (2 seconds)&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: image_scanner_wait_block3 component not found!&quot;);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Scanner wait Block 3 - shows wait image for 2 seconds before Block 3 (decision phase)&amp;#10;# Component: image_scanner_wait_block3 (or similar image component)&amp;#10;&amp;#10;# Show wait image&amp;#10;if 'image_scanner_wait_block3' in locals():&amp;#10;    image_scanner_wait_block3.opacity = 1&amp;#10;    image_scanner_wait_block3.setAutoDraw(True)&amp;#10;    print(&quot;Scanner wait Block 3: Showing wait image (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: image_scanner_wait_block3 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide wait image&amp;#10;if 'image_scanner_wait_block3' in locals():&amp;#10;    image_scanner_wait_block3.setAutoDraw(False)&amp;#10;    image_scanner_wait_block3.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_35" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <ImageComponent name="image_scanner_wait_block3" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/randomImage.jpg" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_scanner_wait_block3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 1)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
    </Routine>
    <Routine name="startTaskBlock3">
      <RoutineSettingsComponent name="startTaskBlock3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="startTaskBlock3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_36" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="console.log(&quot;Start task Block 3: Brief pause before decision trials (1 second)&quot;);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Start task Block 3 - 1 second before Block 3 (decision phase) begins&amp;#10;# Component: text_start_task_block3 (or similar text component, optional)&amp;#10;&amp;#10;# This is just a brief pause before Block 3 decision trials start&amp;#10;# You can add text here if needed, or leave it empty&amp;#10;print(&quot;Start task Block 3: Brief pause before decision trials (1 second)&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_36" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_26" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_26" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="10" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshairBlock2">
      <RoutineSettingsComponent name="crosshairBlock2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshairBlock2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_crosshair_block2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair_block2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_37" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair Block 2 - 2 second fixation cross before Block 2 begins&amp;#10;# Component: text_crosshair_block2 (or similar text component)&amp;#10;&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block 2 setup is complete (block2_setup_complete = True) - NEVER show again once setup is complete&amp;#10;# 2. Still in Block 1 (learning_block_index &lt; trials_per_block - 1)&amp;#10;# 3. Already well into Block 2 trials (learning_block_index &gt; trials_per_block) - once Block 2 trials start, never show again&amp;#10;# Show during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    print(f&quot;Skipping crosshairBlock2 (learning_block_index={learning_block_index}, trials_per_block={trials_per_block}, block2_setup_complete={block2_setup_complete})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Show fixation cross&amp;#10;    if 'text_crosshair_block2' in locals():&amp;#10;        text_crosshair_block2.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_crosshair_block2.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_crosshair_block2.pos = (0, 0)&amp;#10;        text_crosshair_block2.opacity = 1&amp;#10;        text_crosshair_block2.setAutoDraw(True)&amp;#10;        print(&quot;Crosshair Block 2: Showing fixation cross (2 seconds)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_crosshair_block2 component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Crosshair Block 2 - just displays fixation cross, no interaction needed&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if Block 2 setup is complete OR Block 2 has already started (well into Block 2)&amp;#10;# Allow during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &gt; trials_per_block:&amp;#10;    continueRoutine = False&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair when routine ends&amp;#10;if 'text_crosshair_block2' in locals():&amp;#10;    text_crosshair_block2.setAutoDraw(False)&amp;#10;    text_crosshair_block2.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_37" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="scannerWaitBlock2">
      <RoutineSettingsComponent name="scannerWaitBlock2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="scannerWaitBlock2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <ImageComponent name="image_scanner_wait_block2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="images/randomImage.jpg" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_scanner_wait_block2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1, 1)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <CodeComponent name="code_38" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Scanner wait Block 2 - 2 second display of unrelated image before Block 2 begins&amp;#10;# Component: image_scanner_wait_block2 (or similar image component)&amp;#10;&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block 2 setup is complete (block2_setup_complete = True) - NEVER show again once setup is complete&amp;#10;# 2. Still in Block 1 (learning_block_index &lt; trials_per_block - 1)&amp;#10;# 3. Already well into Block 2 trials (learning_block_index &gt; trials_per_block) - once Block 2 trials start, never show again&amp;#10;# Show during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    print(f&quot;Skipping scannerWaitBlock2 (learning_block_index={learning_block_index}, trials_per_block={trials_per_block}, block2_setup_complete={block2_setup_complete})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Show unrelated image (2 seconds)&amp;#10;    if 'image_scanner_wait_block2' in locals():&amp;#10;        # Set image to some unrelated image (e.g., &quot;images/unrelated.png&quot; or similar)&amp;#10;        # You may need to adjust the image path based on your setup&amp;#10;        image_scanner_wait_block2.opacity = 1&amp;#10;        image_scanner_wait_block2.setAutoDraw(True)&amp;#10;        print(&quot;Scanner wait Block 2: Showing unrelated image (2 seconds)&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: image_scanner_wait_block2 component not found!&quot;)&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Scanner wait Block 2 - just displays unrelated image, no interaction needed&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if Block 2 setup is complete OR Block 2 has already started (well into Block 2)&amp;#10;# Allow during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &gt; trials_per_block:&amp;#10;    continueRoutine = False&amp;#10;&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide scanner wait image when routine ends&amp;#10;if 'image_scanner_wait_block2' in locals():&amp;#10;    image_scanner_wait_block2.setAutoDraw(False)&amp;#10;    image_scanner_wait_block2.opacity = 0&amp;#10;# Do NOT set block2_setup_complete here - wait until after final crosshair (crosshair2Block2)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_38" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="crosshair2Block2">
      <RoutineSettingsComponent name="crosshair2Block2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair2Block2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_crosshair2_block2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair2_block2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="10" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <CodeComponent name="code_39" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair2 Block 2 - 10 second fixation cross before Block 2 begins (final crosshair)&amp;#10;# Component: text_crosshair2_block2 (or similar text component)&amp;#10;&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block 2 setup is complete (block2_setup_complete = True) - NEVER show again once setup is complete&amp;#10;# 2. Still in Block 1 (learning_block_index &lt; trials_per_block - 1)&amp;#10;# 3. Already well into Block 2 trials (learning_block_index &gt; trials_per_block) - once Block 2 trials start, never show again&amp;#10;# Show during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &lt; trials_per_block - 1 or learning_block_index &gt; trials_per_block:&amp;#10;    print(f&quot;Skipping crosshair2Block2 (learning_block_index={learning_block_index}, trials_per_block={trials_per_block}, block2_setup_complete={block2_setup_complete})&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Show fixation cross&amp;#10;    if 'text_crosshair2_block2' in locals():&amp;#10;        text_crosshair2_block2.text = &quot;+&quot;&amp;#10;        try:&amp;#10;            text_crosshair2_block2.setPos((0, 0))&amp;#10;        except AttributeError:&amp;#10;            text_crosshair2_block2.pos = (0, 0)&amp;#10;        text_crosshair2_block2.opacity = 1&amp;#10;        text_crosshair2_block2.setAutoDraw(True)&amp;#10;        print(&quot;Crosshair2 Block 2: Showing fixation cross (10 seconds)&quot;)&amp;#10;        # Set flag to indicate this routine actually ran&amp;#10;        globals()['crosshair2Block2_actually_ran'] = True&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_crosshair2_block2 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Crosshair2 Block 2 - just displays fixation cross, no interaction needed&amp;#10;# Check if Block 2 has already started - if so, skip this routine&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if Block 2 setup is complete OR Block 2 has already started (well into Block 2)&amp;#10;# Allow during transition: learning_block_index &gt;= trials_per_block - 1 AND learning_block_index &lt;= trials_per_block&amp;#10;if block2_setup_complete or learning_block_index &gt; trials_per_block:&amp;#10;    continueRoutine = False&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# IMPORTANT: Only set block2_setup_complete if this routine actually ran (wasn't skipped)&amp;#10;# Check if the routine was actually shown by checking the flag set in BeginRoutine&amp;#10;routine_actually_ran = globals().get('crosshair2Block2_actually_ran', False)&amp;#10;&amp;#10;if 'text_crosshair2_block2' in locals():&amp;#10;    # Hide crosshair2 Block 2 text when routine ends&amp;#10;    text_crosshair2_block2.setAutoDraw(False)&amp;#10;    text_crosshair2_block2.opacity = 0&amp;#10;    print(&quot;Crosshair2 Block 2 text hidden&quot;)&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# IMPORTANT: ONLY mark block 2 setup as complete if this routine actually ran&amp;#10;# This prevents the flag from being set when the routine is skipped&amp;#10;# Sequence: scannerSyncBlock2 → crosshairBlock2 → scannerWaitBlock2 → crosshair2Block2 (this routine)&amp;#10;if routine_actually_ran:&amp;#10;    globals()['ready_for_block2_setup'] = False&amp;#10;    globals()['ready_for_scanner_sync_block2'] = False&amp;#10;    globals()['block2_setup_complete'] = True&amp;#10;    print(&quot;Block 2 setup complete - all scanner sync routines finished (scannerSyncBlock2 → crosshairBlock2 → scannerWaitBlock2 → crosshair2Block2), ready for Block 2 trials&quot;)&amp;#10;else:&amp;#10;    print(&quot;DEBUG: crosshair2Block2EndRoutine called but routine was skipped - NOT setting block2_setup_complete&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_39" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="crosshair5">
      <RoutineSettingsComponent name="crosshair5" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair5" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_40" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# First crosshair screen - duration set dynamically based on trial response time&amp;#10;# Duration is set in trialEndRoutine.py as crosshair1_duration&amp;#10;# This routine will show a crosshair in the center of the screen&amp;#10;&amp;#10;# Make sure crosshair is visible (add a crosshair component in Builder)&amp;#10;if 'crosshair' in locals():&amp;#10;    crosshair.opacity = 1&amp;#10;    crosshair.setAutoDraw(True)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;    crosshair.opacity = 1;&amp;#10;    crosshair.setAutoDraw(true);&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_40" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_27" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_27" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshairPracticeDecision1">
      <RoutineSettingsComponent name="crosshairPracticeDecision1" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshairPracticeDecision1" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_41" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_crosshair_practice_decision1&quot;, locals())) {&amp;#10;    text_crosshair_practice_decision1.text = &quot;+&quot;;&amp;#10;    try {&amp;#10;        text_crosshair_practice_decision1.setPos([0, 0]);&amp;#10;    } catch(e) {&amp;#10;        if ((e instanceof AttributeError)) {&amp;#10;            text_crosshair_practice_decision1.pos = [0, 0];&amp;#10;        } else {&amp;#10;            throw e;&amp;#10;        }&amp;#10;    }&amp;#10;    text_crosshair_practice_decision1.opacity = 1;&amp;#10;    text_crosshair_practice_decision1.setAutoDraw(true);&amp;#10;    console.log(&quot;Crosshair Practice Decision 1: Showing fixation cross (1 second)&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_crosshair_practice_decision1 component not found!&quot;);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_left3&quot;, locals())) {&amp;#10;    image_left3.setAutoDraw(false);&amp;#10;    image_left3.opacity = 0;&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_right3&quot;, locals())) {&amp;#10;    image_right3.setAutoDraw(false);&amp;#10;    image_right3.opacity = 0;&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair ITI 1 for practice decision trials - 1 second fixed duration&amp;#10;# Shows crosshair between practiceDecisionStimulus1 and practiceDecisionStimulus2&amp;#10;# Component: text_crosshair_practice_decision1 (or similar crosshair component)&amp;#10;&amp;#10;# IMPORTANT: Hide ALL previous dollar amount text components from practiceDecisionStimulus1&amp;#10;# Force hide to ensure clean transition&amp;#10;if 'text_dollar_left_practice' in locals():&amp;#10;    text_dollar_left_practice.setAutoDraw(False)&amp;#10;    text_dollar_left_practice.opacity = 0&amp;#10;    text_dollar_left_practice.text = &quot;&quot;  # Clear text&amp;#10;if 'text_dollar_right_practice' in locals():&amp;#10;    text_dollar_right_practice.setAutoDraw(False)&amp;#10;    text_dollar_right_practice.opacity = 0&amp;#10;    text_dollar_right_practice.text = &quot;&quot;  # Clear text&amp;#10;if 'text_question1' in locals():&amp;#10;    text_question1.setAutoDraw(False)&amp;#10;    text_question1.opacity = 0&amp;#10;&amp;#10;# Show crosshair - make sure it's visible&amp;#10;if 'text_crosshair_practice_decision1' in locals():&amp;#10;    text_crosshair_practice_decision1.text = &quot;+&quot;&amp;#10;    try:&amp;#10;        text_crosshair_practice_decision1.setPos((0, 0))&amp;#10;    except AttributeError:&amp;#10;        text_crosshair_practice_decision1.pos = (0, 0)&amp;#10;    text_crosshair_practice_decision1.opacity = 1&amp;#10;    text_crosshair_practice_decision1.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair ITI 1 for practice decision (1 second)&quot;)&amp;#10;elif 'text_25' in locals():&amp;#10;    # Fallback component name&amp;#10;    text_25.text = &quot;+&quot;&amp;#10;    try:&amp;#10;        text_25.setPos((0, 0))&amp;#10;    except AttributeError:&amp;#10;        text_25.pos = (0, 0)&amp;#10;    text_25.opacity = 1&amp;#10;    text_25.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair ITI 1 for practice decision (using text_25, 1 second)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_crosshair_practice_decision1 or text_25 component not found!&quot;)&amp;#10;    print(&quot;  Make sure crosshairPracticeDecision1 routine has a text component named 'text_crosshair_practice_decision1'&quot;)&amp;#10;&amp;#10;# Duration is fixed at 1 second for practice trials&amp;#10;# IMPORTANT: In PsychoPy Builder, set the routine duration to 1.0 seconds&amp;#10;# The routine should have a duration of 1.0 seconds (not infinite or 0)&amp;#10;globals()['crosshair_practice_decision1_duration'] = 1.0&amp;#10;print(f&quot;Crosshair ITI 1 duration: 1.0 seconds (fixed for practice)&quot;)&amp;#10;print(f&quot;  NOTE: Make sure crosshairPracticeDecision1 routine duration is set to 1.0 seconds in Builder&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair when routine ends&amp;#10;if 'text_crosshair_practice_decision1' in locals():&amp;#10;    text_crosshair_practice_decision1.setAutoDraw(False)&amp;#10;    text_crosshair_practice_decision1.opacity = 0&amp;#10;elif 'text_25' in locals():&amp;#10;    text_25.setAutoDraw(False)&amp;#10;    text_25.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_41" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_crosshair_practice_decision1" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair_practice_decision1" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshairPracticeDecision2">
      <RoutineSettingsComponent name="crosshairPracticeDecision2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshairPracticeDecision2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_42" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_crosshair_practice_decision2&quot;, locals())) {&amp;#10;    text_crosshair_practice_decision2.text = &quot;+&quot;;&amp;#10;    try {&amp;#10;        text_crosshair_practice_decision2.setPos([0, 0]);&amp;#10;    } catch(e) {&amp;#10;        if ((e instanceof AttributeError)) {&amp;#10;            text_crosshair_practice_decision2.pos = [0, 0];&amp;#10;        } else {&amp;#10;            throw e;&amp;#10;        }&amp;#10;    }&amp;#10;    text_crosshair_practice_decision2.opacity = 1;&amp;#10;    text_crosshair_practice_decision2.setAutoDraw(true);&amp;#10;    console.log(&quot;Crosshair Practice Decision 2: Showing fixation cross (1 second)&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_crosshair_practice_decision2 component not found!&quot;);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_left1_3&quot;, locals())) {&amp;#10;    image_left1_3.setAutoDraw(false);&amp;#10;    image_left1_3.opacity = 0;&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_right2_3&quot;, locals())) {&amp;#10;    image_right2_3.setAutoDraw(false);&amp;#10;    image_right2_3.opacity = 0;&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair ITI 2 for practice decision trials - 1 second fixed duration&amp;#10;# Shows crosshair between practiceDecisionStimulus2 and practiceDecisionMaking&amp;#10;# Component: text_crosshair_practice_decision2 (or similar crosshair component)&amp;#10;&amp;#10;# IMPORTANT: Hide ALL previous dollar amount text components from practiceDecisionStimulus2&amp;#10;# Force hide to ensure clean transition&amp;#10;if 'text_dollar_left_practice_2' in locals():&amp;#10;    text_dollar_left_practice_2.setAutoDraw(False)&amp;#10;    text_dollar_left_practice_2.opacity = 0&amp;#10;    text_dollar_left_practice_2.text = &quot;&quot;  # Clear text&amp;#10;if 'text_dollar_right_practice_2' in locals():&amp;#10;    text_dollar_right_practice_2.setAutoDraw(False)&amp;#10;    text_dollar_right_practice_2.opacity = 0&amp;#10;    text_dollar_right_practice_2.text = &quot;&quot;  # Clear text&amp;#10;if 'text_question_3' in locals():&amp;#10;    text_question_3.setAutoDraw(False)&amp;#10;    text_question_3.opacity = 0&amp;#10;if 'text_crosshair_practice_decision1' in locals():&amp;#10;    text_crosshair_practice_decision1.setAutoDraw(False)&amp;#10;    text_crosshair_practice_decision1.opacity = 0&amp;#10;&amp;#10;# Show crosshair - make sure it's visible&amp;#10;if 'text_crosshair_practice_decision2' in locals():&amp;#10;    text_crosshair_practice_decision2.text = &quot;+&quot;&amp;#10;    try:&amp;#10;        text_crosshair_practice_decision2.setPos((0, 0))&amp;#10;    except AttributeError:&amp;#10;        text_crosshair_practice_decision2.pos = (0, 0)&amp;#10;    text_crosshair_practice_decision2.opacity = 1&amp;#10;    text_crosshair_practice_decision2.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair ITI 2 for practice decision (1 second)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_crosshair_practice_decision2 component not found!&quot;)&amp;#10;    print(&quot;  Make sure crosshairPracticeDecision2 routine has a text component named 'text_crosshair_practice_decision2'&quot;)&amp;#10;&amp;#10;# Duration is fixed at 1 second for practice trials&amp;#10;# IMPORTANT: In PsychoPy Builder, set the routine duration to 1.0 seconds&amp;#10;# The routine should have a duration of 1.0 seconds (not infinite or 0)&amp;#10;globals()['crosshair_practice_decision2_duration'] = 1.0&amp;#10;print(f&quot;Crosshair ITI 2 duration: 1.0 seconds (fixed for practice)&quot;)&amp;#10;print(f&quot;  NOTE: Make sure crosshairPracticeDecision2 routine duration is set to 1.0 seconds in Builder&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair when routine ends&amp;#10;if 'text_crosshair_practice_decision2' in locals():&amp;#10;    text_crosshair_practice_decision2.setAutoDraw(False)&amp;#10;    text_crosshair_practice_decision2.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_42" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_crosshair_practice_decision2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair_practice_decision2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1.0" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshairPracticeDecision3">
      <RoutineSettingsComponent name="crosshairPracticeDecision3" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshairPracticeDecision3" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_43" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;text_crosshair_practice_decision3&quot;, locals())) {&amp;#10;    text_crosshair_practice_decision3.text = &quot;+&quot;;&amp;#10;    try {&amp;#10;        text_crosshair_practice_decision3.setPos([0, 0]);&amp;#10;    } catch(e) {&amp;#10;        if ((e instanceof AttributeError)) {&amp;#10;            text_crosshair_practice_decision3.pos = [0, 0];&amp;#10;        } else {&amp;#10;            throw e;&amp;#10;        }&amp;#10;    }&amp;#10;    text_crosshair_practice_decision3.opacity = 1;&amp;#10;    text_crosshair_practice_decision3.setAutoDraw(true);&amp;#10;    console.log(&quot;Crosshair Practice Decision 3: Showing fixation cross (1 second)&quot;);&amp;#10;} else {&amp;#10;    console.log(&quot;WARNING: text_crosshair_practice_decision3 component not found!&quot;);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_left_left1&quot;, locals())) {&amp;#10;    image_left_left1.setAutoDraw(false);&amp;#10;    image_left_left1.opacity = 0;&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_right_right1&quot;, locals())) {&amp;#10;    image_right_right1.setAutoDraw(false);&amp;#10;    image_right_right1.opacity = 0;&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Crosshair ITI 3 for practice decision trials - 2 seconds fixed duration&amp;#10;# Shows crosshair after practiceDecisionMaking (before next trial or end)&amp;#10;# Component: text_crosshair_practice_decision3 (or similar crosshair component)&amp;#10;&amp;#10;# IMPORTANT: Hide ALL previous dollar amount text components from practiceDecisionMaking&amp;#10;# Force hide to ensure clean transition&amp;#10;if 'text_dollar_left_practice_3' in locals():&amp;#10;    text_dollar_left_practice_3.setAutoDraw(False)&amp;#10;    text_dollar_left_practice_3.opacity = 0&amp;#10;    text_dollar_left_practice_3.text = &quot;&quot;  # Clear text&amp;#10;if 'text_dollar_right_practice_3' in locals():&amp;#10;    text_dollar_right_practice_3.setAutoDraw(False)&amp;#10;    text_dollar_right_practice_3.opacity = 0&amp;#10;    text_dollar_right_practice_3.text = &quot;&quot;  # Clear text&amp;#10;if 'text_question_4' in locals():&amp;#10;    text_question_4.setAutoDraw(False)&amp;#10;    text_question_4.opacity = 0&amp;#10;if 'text_crosshair_practice_decision2' in locals():&amp;#10;    text_crosshair_practice_decision2.setAutoDraw(False)&amp;#10;    text_crosshair_practice_decision2.opacity = 0&amp;#10;&amp;#10;# Show crosshair - make sure it's visible&amp;#10;if 'text_crosshair_practice_decision3' in locals():&amp;#10;    text_crosshair_practice_decision3.text = &quot;+&quot;&amp;#10;    try:&amp;#10;        text_crosshair_practice_decision3.setPos((0, 0))&amp;#10;    except AttributeError:&amp;#10;        text_crosshair_practice_decision3.pos = (0, 0)&amp;#10;    text_crosshair_practice_decision3.opacity = 1&amp;#10;    text_crosshair_practice_decision3.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair ITI 3 for practice decision (2 seconds)&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_crosshair_practice_decision3 component not found!&quot;)&amp;#10;    print(&quot;  Make sure crosshairPracticeDecision3 routine has a text component named 'text_crosshair_practice_decision3'&quot;)&amp;#10;&amp;#10;# Duration is fixed at 2 seconds for practice trials (ITI between trials)&amp;#10;# IMPORTANT: In PsychoPy Builder, set the routine duration to 2.0 seconds&amp;#10;# The routine should have a duration of 2.0 seconds (not infinite or 0)&amp;#10;globals()['crosshair_practice_decision3_duration'] = 2.0&amp;#10;print(f&quot;Crosshair ITI 3 duration: 2.0 seconds (fixed for practice)&quot;)&amp;#10;print(f&quot;  NOTE: Make sure crosshairPracticeDecision3 routine duration is set to 2.0 seconds in Builder&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair when routine ends&amp;#10;if 'text_crosshair_practice_decision3' in locals():&amp;#10;    text_crosshair_practice_decision3.setAutoDraw(False)&amp;#10;    text_crosshair_practice_decision3.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_43" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_crosshair_practice_decision3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_crosshair_practice_decision3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="practiceIntro2Block2">
      <RoutineSettingsComponent name="practiceIntro2Block2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceIntro2Block2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_practice_intro_block2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_practice_intro_block2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="We will run another short practice task now. &amp;#10;&amp;#10;Press C to continue" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_practice_intro_block2" plugin="None">
        <Param val="['c', 'C']" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_practice_intro_block2" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
      <CodeComponent name="code_44" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;second_block = globals().get(&quot;second_block&quot;, &quot;gain&quot;);&amp;#10;block_type_name = ((second_block === &quot;gain&quot;) ? &quot;rewards&quot; : &quot;punishments&quot;);&amp;#10;if (_pj.in_es6(&quot;text_practice_intro_block2&quot;, locals())) {&amp;#10;    text_practice_intro_block2.text = `We will run a short practice task now for the ${block_type_name} block. Press C to continue`;&amp;#10;    text_practice_intro_block2.opacity = 1;&amp;#10;    text_practice_intro_block2.setAutoDraw(true);&amp;#10;    console.log(`Practice introduction screen Block 2 displayed (${block_type_name} block)`);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;text_practice_intro&quot;, locals())) {&amp;#10;        text_practice_intro.text = `We will run a short practice task now for the ${block_type_name} block. Press C to continue`;&amp;#10;        text_practice_intro.opacity = 1;&amp;#10;        text_practice_intro.setAutoDraw(true);&amp;#10;        console.log(`Practice introduction screen Block 2 displayed (using text_practice_intro component)`);&amp;#10;    } else {&amp;#10;        console.log(&quot;WARNING: text_practice_intro_block2 or text_practice_intro component not found!&quot;);&amp;#10;    }&amp;#10;}&amp;#10;practice_block2_index = (- 1);&amp;#10;globals()[&quot;practice_block2_index&quot;] = practice_block2_index;&amp;#10;console.log(`DEBUG practiceIntro2Block2: Reset practice_block2_index to -1 (will be 0 for first practice trial)`);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice introduction screen for Block 2 (before practice trials for Block 2)&amp;#10;# Shows &quot;We will run a short practice task now. Press C to continue&quot;&amp;#10;# Component: text_practice_intro_block2 (or similar text component)&amp;#10;&amp;#10;# IMPORTANT: Skip if Block 2 setup is already complete (prevents practice trials from running again)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# Skip if:&amp;#10;# 1. Block 2 setup already complete (block2_setup_complete = True) - NEVER show again&amp;#10;# 2. Already in Block 2 trials (learning_block_index &gt;= trials_per_block) - once Block 2 trials start, never show again&amp;#10;if block2_setup_complete or learning_block_index &gt;= trials_per_block:&amp;#10;    print(f&quot;Skipping practiceIntro2Block2: block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index} &gt;= trials_per_block={trials_per_block}&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # IMPORTANT: Hide any previous text components first to prevent overlap&amp;#10;    if 'text_task_start_soon_block2' in locals():&amp;#10;        text_task_start_soon_block2.setAutoDraw(False)&amp;#10;        text_task_start_soon_block2.opacity = 0&amp;#10;        print(&quot;Hidden task start soon Block 2 text&quot;)&amp;#10;    if 'text_block_transition' in locals():&amp;#10;        text_block_transition.setAutoDraw(False)&amp;#10;        text_block_transition.opacity = 0&amp;#10;        print(&quot;Hidden block transition text&quot;)&amp;#10;&amp;#10;    # Clear any previous key presses&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Get second_block type to show appropriate message&amp;#10;    second_block = globals().get('second_block', 'gain')&amp;#10;    block_type_name = &quot;rewards&quot; if second_block == &quot;gain&quot; else &quot;punishments&quot;&amp;#10;&amp;#10;    # Display practice introduction text&amp;#10;    if 'text_practice_intro_block2' in locals():&amp;#10;        text_practice_intro_block2.text = f&quot;We will run a short practice task now for the {block_type_name} block. Press C to continue&quot;&amp;#10;        text_practice_intro_block2.opacity = 1&amp;#10;        text_practice_intro_block2.setAutoDraw(True)&amp;#10;        print(f&quot;Practice introduction screen Block 2 displayed ({block_type_name} block)&quot;)&amp;#10;    else:&amp;#10;        # Fallback: try other component names&amp;#10;        if 'text_practice_intro' in locals():&amp;#10;            text_practice_intro.text = f&quot;We will run a short practice task now for the {block_type_name} block. Press C to continue&quot;&amp;#10;            text_practice_intro.opacity = 1&amp;#10;            text_practice_intro.setAutoDraw(True)&amp;#10;            print(f&quot;Practice introduction screen Block 2 displayed (using text_practice_intro component)&quot;)&amp;#10;        else:&amp;#10;            print(&quot;WARNING: text_practice_intro_block2 or text_practice_intro component not found!&quot;)&amp;#10;&amp;#10;    # Reset practice_block2_index to -1 before practice trials start&amp;#10;    # This ensures it starts fresh at 0 for the first practice trial&amp;#10;    practice_block2_index = -1&amp;#10;    globals()['practice_block2_index'] = practice_block2_index&amp;#10;    print(f&quot;DEBUG practiceIntro2Block2: Reset practice_block2_index to -1 (will be 0 for first practice trial)&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice introduction screen Block 2 - wait for key press 'C' to continue&amp;#10;# Check for key press 'C' to continue to practice trials for Block 2&amp;#10;&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['c', 'C'])&amp;#10;    if keys:&amp;#10;        # Key C pressed - continue to practice trials for Block 2&amp;#10;        print(&quot;Practice intro Block 2: Key C pressed, continuing to practice trials&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;    &amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide practice intro Block 2 text when routine ends&amp;#10;if 'text_practice_intro_block2' in locals():&amp;#10;    text_practice_intro_block2.setAutoDraw(False)&amp;#10;    text_practice_intro_block2.opacity = 0&amp;#10;elif 'text_practice_intro' in locals():&amp;#10;    text_practice_intro.setAutoDraw(False)&amp;#10;    text_practice_intro.opacity = 0&amp;#10;&amp;#10;# Clear any remaining key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;# Initialize practice trials completion flag (will be set to True when all 3 trials complete)&amp;#10;globals()['practice_trials_block2_complete'] = False&amp;#10;globals()['ready_for_scanner_sync_block2'] = False  # Don't allow scanner sync until practice trials complete&amp;#10;&amp;#10;print(&quot;Practice intro Block 2 ended, starting practice trials&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_44" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="practiceTrial2">
      <RoutineSettingsComponent name="practiceTrial2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="practiceTrial2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_45" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="import * as time from 'time';&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;practice_block2_index = globals().get(&quot;practice_block2_index&quot;, (- 1));&amp;#10;practice_block2_index += 1;&amp;#10;globals()[&quot;practice_block2_index&quot;] = practice_block2_index;&amp;#10;practice_block2 = globals().get(&quot;practice_block2&quot;, []);&amp;#10;console.log(`DEBUG: practice_block2_index=${practice_block2_index}, practice_block2 length=${practice_block2.length}`);&amp;#10;if (practice_block2) {&amp;#10;    console.log(`DEBUG: practice_block2 contents: ${function () {&amp;#10;for (var _pj_c = 0, _pj_d = _pj_b.length; (_pj_c &lt; _pj_d); _pj_c += 1) {&amp;#10;_pj_a.push(t[&quot;fruit&quot;]);&amp;#10;}&amp;#10;return _pj_a;&amp;#10;}&amp;#10;.call(this)}`&amp;#10;);&amp;#10;} else {&amp;#10;    console.log(&quot;ERROR: practice_block2 is empty! Creating fallback practice block.&quot;);&amp;#10;    image_dir = &quot;images/&quot;;&amp;#10;    second_block = globals().get(&quot;second_block&quot;, &quot;gain&quot;);&amp;#10;    if ((second_block === &quot;gain&quot;)) {&amp;#10;        practice_block2 = [{&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: (image_dir + &quot;dog.png&quot;), &quot;baseline&quot;: 50, &quot;true_value&quot;: 30}, {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: (image_dir + &quot;cat.png&quot;), &quot;baseline&quot;: 50, &quot;true_value&quot;: 50}, {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: (image_dir + &quot;rabbit.png&quot;), &quot;baseline&quot;: 50, &quot;true_value&quot;: 40}];&amp;#10;    } else {&amp;#10;        practice_block2 = [{&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: (image_dir + &quot;dog.png&quot;), &quot;baseline&quot;: (- 50), &quot;true_value&quot;: (- 30)}, {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: (image_dir + &quot;cat.png&quot;), &quot;baseline&quot;: (- 50), &quot;true_value&quot;: (- 50)}, {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: (image_dir + &quot;rabbit.png&quot;), &quot;baseline&quot;: (- 50), &quot;true_value&quot;: (- 40)}];&amp;#10;    }&amp;#10;    globals()[&quot;practice_block2&quot;] = practice_block2;&amp;#10;    console.log(`Created fallback practice_block2 with ${practice_block2.length} trials`);&amp;#10;}&amp;#10;if ((((practice_block2 &amp;&amp; (practice_block2.length &gt; 0)) &amp;&amp; (practice_block2_index &gt;= 0)) &amp;&amp; (practice_block2_index &lt; practice_block2.length))) {&amp;#10;    current = practice_block2[practice_block2_index];&amp;#10;    fruitFile = current[&quot;fruit&quot;];&amp;#10;    trueVal = current[&quot;true_value&quot;];&amp;#10;    baselineR = current[&quot;baseline&quot;];&amp;#10;    blockType = current[&quot;block&quot;];&amp;#10;    idx = (practice_block2_index + 1);&amp;#10;    console.log(`Practice trial Block 2 ${idx}/3: ${fruitFile}, value=${trueVal}`);&amp;#10;} else {&amp;#10;    fruitFile = &quot;images/blank.png&quot;;&amp;#10;    trueVal = 0;&amp;#10;    baselineR = 0;&amp;#10;    blockType = &quot;practice&quot;;&amp;#10;    idx = 0;&amp;#10;    console.log(`WARNING: Practice trial Block 2 ${practice_block2_index} out of range`);&amp;#10;}&amp;#10;try {&amp;#10;    psychoJS.eventManager.clearEvents();&amp;#10;} catch(e) {&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;image_4&quot;, locals())) {&amp;#10;    image_4.setImage(fruitFile);&amp;#10;    image_4.opacity = 1;&amp;#10;    image_4.setAutoDraw(true);&amp;#10;    if ((&quot;_shown_debug&quot; in image_4)) {&amp;#10;        delete image_4._shown_debug;&amp;#10;    }&amp;#10;    console.log(`Practice trial Block 2: Set image to ${fruitFile} with opacity ${image_4.opacity}`);&amp;#10;}&amp;#10;if (_pj.in_es6(&quot;slider_3&quot;, locals())) {&amp;#10;    slider_3.reset();&amp;#10;    slider_3.setRating(0);&amp;#10;    console.log(&quot;Practice trial Block 2: Slider reset to 0&quot;);&amp;#10;}&amp;#10;trial_start_time = time.time();&amp;#10;response_time = null;&amp;#10;trial_timed_out = false;&amp;#10;responded_in_time = false;&amp;#10;globals()[&quot;trial_start_time&quot;] = trial_start_time;&amp;#10;globals()[&quot;response_time&quot;] = null;&amp;#10;globals()[&quot;trial_timed_out&quot;] = false;&amp;#10;globals()[&quot;responded_in_time&quot;] = false;&amp;#10;globals()[&quot;trueVal&quot;] = trueVal;&amp;#10;globals()[&quot;fruitFile&quot;] = fruitFile;&amp;#10;globals()[&quot;blockType&quot;] = blockType;&amp;#10;globals()[&quot;baselineR&quot;] = baselineR;&amp;#10;globals()[&quot;PRACTICE_TIMEOUT_SECONDS&quot;] = 6.0;&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Practice trial for Block 2 - similar to regular trial but with shorter durations&amp;#10;&amp;#10;# IMPORTANT: Skip if Block 2 setup is already complete (prevents practice trials from running again)&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# If Block 2 setup is complete or already in Block 2, skip this trial&amp;#10;if block2_setup_complete or learning_block_index &gt;= trials_per_block:&amp;#10;    print(f&quot;Skipping practiceTrial2: block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index} &gt;= trials_per_block={trials_per_block}&quot;)&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    # Get practice_block2_index from globals (or initialize if first practice trial)&amp;#10;    practice_block2_index = globals().get('practice_block2_index', -1)&amp;#10;    practice_block2_index += 1&amp;#10;    globals()['practice_block2_index'] = practice_block2_index&amp;#10;&amp;#10;    # Get practice_block2 from globals&amp;#10;    practice_block2 = globals().get('practice_block2', [])&amp;#10;&amp;#10;    # Debug: Print practice block info&amp;#10;    print(f&quot;DEBUG: practice_block2_index={practice_block2_index}, practice_block2 length={len(practice_block2)}&quot;)&amp;#10;    if practice_block2:&amp;#10;        print(f&quot;DEBUG: practice_block2 contents: {[t['fruit'] for t in practice_block2]}&quot;)&amp;#10;    else:&amp;#10;        print(&quot;ERROR: practice_block2 is empty! Creating fallback practice block.&quot;)&amp;#10;        # Fallback: Create a simple practice block if it doesn't exist&amp;#10;        image_dir = &quot;images/&quot;&amp;#10;        second_block = globals().get('second_block', 'gain')&amp;#10;        if second_block == &quot;gain&quot;:&amp;#10;            practice_block2 = [&amp;#10;                {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: image_dir + &quot;dog.png&quot;, &quot;baseline&quot;: 50, &quot;true_value&quot;: 30},&amp;#10;                {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: image_dir + &quot;cat.png&quot;, &quot;baseline&quot;: 50, &quot;true_value&quot;: 50},&amp;#10;                {&quot;block&quot;: &quot;gain&quot;, &quot;fruit&quot;: image_dir + &quot;rabbit.png&quot;, &quot;baseline&quot;: 50, &quot;true_value&quot;: 40}&amp;#10;            ]&amp;#10;        else:&amp;#10;            practice_block2 = [&amp;#10;                {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: image_dir + &quot;dog.png&quot;, &quot;baseline&quot;: -50, &quot;true_value&quot;: -30},&amp;#10;                {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: image_dir + &quot;cat.png&quot;, &quot;baseline&quot;: -50, &quot;true_value&quot;: -50},&amp;#10;                {&quot;block&quot;: &quot;loss&quot;, &quot;fruit&quot;: image_dir + &quot;rabbit.png&quot;, &quot;baseline&quot;: -50, &quot;true_value&quot;: -40}&amp;#10;            ]&amp;#10;        globals()['practice_block2'] = practice_block2&amp;#10;        print(f&quot;Created fallback practice_block2 with {len(practice_block2)} trials&quot;)&amp;#10;&amp;#10;    # Get current practice trial&amp;#10;    if practice_block2 and len(practice_block2) &gt; 0 and practice_block2_index &gt;= 0 and practice_block2_index &lt; len(practice_block2):&amp;#10;        current = practice_block2[practice_block2_index]&amp;#10;        fruitFile = current[&quot;fruit&quot;]&amp;#10;        trueVal = current[&quot;true_value&quot;]&amp;#10;        baselineR = current[&quot;baseline&quot;]&amp;#10;        blockType = current[&quot;block&quot;]&amp;#10;        idx = practice_block2_index + 1&amp;#10;        print(f&quot;Practice trial Block 2 {idx}/3: {fruitFile}, value={trueVal}&quot;)&amp;#10;    else:&amp;#10;        # Fallback - use blank&amp;#10;        fruitFile = &quot;images/blank.png&quot;&amp;#10;        trueVal = 0&amp;#10;        baselineR = 0&amp;#10;        blockType = &quot;practice&quot;&amp;#10;        idx = 0&amp;#10;        print(f&quot;WARNING: Practice trial Block 2 {practice_block2_index} out of range&quot;)&amp;#10;&amp;#10;    # Clear any keys from previous routines&amp;#10;    try:&amp;#10;        event.clearEvents()&amp;#10;    except:&amp;#10;        pass&amp;#10;&amp;#10;    # Set the fruit image - initialize it properly to avoid tStartRefresh None error&amp;#10;    # This matches the regular trial approach&amp;#10;    # UNIQUE NAME: image_practice_b2 (to avoid conflict with Block 1 practice image_4)&amp;#10;    # IMPORTANT: Force hide the image initially to prevent ghost/fixed images, then show real fruit&amp;#10;    if 'image_practice_b2' in locals():&amp;#10;        # First, explicitly hide any previous image (prevents fixed/ghost images)&amp;#10;        image_practice_b2.opacity = 0&amp;#10;        image_practice_b2.setImage(&quot;images/blank.png&quot;)&amp;#10;        image_practice_b2.setAutoDraw(False)&amp;#10;        # Now set the real fruit image&amp;#10;        image_practice_b2.setImage(fruitFile)&amp;#10;        image_practice_b2.opacity = 1&amp;#10;        # Initialize by setting autodraw - this ensures tStartRefresh gets set&amp;#10;        image_practice_b2.setAutoDraw(True)&amp;#10;        # Reset debug flag for EachFrame&amp;#10;        if hasattr(image_practice_b2, '_shown_debug'):&amp;#10;            del image_practice_b2._shown_debug&amp;#10;        print(f&quot;Practice trial Block 2: Set image to {fruitFile} with opacity {image_practice_b2.opacity}&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: image_practice_b2 component not found!&quot;)&amp;#10;&amp;#10;    # Reset slider to 0&amp;#10;    # UNIQUE NAME: slider_practice_b2 (to avoid conflict with Block 1 practice slider_3)&amp;#10;    if 'slider_practice_b2' in locals():&amp;#10;        slider_practice_b2.reset()&amp;#10;        slider_practice_b2.setRating(0)&amp;#10;        print(&quot;Practice trial Block 2: Slider reset to 0&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: slider_practice_b2 component not found!&quot;)&amp;#10;&amp;#10;    # Initialize timing variables (shorter timeout for practice - 6 seconds)&amp;#10;    import time&amp;#10;    trial_start_time = time.time()&amp;#10;    response_time = None&amp;#10;    trial_timed_out = False&amp;#10;    responded_in_time = False&amp;#10;&amp;#10;    # Store in globals&amp;#10;    globals()['trial_start_time'] = trial_start_time&amp;#10;    globals()['response_time'] = None&amp;#10;    globals()['trial_timed_out'] = False&amp;#10;    globals()['responded_in_time'] = False&amp;#10;&amp;#10;    # Store trial variables in globals for use in other routines (like actualPoints)&amp;#10;    globals()['trueVal'] = trueVal&amp;#10;    globals()['fruitFile'] = fruitFile&amp;#10;    globals()['blockType'] = blockType&amp;#10;    globals()['baselineR'] = baselineR&amp;#10;&amp;#10;    # Practice trials use shorter timeout (6 seconds instead of 8)&amp;#10;    globals()['PRACTICE_TIMEOUT_SECONDS'] = 6.0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Practice trial Block 2 - check for response (shorter timeout: 6 seconds)&amp;#10;# Using keys 1/3: 1 = left (decrease), 2 = continue, 3 = right (increase)&amp;#10;import time&amp;#10;&amp;#10;# Get fruitFile from locals or globals&amp;#10;if 'fruitFile' not in locals():&amp;#10;    fruitFile = globals().get('fruitFile', 'images/blank.png')&amp;#10;&amp;#10;# Show the fruit image - FORCE it to be visible (match regular trial approach)&amp;#10;# UNIQUE NAME: image_practice_b2&amp;#10;# Only show if we haven't submitted yet (responded_in_time is False)&amp;#10;responded_in_time = globals().get('responded_in_time', False)&amp;#10;if 'image_practice_b2' in locals() and fruitFile and fruitFile != 'images/blank.png' and fruitFile != '' and not responded_in_time:&amp;#10;    # Set the image and make it visible every frame (only if not yet responded)&amp;#10;    image_practice_b2.setImage(fruitFile)&amp;#10;    image_practice_b2.opacity = 1.0  # Force opacity to 1.0&amp;#10;    image_practice_b2.setAutoDraw(True)  # Force autodraw to ensure it's drawn&amp;#10;    # Debug: print once per trial that image is being shown&amp;#10;    if not hasattr(image_practice_b2, '_shown_debug'):&amp;#10;        print(f&quot;DEBUG: Practice Block 2 showing image {fruitFile} with opacity {image_practice_b2.opacity}, autodraw={image_practice_b2.status}&quot;)&amp;#10;        image_practice_b2._shown_debug = True&amp;#10;elif 'image_practice_b2' in locals():&amp;#10;    # Hide image if responded or if no valid fruitFile&amp;#10;    image_practice_b2.opacity = 0&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;&amp;#10;# Display current slider value&amp;#10;# UNIQUE NAME: slider_practice_b2 and text_slider_value_b2&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    current_value = slider_practice_b2.getRating()&amp;#10;    # Handle None values - slider might return None initially&amp;#10;    if current_value is not None:&amp;#10;        try:&amp;#10;            current_value_int = int(current_value)&amp;#10;            if 'text_slider_value_b2' in locals():&amp;#10;                text_slider_value_b2.text = f&quot;Current rating: {current_value_int}&quot;&amp;#10;            else:&amp;#10;                print(&quot;WARNING: text_slider_value_b2 component not found!&quot;)&amp;#10;        except (ValueError, TypeError):&amp;#10;            # If conversion fails, just skip updating the text&amp;#10;            pass&amp;#10;&amp;#10;# Handle keyboard input for slider controls&amp;#10;try:&amp;#10;    keys = event.getKeys(keyList=['1', '2', '3', 'num_1', 'num_2', 'num_3'])&amp;#10;except:&amp;#10;    keys = []&amp;#10;&amp;#10;for key in keys:&amp;#10;    # Normalize key names&amp;#10;    if key == 'num_1' or key == '1':&amp;#10;        # Key 1: Move slider left by 5 points&amp;#10;        if 'slider_practice_b2' in locals():&amp;#10;            current_rating = slider_practice_b2.getRating()&amp;#10;            if current_rating is None:&amp;#10;                current_rating = 0&amp;#10;            new_rating = current_rating - 5&amp;#10;            slider_practice_b2.setRating(new_rating)&amp;#10;            print(f&quot;Practice Block 2: Slider moved left (key 1): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_3' or key == '3':&amp;#10;        # Key 3: Move slider right by 5 points&amp;#10;        if 'slider_practice_b2' in locals():&amp;#10;            current_rating = slider_practice_b2.getRating()&amp;#10;            if current_rating is None:&amp;#10;                current_rating = 0&amp;#10;            new_rating = current_rating + 5&amp;#10;            slider_practice_b2.setRating(new_rating)&amp;#10;            print(f&quot;Practice Block 2: Slider moved right (key 3): {current_rating} -&gt; {new_rating}&quot;)&amp;#10;            &amp;#10;    elif key == 'num_2' or key == '2':&amp;#10;        # Key 2: Submit answer&amp;#10;        # IMPORTANT: Hide image and slider immediately when key 2 is pressed&amp;#10;        if 'image_practice_b2' in locals():&amp;#10;            image_practice_b2.setAutoDraw(False)&amp;#10;            image_practice_b2.opacity = 0&amp;#10;        if 'slider_practice_b2' in locals():&amp;#10;            slider_practice_b2.setAutoDraw(False)&amp;#10;        if 'text_slider_value_b2' in locals():&amp;#10;            text_slider_value_b2.setAutoDraw(False)&amp;#10;            text_slider_value_b2.opacity = 0&amp;#10;        &amp;#10;        trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;        response_time = time.time() - trial_start_time&amp;#10;        &amp;#10;        PRACTICE_TIMEOUT_SECONDS = globals().get('PRACTICE_TIMEOUT_SECONDS', 6.0)&amp;#10;        &amp;#10;        if response_time &lt;= PRACTICE_TIMEOUT_SECONDS:&amp;#10;            responded_in_time = True&amp;#10;            trial_timed_out = False&amp;#10;            print(f&quot;Practice Block 2: Answer submitted (key 2) in {response_time:.2f} seconds&quot;)&amp;#10;        else:&amp;#10;            responded_in_time = False&amp;#10;            trial_timed_out = True&amp;#10;            print(f&quot;Practice Block 2: Answer submitted (key 2) in {response_time:.2f} seconds (over limit)&quot;)&amp;#10;        &amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;        break&amp;#10;&amp;#10;# Check for timeout (6 seconds for practice)&amp;#10;try:&amp;#10;    trial_start_time = globals().get('trial_start_time', time.time())&amp;#10;    PRACTICE_TIMEOUT_SECONDS = globals().get('PRACTICE_TIMEOUT_SECONDS', 6.0)&amp;#10;    responded_in_time = globals().get('responded_in_time', False)&amp;#10;    &amp;#10;    elapsed_time = time.time() - trial_start_time&amp;#10;    &amp;#10;    if elapsed_time &gt;= PRACTICE_TIMEOUT_SECONDS and not responded_in_time:&amp;#10;        # IMPORTANT: Hide image and slider immediately when timeout occurs&amp;#10;        if 'image_practice_b2' in locals():&amp;#10;            image_practice_b2.setAutoDraw(False)&amp;#10;            image_practice_b2.opacity = 0&amp;#10;        if 'slider_practice_b2' in locals():&amp;#10;            slider_practice_b2.setAutoDraw(False)&amp;#10;        if 'text_slider_value_b2' in locals():&amp;#10;            text_slider_value_b2.setAutoDraw(False)&amp;#10;            text_slider_value_b2.opacity = 0&amp;#10;        &amp;#10;        trial_timed_out = True&amp;#10;        response_time = PRACTICE_TIMEOUT_SECONDS&amp;#10;        responded_in_time = False&amp;#10;        &amp;#10;        globals()['response_time'] = response_time&amp;#10;        globals()['responded_in_time'] = responded_in_time&amp;#10;        globals()['trial_timed_out'] = trial_timed_out&amp;#10;        &amp;#10;        print(f&quot;Practice Block 2: Trial timed out at {PRACTICE_TIMEOUT_SECONDS} seconds&quot;)&amp;#10;        continueRoutine = False&amp;#10;        event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Get response data from practice trial Block 2&amp;#10;# UNIQUE NAME: slider_practice_b2&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    rating = slider_practice_b2.getRating()&amp;#10;    if rating is None:&amp;#10;        rating = 0&amp;#10;    rt = slider_practice_b2.getRT()&amp;#10;else:&amp;#10;    rating = 0&amp;#10;    rt = None&amp;#10;&amp;#10;# Get response_time, responded_in_time, and trial_timed_out from globals&amp;#10;response_time = globals().get('response_time', None)&amp;#10;responded_in_time = globals().get('responded_in_time', False)&amp;#10;trial_timed_out = globals().get('trial_timed_out', False)&amp;#10;&amp;#10;# Get trueVal, blockType, and fruitFile from globals (set in practiceTrial2BeginRoutine)&amp;#10;trueVal = globals().get('trueVal', 0)&amp;#10;blockType = globals().get('blockType', 'practice')&amp;#10;fruitFile = globals().get('fruitFile', '')&amp;#10;&amp;#10;# Use response_time if available, otherwise use slider RT&amp;#10;actual_response_time = response_time if response_time is not None else rt&amp;#10;&amp;#10;rt_str = f&quot;{actual_response_time:.3f}s&quot; if actual_response_time else &quot;N/A&quot;&amp;#10;print(f&quot;Practice trial Block 2 EndRoutine: RT={rt_str}, responded_in_time={responded_in_time}, timed_out={trial_timed_out}, trueVal={trueVal}&quot;)&amp;#10;&amp;#10;# Log practice trial data (optional - you may want to log this separately)&amp;#10;thisExp.addData(&quot;practice_trial_block2&quot;, True)&amp;#10;thisExp.addData(&quot;practice_block2&quot;, blockType)&amp;#10;thisExp.addData(&quot;practice_fruit_block2&quot;, fruitFile)&amp;#10;thisExp.addData(&quot;practice_rating_block2&quot;, rating)&amp;#10;thisExp.addData(&quot;practice_rt_block2&quot;, actual_response_time if actual_response_time else None)&amp;#10;thisExp.addData(&quot;practice_true_value_block2&quot;, trueVal)&amp;#10;thisExp.addData(&quot;practice_responded_in_time_block2&quot;, responded_in_time)&amp;#10;thisExp.addData(&quot;practice_timed_out_block2&quot;, trial_timed_out)&amp;#10;&amp;#10;# Hide practice trial components (they'll be shown again in next trial if loop continues)&amp;#10;# UNIQUE NAMES: image_practice_b2, slider_practice_b2, text_slider_value_b2&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;&amp;#10;# Calculate durations for subsequent routines (timeout_2, crosshair1_2, actualPoints_2, crosshair2_2)&amp;#10;import random&amp;#10;&amp;#10;# Use timing config values (from startTaskBeginExperiment or defaults)&amp;#10;try:&amp;#10;    if 'TRIAL_TIMEOUT_SECONDS' in globals():&amp;#10;        pass  # Use existing values&amp;#10;    else:&amp;#10;        TRIAL_TIMEOUT_SECONDS = 6.0  # Practice timeout (shorter than regular 8.0)&amp;#10;        TIMEOUT_SCREEN_DURATION = 2.0  # 2 seconds for timeout screen&amp;#10;        CROSSHAIR1_DURATION = 1.0  # 1 second for crosshair1_2&amp;#10;        ACTUAL_POINTS_DURATION = 2.0  # 2 seconds for actual points&amp;#10;        CROSSHAIR2_DURATION = 1.0  # 1 second for crosshair2_2&amp;#10;except:&amp;#10;    # Fallback defaults&amp;#10;    TRIAL_TIMEOUT_SECONDS = 6.0  # Practice timeout&amp;#10;    TIMEOUT_SCREEN_DURATION = 2.0  # 2 seconds for timeout screen&amp;#10;    CROSSHAIR1_DURATION = 1.0  # 1 second for crosshair1_2&amp;#10;    ACTUAL_POINTS_DURATION = 2.0  # 2 seconds for actual points&amp;#10;    CROSSHAIR2_DURATION = 1.0  # 1 second for crosshair2_2&amp;#10;&amp;#10;# Set actual_points_text here so it's available before actualPoints_2 routine starts&amp;#10;# Get trueVal from globals (set in practiceTrial2BeginRoutine)&amp;#10;trueVal_for_points = globals().get('trueVal', 0)&amp;#10;try:&amp;#10;    actual_points_text = f&quot;Actual points: {trueVal_for_points:+d}&quot;&amp;#10;    # Store in globals so actualPoints_2BeginRoutine can access it&amp;#10;    globals()['actual_points_text'] = actual_points_text&amp;#10;    print(f&quot;Set actual_points_text in globals: {actual_points_text}&quot;)&amp;#10;except:&amp;#10;    actual_points_text = &quot;Actual points: 0&quot;&amp;#10;    globals()['actual_points_text'] = actual_points_text&amp;#10;&amp;#10;# Fixed durations for practice trials Block 2:&amp;#10;# timeout_2: 2 seconds (if timeout occurred)&amp;#10;# crosshair1_2: 1 second (always)&amp;#10;# actualPoints_2: 2 seconds (always)&amp;#10;# crosshair2_2: 1 second (always)&amp;#10;&amp;#10;if responded_in_time and actual_response_time &lt;= TRIAL_TIMEOUT_SECONDS:&amp;#10;    # Case 1: Responded in time - no timeout screen&amp;#10;    timeout_duration = 0&amp;#10;    crosshair1_duration = CROSSHAIR1_DURATION  # 1 second&amp;#10;    actualPoints_duration = ACTUAL_POINTS_DURATION  # 2 seconds&amp;#10;    crosshair2_duration = CROSSHAIR2_DURATION  # 1 second&amp;#10;    &amp;#10;    # Store in globals so Builder can access them via $variableName&amp;#10;    globals()['timeout_duration'] = timeout_duration&amp;#10;    globals()['crosshair1_duration'] = crosshair1_duration&amp;#10;    globals()['actualPoints_duration'] = actualPoints_duration&amp;#10;    globals()['crosshair2_duration'] = crosshair2_duration&amp;#10;    &amp;#10;    print(f&quot;Practice Block 2 Case 1 (responded in time): RT={actual_response_time:.2f}s&quot;)&amp;#10;    print(f&quot;  timeout_2={timeout_duration}s (skipped)&quot;)&amp;#10;    print(f&quot;  crosshair1_2={crosshair1_duration}s&quot;)&amp;#10;    print(f&quot;  actualPoints_2={actualPoints_duration}s&quot;)&amp;#10;    print(f&quot;  crosshair2_2={crosshair2_duration}s&quot;)&amp;#10;else:&amp;#10;    # Case 2: Timed out - show timeout screen&amp;#10;    timeout_duration = TIMEOUT_SCREEN_DURATION  # 2 seconds&amp;#10;    crosshair1_duration = CROSSHAIR1_DURATION  # 1 second&amp;#10;    actualPoints_duration = ACTUAL_POINTS_DURATION  # 2 seconds&amp;#10;    crosshair2_duration = CROSSHAIR2_DURATION  # 1 second&amp;#10;    &amp;#10;    # Store in globals so Builder can access them via $variableName&amp;#10;    globals()['timeout_duration'] = timeout_duration&amp;#10;    globals()['crosshair1_duration'] = crosshair1_duration&amp;#10;    globals()['actualPoints_duration'] = actualPoints_duration&amp;#10;    globals()['crosshair2_duration'] = crosshair2_duration&amp;#10;    &amp;#10;    print(f&quot;Practice Block 2 Case 2 (timed out): Timeout at {TRIAL_TIMEOUT_SECONDS}s&quot;)&amp;#10;    print(f&quot;  timeout_2={timeout_duration}s&quot;)&amp;#10;    print(f&quot;  crosshair1_2={crosshair1_duration}s&quot;)&amp;#10;    print(f&quot;  actualPoints_2={actualPoints_duration}s&quot;)&amp;#10;    print(f&quot;  crosshair2_2={crosshair2_duration}s&quot;)&amp;#10;&amp;#10;# Check if this is the last practice trial (index 2, since we have 3 trials: 0, 1, 2)&amp;#10;practice_block2_index = globals().get('practice_block2_index', -1)&amp;#10;practice_block2 = globals().get('practice_block2', [])&amp;#10;if practice_block2_index &gt;= len(practice_block2) - 1:&amp;#10;    # This is the last practice trial - set flag when practice trials are complete&amp;#10;    # The flag will be set after crosshair2_2 ends (in a separate End Routine code)&amp;#10;    print(f&quot;Last practice trial Block 2 completed (trial {practice_block2_index + 1}/3)&quot;)&amp;#10;    # Note: We'll set the flag in crosshair2_2EndRoutine to ensure all routines finish first&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_45" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <ImageComponent name="image_practice_b2" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="" valType="file" updates="constant" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_practice_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(0.5, 0.5)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <SliderComponent name="slider_practice_b2" plugin="None">
        <Param val="White" valType="color" updates="constant" name="borderColor"/>
        <Param val="LightGray" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="Red" valType="color" updates="constant" name="fillColor"/>
        <Param val="False" valType="bool" updates="constant" name="flip"/>
        <Param val="Noto Sans" valType="str" updates="constant" name="font"/>
        <Param val="False" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="5" valType="num" updates="constant" name="granularity"/>
        <Param val="0" valType="code" updates="None" name="initVal"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="labels"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="slider_practice_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.3)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="constant" name="readOnly"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(1.0, 0.1)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="constant" name="storeHistory"/>
        <Param val="True" valType="bool" updates="constant" name="storeRating"/>
        <Param val="True" valType="bool" updates="constant" name="storeRatingTime"/>
        <Param val="()" valType="list" updates="constant" name="styleTweaks"/>
        <Param val="slider" valType="str" updates="constant" name="styles"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="(-100, -80, -60, -40, -20, 0, 20, 40, 60, 80, 100)" valType="list" updates="constant" name="ticks"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </SliderComponent>
      <TextComponent name="text_slider_value_b2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_slider_value_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.4)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="timeout_2">
      <RoutineSettingsComponent name="timeout_2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="timeout_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_46" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if ((_pj.in_es6(&quot;timeout_duration&quot;, locals()) &amp;&amp; (timeout_duration &gt; 0))) {&amp;#10;    if (_pj.in_es6(&quot;text_timeout_2&quot;, locals())) {&amp;#10;        text_timeout_2.text = &quot;Time out&quot;;&amp;#10;        text_timeout_2.opacity = 1;&amp;#10;        text_timeout_2.setAutoDraw(true);&amp;#10;        console.log(&quot;Showing timeout screen Block 2 practice&quot;);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;text_timeout&quot;, locals())) {&amp;#10;            text_timeout.text = &quot;Time out&quot;;&amp;#10;            text_timeout.opacity = 1;&amp;#10;            text_timeout.setAutoDraw(true);&amp;#10;            console.log(&quot;Showing timeout screen Block 2 practice (using text_timeout)&quot;);&amp;#10;        } else {&amp;#10;            console.log(&quot;WARNING: text_timeout_2 or text_timeout component not found!&quot;);&amp;#10;        }&amp;#10;    }&amp;#10;} else {&amp;#10;    console.log(&quot;Skipping timeout screen Block 2 practice (no timeout occurred)&quot;);&amp;#10;    if (_pj.in_es6(&quot;text_timeout_2&quot;, locals())) {&amp;#10;        text_timeout_2.opacity = 0;&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;text_timeout&quot;, locals())) {&amp;#10;            text_timeout.opacity = 0;&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Timeout screen for Block 2 practice trials - shows &quot;Time out&quot; message&amp;#10;# Duration is exactly 2.0 seconds (set in Builder or dynamically)&amp;#10;# Only show if timeout_duration &gt; 0&amp;#10;&amp;#10;# IMPORTANT: Hide practice trial image and slider before showing timeout&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;&amp;#10;# UNIQUE NAME: text_timeout_b2 (to avoid conflict with other timeout components)&amp;#10;timeout_duration = globals().get('timeout_duration', 0)&amp;#10;if timeout_duration &gt; 0:&amp;#10;    if 'text_timeout_b2' in locals():&amp;#10;        text_timeout_b2.text = &quot;Time out&quot;&amp;#10;        text_timeout_b2.opacity = 1&amp;#10;        text_timeout_b2.setAutoDraw(True)&amp;#10;        print(&quot;Showing timeout screen Block 2 practice&quot;)&amp;#10;    else:&amp;#10;        print(&quot;WARNING: text_timeout_b2 component not found!&quot;)&amp;#10;else:&amp;#10;    # No timeout - skip this screen (duration should be 0)&amp;#10;    print(&quot;Skipping timeout screen Block 2 practice (no timeout occurred)&quot;)&amp;#10;    if 'text_timeout_b2' in locals():&amp;#10;        text_timeout_b2.opacity = 0&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_46" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_timeout_b2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_timeout_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="1" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshair1_2">
      <RoutineSettingsComponent name="crosshair1_2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair1_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_47" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair_2&quot;, locals())) {&amp;#10;    crosshair_2.opacity = 1;&amp;#10;    crosshair_2.setAutoDraw(true);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;        crosshair.opacity = 1;&amp;#10;        crosshair.setAutoDraw(true);&amp;#10;        console.log(&quot;Using crosshair component for Block 2 practice&quot;);&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# First crosshair screen for Block 2 practice trials - duration set dynamically based on trial response time&amp;#10;# Duration is set in practiceTrial2EndRoutine.py as crosshair1_duration&amp;#10;# This routine will show a crosshair in the center of the screen&amp;#10;&amp;#10;# UNIQUE NAME: crosshair_practice_b2 (for crosshair1_2 routine)&amp;#10;# IMPORTANT: Hide any remaining practice trial components&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;if 'text_timeout_b2' in locals():&amp;#10;    text_timeout_b2.setAutoDraw(False)&amp;#10;    text_timeout_b2.opacity = 0&amp;#10;&amp;#10;# Show crosshair&amp;#10;if 'crosshair_practice_b2' in locals():&amp;#10;    crosshair_practice_b2.opacity = 1&amp;#10;    crosshair_practice_b2.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair1_2 for Block 2 practice&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: crosshair_practice_b2 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_47" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="crosshair_practice_b2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="crosshair_practice_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="actualPoints_2">
      <RoutineSettingsComponent name="actualPoints_2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="actualPoints_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_48" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Actual points screen for Block 2 practice trials - shows the true value&amp;#10;# Duration is set dynamically based on trial response time&amp;#10;# IMPORTANT: In Builder, leave the Text component's text field BLANK - code will set it&amp;#10;&amp;#10;# IMPORTANT: Hide any remaining practice trial components&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;if 'text_timeout_b2' in locals():&amp;#10;    text_timeout_b2.setAutoDraw(False)&amp;#10;    text_timeout_b2.opacity = 0&amp;#10;if 'crosshair_practice_b2' in locals():&amp;#10;    crosshair_practice_b2.setAutoDraw(False)&amp;#10;    crosshair_practice_b2.opacity = 0&amp;#10;&amp;#10;# Get actual_points_text from globals (set in practiceTrial2EndRoutine)&amp;#10;# If not found, try to get trueVal from globals and create the text&amp;#10;actual_points_text = globals().get('actual_points_text', None)&amp;#10;&amp;#10;if actual_points_text is None:&amp;#10;    # Fallback: get trueVal from globals and create text&amp;#10;    trueVal = globals().get('trueVal', 0)&amp;#10;    try:&amp;#10;        actual_points_text = f&quot;Actual points: {trueVal:+d}&quot;&amp;#10;        print(f&quot;Created actual_points_text from trueVal: {actual_points_text}&quot;)&amp;#10;    except:&amp;#10;        actual_points_text = &quot;Actual points: 0&quot;&amp;#10;        print(&quot;WARNING: Could not create actual_points_text, using default&quot;)&amp;#10;else:&amp;#10;    print(f&quot;Using actual_points_text from globals: {actual_points_text}&quot;)&amp;#10;&amp;#10;# Set the text component (DO NOT set text in Builder - leave it blank!)&amp;#10;# UNIQUE NAME: text_actual_points_b2&amp;#10;if 'text_actual_points_b2' in locals():&amp;#10;    text_actual_points_b2.text = actual_points_text&amp;#10;    text_actual_points_b2.opacity = 1&amp;#10;    text_actual_points_b2.setAutoDraw(True)&amp;#10;    print(f&quot;Showing actual points Block 2 practice: {actual_points_text}&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_actual_points_b2 component not found!&quot;)&amp;#10;&amp;#10;# Ensure actualPoints_duration is available from globals&amp;#10;# This helps Builder access it for the routine duration&amp;#10;# Duration should always be 2.0 seconds for practice trials&amp;#10;actualPoints_duration = globals().get('actualPoints_duration', 2.0)&amp;#10;if actualPoints_duration != 2.0:&amp;#10;    # Force it to 2.0 for practice trials&amp;#10;    actualPoints_duration = 2.0&amp;#10;    globals()['actualPoints_duration'] = 2.0&amp;#10;    print(f&quot;WARNING: actualPoints_duration was {globals().get('actualPoints_duration', 2.0)}, forcing to 2.0 for practice&quot;)&amp;#10;else:&amp;#10;    print(f&quot;actualPoints_duration is {actualPoints_duration} seconds (correct)&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide actual points text for Block 2 practice trials&amp;#10;# UNIQUE NAME: text_actual_points_b2&amp;#10;if 'text_actual_points_b2' in locals():&amp;#10;    text_actual_points_b2.setAutoDraw(False)&amp;#10;    text_actual_points_b2.opacity = 0&amp;#10;    print(&quot;Hidden text_actual_points_b2 in End Routine&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: text_actual_points_b2 not found in End Routine!&quot;)&amp;#10;&amp;#10;# Also hide any other components that might still be visible&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;if 'text_timeout_b2' in locals():&amp;#10;    text_timeout_b2.setAutoDraw(False)&amp;#10;    text_timeout_b2.opacity = 0&amp;#10;if 'crosshair_practice_b2' in locals():&amp;#10;    crosshair_practice_b2.setAutoDraw(False)&amp;#10;    crosshair_practice_b2.opacity = 0&amp;#10;&amp;#10;# Clear any key presses&amp;#10;try:&amp;#10;    event.clearEvents()&amp;#10;except:&amp;#10;    pass&amp;#10;&amp;#10;print(&quot;Actual points routine Block 2 practice ended - ready for crosshair2_2&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_48" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="text_actual_points_b2" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_actual_points_b2" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$actualPoints_duration" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="crosshair2_2">
      <RoutineSettingsComponent name="crosshair2_2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="crosshair2_2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_49" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;if (_pj.in_es6(&quot;crosshair_2&quot;, locals())) {&amp;#10;    crosshair_2.opacity = 1;&amp;#10;    crosshair_2.setAutoDraw(true);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;crosshair&quot;, locals())) {&amp;#10;        crosshair.opacity = 1;&amp;#10;        crosshair.setAutoDraw(true);&amp;#10;        console.log(&quot;Using crosshair component for Block 2 practice&quot;);&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Second crosshair screen for Block 2 practice trials - duration is random 2-4 seconds&amp;#10;# Duration is set in practiceTrial2EndRoutine.py as crosshair2_duration&amp;#10;&amp;#10;# UNIQUE NAME: crosshair_practice_b3 (for crosshair2_2 routine - different from crosshair1_2)&amp;#10;# IMPORTANT: Hide any remaining practice trial components&amp;#10;if 'image_practice_b2' in locals():&amp;#10;    image_practice_b2.setAutoDraw(False)&amp;#10;    image_practice_b2.opacity = 0&amp;#10;if 'slider_practice_b2' in locals():&amp;#10;    slider_practice_b2.setAutoDraw(False)&amp;#10;if 'text_slider_value_b2' in locals():&amp;#10;    text_slider_value_b2.setAutoDraw(False)&amp;#10;    text_slider_value_b2.opacity = 0&amp;#10;if 'text_timeout_b2' in locals():&amp;#10;    text_timeout_b2.setAutoDraw(False)&amp;#10;    text_timeout_b2.opacity = 0&amp;#10;if 'text_actual_points_b2' in locals():&amp;#10;    text_actual_points_b2.setAutoDraw(False)&amp;#10;    text_actual_points_b2.opacity = 0&amp;#10;if 'crosshair_practice_b2' in locals():&amp;#10;    crosshair_practice_b2.setAutoDraw(False)&amp;#10;    crosshair_practice_b2.opacity = 0&amp;#10;&amp;#10;# Show crosshair&amp;#10;if 'crosshair_practice_b3' in locals():&amp;#10;    crosshair_practice_b3.opacity = 1&amp;#10;    crosshair_practice_b3.setAutoDraw(True)&amp;#10;    print(&quot;Showing crosshair2_2 for Block 2 practice&quot;)&amp;#10;else:&amp;#10;    print(&quot;WARNING: crosshair_practice_b3 component not found!&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="# Hide crosshair when routine ends&amp;#10;# UNIQUE NAME: crosshair_practice_b3 (for crosshair2_2 routine)&amp;#10;if 'crosshair_practice_b3' in locals():&amp;#10;    crosshair_practice_b3.setAutoDraw(False)&amp;#10;    crosshair_practice_b3.opacity = 0&amp;#10;&amp;#10;# Check if this is the last practice trial - if so, mark practice trials as complete&amp;#10;practice_block2_index = globals().get('practice_block2_index', -1)&amp;#10;practice_block2 = globals().get('practice_block2', [])&amp;#10;if practice_block2_index &gt;= len(practice_block2) - 1:&amp;#10;    # This is the last practice trial - all 3 practice trials are now complete&amp;#10;    globals()['practice_trials_block2_complete'] = True&amp;#10;    print(f&quot;Practice trials Block 2 COMPLETE (completed all 3 trials)&quot;)&amp;#10;    &amp;#10;    # Hide any practice trial images/components (using UNIQUE NAMES)&amp;#10;    if 'image_practice_b2' in locals():&amp;#10;        image_practice_b2.setAutoDraw(False)&amp;#10;        image_practice_b2.opacity = 0&amp;#10;    if 'slider_practice_b2' in locals():&amp;#10;        slider_practice_b2.setAutoDraw(False)&amp;#10;    if 'text_slider_value_b2' in locals():&amp;#10;        text_slider_value_b2.setAutoDraw(False)&amp;#10;        text_slider_value_b2.opacity = 0&amp;#10;    if 'text_actual_points_b2' in locals():&amp;#10;        text_actual_points_b2.setAutoDraw(False)&amp;#10;        text_actual_points_b2.opacity = 0&amp;#10;    if 'text_timeout_b2' in locals():&amp;#10;        text_timeout_b2.setAutoDraw(False)&amp;#10;        text_timeout_b2.opacity = 0&amp;#10;    &amp;#10;    # Now it's safe to show scanner sync&amp;#10;    globals()['ready_for_scanner_sync_block2'] = True&amp;#10;    print(&quot;Set ready_for_scanner_sync_block2 = True (practice trials complete)&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_49" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="crosshair_practice_b3" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="crosshair_practice_b3" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="2" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="+" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
    <Routine name="start2">
      <RoutineSettingsComponent name="start2" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="start2" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_50" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# Code to run at the BEGINNING of practiceTrialsLoop2 loop&amp;#10;# This checks if Block 2 setup is already complete and finishes the loop immediately if so&amp;#10;&amp;#10;# IMPORTANT: Skip practice trials if Block 2 setup is already complete&amp;#10;block2_setup_complete = globals().get('block2_setup_complete', False)&amp;#10;learning_block_index = globals().get('learning_block_index', -1)&amp;#10;total_expected = globals().get('total_trials', 120)&amp;#10;trials_per_block = total_expected // 2&amp;#10;&amp;#10;# If Block 2 setup is complete or already in Block 2, finish the loop immediately&amp;#10;if block2_setup_complete or learning_block_index &gt;= trials_per_block:&amp;#10;    # Finish the loop immediately - it will skip all iterations&amp;#10;    if 'practiceTrialsLoop2' in locals():&amp;#10;        practiceTrialsLoop2.finished = True&amp;#10;        print(f&quot;Skipping practiceTrialsLoop2: block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index} &gt;= trials_per_block={trials_per_block}&quot;)&amp;#10;    elif 'currentLoop' in locals():&amp;#10;        currentLoop.finished = True&amp;#10;        print(f&quot;Skipping practiceTrialsLoop2 (via currentLoop): block2_setup_complete={block2_setup_complete}&quot;)&amp;#10;else:&amp;#10;    print(f&quot;Practice trials Block 2 will run (block2_setup_complete={block2_setup_complete}, learning_block_index={learning_block_index})&quot;)&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="/* Syntax Error: Fix Python code */" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_50" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="inBetween">
      <RoutineSettingsComponent name="inBetween" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="inBetween" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="text_24" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="text_24" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="You have completed the first block.&amp;#10;&amp;#10;Press C to continue." valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_14" plugin="None">
        <Param val="'c', 'C'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="" valType="str" updates="None" name="deviceLabel"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_14" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="last key" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
  </Routines>
  <Flow>
    <Routine name="decisionPhase"/>
    <Routine name="decisionInstructions"/>
    <Routine name="whichFruit"/>
    <Routine name="practiceIntro2"/>
    <LoopInitiator loopType="TrialHandler" name="practiceDecisionLoop">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="3" valType="num"/>
      <Param name="name" updates="None" val="practiceDecisionLoop" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="practiceDecisionSimulus1"/>
    <Routine name="crosshairPracticeDecision1"/>
    <Routine name="practiceDecisionSimulus2"/>
    <Routine name="crosshairPracticeDecision2"/>
    <Routine name="practiceDecisionMaking"/>
    <Routine name="crosshairPracticeDecision3"/>
    <LoopTerminator name="practiceDecisionLoop"/>
    <Routine name="taskStartSoonBlock3"/>
    <Routine name="scannerSyncBlock3"/>
    <Routine name="crosshair3Block3"/>
    <Routine name="scannerWaitBlock3"/>
    <Routine name="startTaskBlock3"/>
    <LoopInitiator loopType="TrialHandler" name="decisionLoop">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="2" valType="num"/>
      <Param name="name" updates="None" val="decisionLoop" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="decisionStimulus1"/>
    <Routine name="decisionITI1"/>
    <Routine name="decisionStimulus2"/>
    <Routine name="decisionITI2"/>
    <Routine name="decisionMaking"/>
    <Routine name="decisionTimeout"/>
    <Routine name="decisionITI3"/>
    <LoopTerminator name="decisionLoop"/>
    <Routine name="inBetween"/>
    <Routine name="TaskStructure"/>
    <Routine name="yourGoal"/>
    <Routine name="keyInstructions"/>
    <Routine name="practiceIntro"/>
    <LoopInitiator loopType="TrialHandler" name="practiceTrials">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="3" valType="num"/>
      <Param name="name" updates="None" val="practiceTrials" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="practiceTrial"/>
    <Routine name="crosshair5"/>
    <Routine name="actualPoints1"/>
    <Routine name="crosshair3"/>
    <LoopTerminator name="practiceTrials"/>
    <Routine name="taskStartSoon"/>
    <Routine name="scannerSync"/>
    <Routine name="crosshair3"/>
    <Routine name="scannerWait"/>
    <Routine name="startTask"/>
    <LoopInitiator loopType="TrialHandler" name="learningLoop">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="4" valType="num"/>
      <Param name="name" updates="None" val="learningLoop" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="trial"/>
    <Routine name="timeout"/>
    <Routine name="crosshair1"/>
    <Routine name="actualPoints"/>
    <Routine name="crosshair2"/>
    <Routine name="blockTransition"/>
    <Routine name="taskStartSoonBlock2"/>
    <Routine name="scannerSyncBlock2"/>
    <Routine name="crosshairBlock2"/>
    <Routine name="scannerWaitBlock2"/>
    <Routine name="crosshair2Block2"/>
    <LoopTerminator name="learningLoop"/>
    <Routine name="thankYou"/>
  </Flow>
</PsychoPy2experiment>
